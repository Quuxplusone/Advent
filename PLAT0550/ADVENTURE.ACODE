*
*        This version of Adventure was designed and written by:
*
*        David Platt
*        Honeywell Los Angeles Development Center
*        5250 West Century Boulevard
*        Los Angeles, California   90254
*        (213) 216-6232
*
*
*        This database source file is designed to be used with the
*        Honeywell CP-6 operating system's version of the Adventure
*        "munger" and "interpreter" programs.  It is an adaptation of
*        the database originally implemented on the Xerox CP-V system,
*        and with a few minor exceptions it is backwards compatible.
*        A full understanding of the functionality of the A-code
*        pseudo-instructions can best be acquired by studying both
*        the CP-V and CP-6 implementations of the interpreter, since
*        highly different methods are used to implement a similar
*        target machine in these two versions.  In adapting this
*        database and its support programs to a non-Honeywell system,
*        it is strongly suggested that a powerful systems
*        implementation language be used (i.e., don't try to do
*        it in APL (or in BASIC unless you have no other choice)).
*
*        The author can be contacted at the above address / phone
*        number, and is willing to answer questions and offer
*        (hopefully) sage advice on how to get it working.  Good
*        luck, all!
*
*
*
NULL      THE,A,IT,AN,THAT,THIS,TO
NULL     THEM
*
*        Define control bits
*
*        First: bits set in ARG1 and ARG2 to indicate word type
*
SYNON    15,OBJECT
SYNON    14,VERB
SYNON    13,PLACE
*
*        Next, bits set in STATUS variable
*
SYNON    0,MOVED        {set by interpreter if we moved during}
*                       {the previous turn (since we last cleared}
*                       {this bit manually)}
SYNON    1,QUICKIE     {BRIEF output mode in effect}
SYNON    2,FASTMODE    {FAST output mode in effect}
SYNON    3,FULLDISP    {Display full place description}
SYNON    4,PLS.CLARIFY  {Unsure what you intend, please clarify. }
*                       {If set and the Adventurer's next command}
*                       {is a single word, the A_code parser will}
*                       {try to make a two-word phrase out of the}
*                       {previous command and the just-entered   }
*                       {command.                                }
SYNON    5,JUGGLED      {set by interpreter if we picked up, }
*                       {dropped, or moved any objects in the}
*                       {recent past (since manually clearing}
*                       {the bit}
*
*        Next, bits related to places
*
SYNON    0,LIT         {Place is self-illuminated}
SYNON    1,BEENHERE    {We've been here at least once}
SYNON    2,NODWARF     {Dwarves can't go here}
SYNON    3,NOBACK      {Can't use BACK to go to/from this place}
SYNON    4,NOTINCAVE   {This place is not in the cave}
SYNON    5,HINTABLE    {There may be a hint for this place}
SYNON    6,H20HERE     {Water is available here}
SYNON    7,INMAZE      {This room is in one of the mazes}
SYNON    8,ONE.EXIT    {Only one exit out of room - dwarves can block}
*                      {your way and force you to fight them.}
SYNON    9,THROWER     {Throwing objects here will send them elsewhere,}
*                      {unless you're throwing them at something}
*                      {special (like a troll or dwarf).}
SYNON    12,DAMP        {the ground is damp here because he poured}
*                       {water or oil from the bottle}
*
*        Next, bits related to objects
*
SYNON    0,PORTABLE    {Object can be carried}
SYNON    1,SEEN        {We've seen the object}
SYNON    2,VALUED      {It's a treasure - must be left in the building}
SYNON    3,SCHIZOID    {It's schizoid - in 2 places at once}
SYNON    4,UNSTABLE    {Unstable objects get kicked from state 0}
*                         into state 1 the first time they're picked
*                         up - applies only to objects that aren't
*                         special-cased anywhere in the code.
SYNON    5,MORTAL      {This is a killable entity}
SYNON    6,OPENABLE    {Object can be opened/unlocked}
SYNON    7,INVISIBLE   {Object can't be seen.}
SYNON    8,EDIBLE      {Object can be eaten (food/mushroom)}
SYNON    9,FREEBIE     {Object is effectively weightless}
SYNON    10,SPECIAL1   {Special control bit 1 - depends on context}
SYNON    11,SPECIAL2   {Special control bit 2 - depends on context}
*
*        The usage of SPECIAL1 and SPECIAL2 is currently as
*        follows:
*
*        Lamp        #1 set if current set of batteries in lamp have
*                    been recharged via the NOSIDE SAMOHT phrase.
*
*        Dwarf       #1 set if the dwarf who just appeared hasn't
*                    thrown his first knife (which always misses)
*                    yet.  #2 set if the dwarf is angry (you tried
*                    to feed him, threw food at him, or doused him
*                    with water or oil).
*
*        Pirate      #1 set if the pirate is chasing you.
*
*        Djinn       #1 set if you released the djinn from the
*                    pentagram (he's grateful).  #2 set if he has
*                    given you a hint as a reward for doing so.
*
*        Safe        #1 set if you have successfully opened the safe
*                    at least once.
*
*        Quicksand   #1 set if you have drowned in the quicksand at
*                    least once.
*
*        Troll       #1 set if you have stolen the eggs back from the1
*                    troll.
*
*        Grate       #1 set if you tried to get out through the grate
*                    during closure.
*
*
*        Define bits for the ADMIN variable
*
SYNON    0,DEMO             {Demonstration game}
SYNON    1,TICKER            {Call TICK label after each move, if set.}
SYNON    3,NOMAGIC          {Magic words are being suppressed}
SYNON    4,PANICED          {He paniced during closure}
SYNON    5,OLORIN            {He's a wizard}
SYNON    6,RANOUT            {His lamp just died.}
SYNON    7,HELPED.HIM         {gave him vanilla "HELP" message once}
SYNON    8,QUIPPED            {dwarf died in a strange manner}
*
*        Define administrative control parameters
*
SYNON    0,MINTIME      {# of minutes you must wait after SAVE}
*                       {zero means no wait, and you can continue}
*                       {after saving and can restore a saved game}
*                       {any number of times}
SYNON    30,MAX.DEMO    {maximum # of moves in demo games}
SYNON    800,MAX.GAME   {maximum # of moves in real games}
SYNON    20,HINT.COST   {what each hint costs you}
*
*        Define value passed by interpreter for "unrecognized word"
*
SYNON    9999,BADWORD
*
*        Define worth of each CLOSURE phase
*
SYNON    20,CLOSE.CREDIT   {each phase of CLOSURE is worth 20 points}
*
*        The phases of cave closure are as follows:
*
*        0 - cave open and operating normally
*        1 - ditto - all treasures are in well-house
*        2 - "Cave closing soon"
*        3 - "Cave closed" - in cylindrical room
*        4 - escaped from cylindrical room, back outside cave
*        5 - located the treasure room, wins game!
*
PLACE     ROAD
          You're at end of road again.
         %You are standing at the end of a road before a small brick building.
          Around you is a forest.  A small stream flows out of the building and
          down a gully.
PLACE     HILL
          You're at hill in road.
         %You have walked up a hill, still in the forest. The road slopes back
          down the other side of the hill.  There is a building in the distance.
PLACE     BUILDING
          You're inside building.
         %You are inside a building, a well house for a large spring.
SYNON    BUILDING,HOUSE       {synonym for compatibility with Multics}
PLACE     VALLEY
          You're in valley.
         %You are in a valley in the forest beside a stream tumbling along a
          rocky bed.
PLACE     FOREST
          You're in forest.
         %You are in open forest, with a deep valley to one side.
PLACE     FOREST2
          You're in forest.
         %You are in open forest near both a valley and a road.
PLACE     SLIT
          You're at slit in streambed.
         %At your feet all the water of the stream splashes into a 2-inch slit
          in the rock.  Downstream the streambed is bare rock.
PLACE     DEPRESSION
          You're outside grate.
         %You are in a 20-foot depression floored with bare dirt. Set into the
          dirt is a strong steel grate mounted in concrete.  A dry streambed
          leads into the depression.
PLACE     INCAVE
          You're below the grate.
         %You are in a small chamber beneath a 3x3 steel grate to the surface.
          A low crawl over cobbles leads inward to the west.
PLACE     COBBLES
          You're in cobble crawl.
         %You are crawling over cobbles in a low passage. There is a dim light
          at the east end of the passage.
PLACE     DEBRIS
          You're in debris room.
         %You are in a debris room filled with stuff washed in from the surface.
          A low wide passage with cobbles becomes plugged with mud and debris
          here, but an awkward canyon leads upward and west.  A note on the wall
          says "Magic word XYZZY".
PLACE     CANYON
          You are in an awkward sloping east/west canyon.
         %You are in an awkward sloping east/west canyon.
PLACE     BIRDCHAMBER
          You're in bird chamber.
         %You are in a splendid chamber thirty feet high. The walls are frozen
          rivers of orange stone.  An awkward canyon and a good passage exit
          from east and west sides of the chamber.
PLACE     PIT
          You're at top of small pit.
         %At your feet is a small pit breathing traces of white mist. An east
          passage ends here except for a small crack leading on.  Rough stone
         steps lead down the pit.
PLACE     MISTS
          You're in Hall of Mists.
         %You are at one end of a vast hall stretching forward out of sight to
         the west, filled with wisps of white mist that sway to and fro
         almost as if alive.  Rough stone steps lead up to a passage at the
         top of a dome above you.  A wide staircase runs downward into
         the darkness;  a chill wind blows up from below.  There are small
         passages to the north and south, and a small crack leads east.
PLACE     EASTOFFISSUR
          You're on east bank of fissure.
         %You are on the east bank of a fissure slicing clear across the hall.
          The mist is quite thick here, and the fissure is too wide to jump.
PLACE     WESTOFFISSUR
          You are on the west side of the fissure in the Hall of Mists.
         %You are on the west side of the fissure in the Hall of Mists.
PLACE     GOLDROOM
          You're in nugget of gold room.
         %This is a low room with a crude note on the wall. The note says,
          "You won't get it up the steps".
PLACE     MTKING
          You're in Hall of Mt King.
         %You are in the Hall of the Mountain King, with passages off in all
          directions.
PLACE     WEND2PIT
          You're at west end of Twopit room.
         %You are at the west end of the Twopit room. There is a large hole in
          the wall above the pit at this end of the room.
PLACE     EEND2PIT
          You're at east end of Twopit room.
         %You are at the east end of the Twopit room. The floor here is
          littered with thin rock slabs, which make it easy to descend the pits.
          There is a path here bypassing the pits to connect passages from east
          and west.  There are holes all over, but the only big one is on the
          wall directly over the west pit where you can't get to it.
PLACE     EASTPIT
         You're in east pit.
         There is a small pool of oil here.
         %You are at the bottom of the eastern pit in the Twopit room. There is
          a small pool of oil in one corner of the pit.
PLACE     WESTPIT
          You're in west pit.
         %You are at the bottom of the western pit in the Twopit room. There is
          a large hole in the wall about 25 feet above you.
PLACE     LOWNSPASSAGE
          You're in a low N/S passage.
         %You are in a low N/S passage at a hole in the floor. The hole goes
          down to an E/W passage.
PLACE     SOUTHSIDE
          You are in the south side chamber.
         %You are in the south side chamber.
PLACE     WESTSIDE
          You're in the west side chamber.
         %You are in the west side chamber of the Hall of the Mountain King.
          A passage continues west and up here.
PLACE     Y2
          You're at "Y2".
         %You are in a large room, with a passage to the south, a passage to the
          west, and a wall of broken rock to the east.  There is a large "Y2" on
          a rock in the room's center.
PLACE     JUMBLE
          You are in a jumble of rock, with cracks everywhere.
         %You are in a jumble of rock, with cracks everywhere.
*
*        Note synonyms for Jumble.
*
SYNON    JUMBLE,WALL,BROKEN
*
*
PLACE     WINDOW
          You're at window on pit.
         %You're at a low window overlooking a huge pit, which extends up out of
          sight.  A floor is indistinctly visible over 50 feet below.  Traces of
          white mist cover the floor of the pit, becoming thicker to the right.
          Marks in the dust around the window would seem to indicate that
          someone has been here recently.  Directly across the pit from you and
          25 feet away there is a similar window looking into a lighted room.  A
          shadowy figure can be seen there peering back at you.
PLACE     WINDOW2
          You're at window on pit.
         %You're at a low window overlooking a huge pit, which extends up out of
          sight.  A floor is indistinctly visible over 50 feet below.  Traces of
          white mist cover the floor of the pit, becoming thicker to the left.
          Marks in the dust around the window would seem to indicate that
          someone has been here recently.  Directly across the pit from you and
          25 feet away there is a similar window looking into a lighted room.  A
          shadowy figure can be seen there peering back at you.
PLACE     DIRTY
          You're in dirty passage.
         %You are in a dirty broken passage. To the east is a crawl. To the
          west is a large passage.  Above you is a hole to another passage.
PLACE     BRINK
          You are on the brink of a small clean climbable pit.
         %You are on the brink of a small clean climbable pit. A crawl leads
          west.
PLACE     STREAMPIT
          You are at the pit's bottom with a stream nearby.
         %You are in the bottom of a small pit with a little stream, which
          enters and exits through tiny slits.
PLACE     DUSTY
          You're in dusty rock room.
         %You are in a large room full of dusty rocks. There is a big hole in
          the floor.  There are cracks everywhere, and a passage leading east.
PLACE     WENDMISTS
          You're at west end of Hall of Mists.
         %You are at the west end of Hall of Mists. A low wide crawl continues
          west and another goes north.  To the south is a little passage 6 feet
          off the floor.
PLACE     MAZEA.42
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.43
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.44
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.45
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.46
          Dead end.
         %Dead end.
PLACE     MAZEA.47
          Dead end.
         %Dead end.
PLACE     MAZEA.48
          Dead end.
         %Dead end.
PLACE     MAZEA.49
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.50
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.51
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.52
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.53
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.54
          Dead end.
         %Dead end.
PLACE     MAZEA.55
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.56
          Dead end.
         %Dead end.
PLACE     MAZEA.57.PIT
          You're at brink of pit.
         %You are on the brink of a thirty foot pit with a massive orange column
          down one wall.  You could climb down here but you could not get back
          up.  The maze continues at this level.
PLACE     MAZEA.58
          Dead end.
         %Dead end.
PLACE     LONGHALLEAST
          You're at east end of long hall.
         %You are at the east end of a very long hall apparently without side
          chambers.  To the east a low wide crawl slants up.  To the north a
          round two foot hole slants down.
PLACE     LONGHALLWEST
          You're at west end of long hall.
         %You are at the west end of a very long featureless hall. The hall
          joins up with a narrow north/south passage.
PLACE     CROSSOVER
          You are at a crossover of a high N/S passage and a low E/W one.
         %You are at a crossover of a high N/S passage and a low E/W one.
PLACE     DEADEND1
         Dead end passage. Scratched on a rock is the message, "Stand where
         the statue gazes, and make use of the proper tool."
        %Dead end passage. Scratched on a rock is the message, "Stand where
         the statue gazes, and make use of the proper tool."
PLACE     COMPLEX
          You're at complex junction.
         %You are at a complex junction. A low hands and knees passage from the
          north joins a higher crawl from the east to make a walking passage
          going west.  There is also a large room above.  The air is damp here.
PLACE     BEDQUILT
          You're back at Bedquilt.
         %You are in Bedquilt, a long east/west passage with holes everywhere.
          To explore at random select NORTH, SOUTH, UP, or DOWN.
PLACE     SWISS
          You're in Swiss cheese room.
         %You are in a room whose walls resemble Swiss cheese. Obvious passages
          go west, east, NE, and NW.  Part of the room is occupied by a large
          bedrock block.
PLACE     SLAB
          You're in Slab room.
         %You are in a large low circular chamber whose floor is an immense slab
          fallen from the ceiling (Slab room).  East and west there once were
          large passages, but they are now filled with boulders.  Low small
          passages go north and south, and the south one quickly bends west
          around the boulders.
PLACE     SECRETNSCYN
          You are in a secret N/S canyon above a large room.
         %You are in a secret N/S canyon above a large room.
PLACE     SECRETNSCPAS
          You are in a secret N/S canyon above a sizable passage.
         %You are in a secret N/S canyon above a sizable passage.
PLACE     SECRETJUNCTION
          You're at junction of three secret canyons.
         %You are in a secret canyon at a junction of three canyons, bearing
          north, south, and SE.  The north one is as tall as the other two
          combined.
PLACE     LOW
          You are in a large low room.  Crawls lead north, SE, and SW.
         %You are in a large low room.  Crawls lead north, SE, and SW.
PLACE     DEADEND2
         Dead end crawl.
        %Dead end crawl.
PLACE     SECRETEW.TITE
          You're in secret E/W canyon above tight canyon.
         %You are in a secret canyon which here runs E/W. It crosses over a
          very tight canyon 15 feet below.  If you go down you may not be able
          to get back up.
PLACE     NSCANYONWIDE
          You are at a wide place in a very tight N/S canyon.
         %You are at a wide place in a very tight N/S canyon.
PLACE     TIGHTERSTILL
          The canyon here becomes too tight to go further south.
         %The canyon here becomes too tight to go further south.
PLACE     TALLEWCNYN
          You are in a tall E/W canyon.
         %You are in a tall E/W canyon. A low tight crawl goes 3 feet north and
          seems to open up.
PLACE     DEADEND3
          The canyon runs into a mass of boulders -- dead end.
         %The canyon runs into a mass of boulders -- dead end.  Scratched on
         one of the boulders are the words, "Jerry Cornelius was here."
PLACE     MAZEA.80
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.81
          Dead end.
         %Dead end.
PLACE     MAZEA.82
          Dead end.
         %Dead end.
PLACE     MAZEA.83
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.84
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     MAZEA.85
          Dead end.
         %Dead end.
PLACE     MAZEA.86
          Dead end.
         %Dead end.
PLACE     MAZEA.87
          You are in a maze of twisty little passages, all alike.
         %You are in a maze of twisty little passages, all alike.
PLACE     NARROWCORRID
          You're in narrow corridor.
         %You are in a long, narrow corridor stretching out of sight to the
          west.  At the eastern end is a hole through which you can see a
          profusion of leaves.
PLACE     INCLINE
          You're at steep incline above large room.
         %You are at the top of a steep incline above a large room. You could
          climb down here, but you would not be able to climb up.  There is a
          passage leading back to the north.
PLACE     GIANT
          You're in Giant room.
         %You are in the Giant room. The ceiling here is too high up for your
          lamp to show it.  Cavernous passages lead east, north, and south.  On
          the west wall is scrawled the inscription, "Fee Fie Foe Foo" {sic}.
PLACE     IMMENSENSPASS
          You are at one end of an immense north/south passage.
         %You are at one end of an immense north/south passage.
PLACE     CAVERN
          You're in cavern with waterfall.
         %You are in a magnificent cavern with a rushing stream, which cascades
          over a sparkling waterfall into a roaring whirlpool which disappears
          through a hole in the floor.  Passages exit to the south and west.
PLACE     SOFT
          You're in soft room.
         %You are in the soft room. The walls are covered with heavy curtains,
          the floor with a thick pile carpet.  Moss covers the ceiling.
PLACE     ORIENTAL
          You're in Oriental room.
         %This is the Oriental room. Ancient oriental cave drawings cover the
          walls.  A gently sloping passage leads upward to the north, another
          passage leads SE, and a hands and knees crawl leads west.
PLACE     MISTY
          You're in misty cavern.
         %You are following a wide path around the outer edge of a large cavern.
          Far below, through a heavy white mist, strange splashing noises can be
          heard.  The mist rises up through a fissure in the ceiling.  The path
          exits to the south and west.
PLACE     ALCOVE
          You're in alcove.
         %You are in an alcove. A small NW path seems to widen after a short
          distance.  An extremely tight tunnel leads east.  It looks like a very
          tight squeeze.  An eerie light can be seen at the other end.
PLACE     PLOVER
          You're in Plover room.
         %You're in a small chamber lit by an eerie green light. An extremely
          narrow tunnel exits to the west.  A dark corridor leads NE.
PLACE     DARK
          You're in Dark room.
         %You're in the Dark room. A corridor leading south is the only exit.
PLACE     ARCHED
          You're in arched hall.
         %You are in an arched hall. A coral passage continues up and east.
          The air smells of sea water.
PLACE     SHELL
          You're in Shell room.
         %You're in a large room carved out of sedimentary rock. The floor and
          walls are littered with bits of shells imbedded in the stone.  A
          shallow passage proceeds downward, and a somewhat steeper one leads
          up.  A low hands and knees passage enters from the south.
PLACE     RAGGEDCORRID
          You are in a long sloping corridor with ragged sharp walls.
         %You are in a long sloping corridor with ragged sharp walls.
PLACE     CULDESAC
          You are in a cul-de-sac about eight feet across.
         %You are in a cul-de-sac about eight feet across.
PLACE     ANTEROOM
          You're in anteroom.
         %You are in an anteroom leading to a large passage to the east. Small
          passages go west and up.  The remnants of recent digging are evident.
          A sign in midair here says "Cave under construction beyond this point.
          Proceed at own risk.  {Witt Construction Company}"
PLACE     MAZED.107
          You are in a maze of twisty little passages, all different.
         %You are in a maze of twisty little passages, all different.
PLACE     WITTSEND
          You're at Witt's End.
         %You are at Witt's End. Passages lead off in *all* directions.
PLACE     MIRRORCNYN
          You're in mirror canyon.
         %You are in a north/south canyon about 25 feet across. The floor is
          covered by white mist seeping in from the north.  The walls extend
          upward for well over 100 feet.  Suspended from some unseen point far
          above you, an enormous two-sided mirror is hanging parallel to and
          midway between the canyon walls.  (The mirror is obviously provided
          for the use of the dwarves, who as you know, are extremely vain.)  A
          small window can be seen in either wall, some fifty feet up.
PLACE     STALACT
          You're at top of stalactite.
         %A large stalactite extends from the roof and almost reaches the floor
          below.  You could climb down it, and jump from it to the floor, but
          having done so you would be unable to reach it to climb back up.
PLACE     MAZED.112
          You are in a little maze of twisting passages, all different.
         %You are in a little maze of twisting passages, all different.
PLACE     RESERVOIR
          You're on southern edge of reservoir.
        %You are on the southern edge of a large underground reservoir.  A
         thick cloud of white mist fills the room, rising from the surface
         of the water and drifting rapidly upwards.  The lake is fed by a
         stream, which tumbles out of a hole in the wall about 10 feet overhead
         and splashes noisily into the water near the reservoir's northern wall.
         A dimly-seen passage exits through the northern wall, but you can't get
         across the water to get to it.  Another passage leads south from here.
PLACE    RESERVOIR.N
         You are at the northern end of the reservoir.
        %You are at the northern end of a large underground reservoir.  Across
         the water to the south, a dark passage is visible.  Another passage
         leads north from here.  Large, clawed tracks are visible in the damp
         ground, leading from the passage into the water.
PLACE    WARM
         You're in small, warm chamber.
        %You are in a small chamber with warm walls.  Mist drifts into the
         chamber from a passage entering from the south and evaporates in
         the heat.  Another passage leads out to the northeast.
PLACE    BALCONY
         You're on balcony above treasure chamber.
        %You are in a high balcony carved out of solid rock overlooking a large,
         bare chamber lit by dozens of flickering torches.  A rushing stream
         pours into the chamber through a two-foot slit in the east wall and
         drains into a large pool along the north side of the chamber.  A small
         plaque riveted to the edge of the balcony reads, "You are looking at
         the Witt Company's main treasure room, constructed by the famous
         architect Ralph Witt in 4004 B.C., and dedicated to the proposition
         that all adventurers are created equal (although some are more equal
         than others).  NO ADMITTANCE VIA THIS ENTRANCE!"  A small, dark
         tunnel leads out to the west.
PLACE    FAKE.SLIT
         You're at slit in streambed.
         %At your feet all the water of the stream splashes into a 2-foot slit
          in the rock.  Downstream the streambed is bare rock.
PLACE    CYLINDRICAL
         You're in cylindrical chamber.
        %You are in a small cylindrical room with very smooth walls and a flat
         floor and ceiling.  There are no exits visible anywhere.
PLACE    TREASUREROOM
        %You plunge into the stream and are carried down into total blackness.
 
        /Deeper
        /        and
        /            deeper
        /                   you
        /                       go,
        /                           down
        /                                into
        /                                 the
        /                              very
        /                           bowels
        /                       of
        /                  the
        /            earth,
        /       until
        /    your
        /         lungs
        /               are
        /                  aching
        /                        with
        /                             the
        /                                 need
        /                                       for
        /                                          fresh
        /                                             air.
        /                                                Suddenly,
        /                                               with
        /                                             a
        /                                          violent
        /                                                >splash!!<
 
         you find yourself sitting on the edge of a pool of water in
         a vast chamber lit by dozens of flaring torches.
 
         The floor is covered with thick layers of precious Persian rugs!
 
         Rare coins, bars of silver, and lumps of gold and platinum are
         strewn carelessly about!
 
         There are diamonds, rubies, sapphires, emeralds, opals, pearls, and
         fabulous sculptures and ornaments carved out of jade and imperishable
         crystal resting on display shelves, along with rare Ming vases and
         ancient Indian turquoise beads!
 
         A flotilla of ruby-encrusted toy boats is floating in the pool of
         water beside you!
 
         A network of golden chains supports a fantastic Iridium crown!
 
         There is a display case on the wall filled with a fantastic selection
         of magical swords, which are singing "Hail to the Chief" in perfect
         pitch and rhythm!
 
         There are a dozen friendly little dwarves in the room, displaying
         their talents by deftly juggling hundreds of golden eggs!
 
         A large troll, a gigantic ogre, and a bearded pirate are tossing
         knives, axes, and clubs back and forth in a friendly demonstration
         of martial skill!
 
         A horde of cheerful little gooseberry goblins are performing
         talented acrobatics to an appreciative audience composed of a dragon,
         a large green snake, a cute little bird (which is sitting, unmolested,
         on the snake's head), a peaceful basilisk, and a large Arabian Djinn.
 
         Everyone turns and sees you, and lets out a heart-warming cheer
         of welcome!
 
PLACE     MAZEA.114
          Dead end.
         %Dead end.
PLACE     SWOFCHASM
          You're on SW side of chasm.
         %You are on one side of a large, deep chasm. A heavy white mist rising
          up from below obscures all view of the far side.  A SW path leads away
          from the chasm into a winding corridor.
PLACE     NEOFCHASM
          You're on NE side of chasm.
         %You are on the far side of the chasm. A NE path leads away from the
          chasm on this side.
PLACE     SLOPING
          You're in sloping corridor.
         %You are in a long winding corridor sloping out of sight in both
          directions.
PLACE     SECRETCYNNE1
          You are in a secret canyon which exits to the north and east.
         %You are in a secret canyon which exits to the north and east.
PLACE     SECRETCYNNE2
          You are in a secret canyon which exits to the north and east.
         %You are in a secret canyon which exits to the north and east.
PLACE     CORRIDOR
          You're in corridor.
         %You're in a long east/west corridor. A faint rumbling noise can be
          heard in the distance.
PLACE     FORK
          You're at fork in path.
         %The path forks here. The left fork leads northeast. A dull rumbling
          seems to get louder in that direction.  The right fork leads southeast
          down a gentle slope.  The main corridor enters from the west.
PLACE     WARMJUNCTN
          You're at junction with warm walls.
         %The walls are quite warm here. From the north can be heard a steady
          roar, so loud that the entire cave seems to be trembling.  Another
          passage leads south, and a low crawl goes east.
PLACE     BREATHTAKER
          You're at breath-taking view.
         %You are on the edge of a breath-taking view. Far below you is an
          active volcano, from which great gouts of molten lava come surging
          out, cascading back down into the depths.  The glowing rock fills the
          farthest reaches of the cavern with a blood-red glare, giving every-
          thing an eerie, macabre appearance.  The air is filled with flickering
          sparks of ash and a heavy smell of brimstone.  The walls are hot to
          the touch, and the thundering of the volcano drowns out all other
          sounds.  Embedded in the jagged roof far overhead are myriad twisted
          formations composed of pure white alabaster, which scatter the murky
          light into sinister apparitions upon the walls.  To one side is a deep
          gorge, filled with a bizarre chaos of tortured rock which seems to
          have been crafted by the devil himself.  An immense river of fire
          crashes out from the depths of the volcano, burns its way through the
          gorge, and plummets into a bottomless pit far off to your left.
         Across the gorge, the entrance to a valley is dimly visible.  To
          the right, an immense geyser of blistering steam erupts continuously
          from a barren island in the center of a sulfurous lake, which bubbles
          ominously.  The far right wall is aflame with an incandescence of its
          own, which lends an additional infernal splendor to the already
          hellish scene.  A dark, foreboding passage exits to the south.
PLACE    FACES
         You're at the south end of the Valley of the Stone Faces.
        %You are standing at the southern end of a long valley illuminated by
         flickering red light from the volcanic gorge behind you.  Carved
         into the walls of the valley is an incredible series of stone faces.
         Some of them look down into the valley with expressions of
         benevolence that would credit a saint;  others glare with a malice
         that makes the heart grow faint.  All of them are imbued with a
         fantastic seeming of life by the shifting and flickering light of
         the volcano.  The entire far end of the valley is taken up by an
         immense carving of a seated figure;  its exact form cannot be seen
         from here due to the uncertainty of the light.
PLACE    BY.FIGURE
         You're at north end of the Valley of the Stone Faces.
        %You are standing at the north end of the Valley of the Stone Faces.
         Above you, an incredible bas-relief statue of an immense minotaur
         has been carved out of the rock.  At least sixty feet high, it sits
         gazing down at you with a faint but definite expression of amusement.
         Between its feet and the floor is a rock wall about ten feet high
         which extends across the entire north end of the valley.
PLACE    PLAIN.1
         You're at south end of fog-filled room.
        %You are standing at the southern end of what appears to be a
         large room filled with multicolored fog.  The sides and far end
         of the room cannot be seen due to the thickness of the fog - it's
         a real pea-souper (even to the color in places!).  A passage leads
         back to the south;  a dull rumbling sound issues from the passage.
PLACE    PLAIN.2
         >$<   Place description(s) for the foggy room are contained in the
         >$<   object "FOG" which resides here.
PLACE    PLAIN.3
         You're in foggy room by cairn of rocks.
        %You are standing in a fog-filled room next to a tall cairn of glowing
         rocks.  An opening in the cairn leads down to a dark passage.
PLACE    NONDESCRIPT
         You're in nondescript chamber.
        %You're in a small, nondescript chamber.  A dark passage leads up
         and to the south, and a wide but low crawl leads north.
PLACE    PENTAGRAM
         You're in room with pentagram.
        %You're in a small room with a very smooth rock floor, onto which
         has been marked a pentagram.  A low crawl leads out to the west, and
         a crack in the rock leads north.
PLACE    CHIMNEY
         You're at the end of the crack, at the bottom of the chimney.
        %The crack in the rock ends here, but a narrow chimney leads up.  You
         should be able to climb it.
PLACE    TUBE
         You're in lava tube at top of chimney.
        %You're at the top of a narrow chimney in the rock.  A cylindrical
         tube composed of hardened lava leads south.
PLACE    TUBE.SLIDE
         You're at steep slide in lava tube.
        %The lava tube continues down and to the south, but it becomes very
         steep here - if you go down it you probably won't be able to get
         back up.
PLACE    BASQUE.1
         You're in rough and narrow passage.
        %You are in a narrow and rough passage running north and south.
         A dull rumbling sound can be heard from the south.
PLACE    BASQUE.2
         You're in rough passage to the north of the basilisk's den.
        %You are in a rough passage to the north of the basilisk's den.
PLACE    BASQUE.FORK
         You're at fork in passage by steps.
        %The passage here enters from the south and divides, with a wide
         tunnel exiting to the north and a set of steps leading downward.
PLACE    ON.STEPS
         You're on the steps.
        %You are on a long, spiral set of steps leading downwards into the
         earth.
PLACE    STEPS.EXIT
         You're at exit on steps.
        %A small tunnel exits from the steps and leads north.  The steps
         continue downwards.
PLACE    STORAGE
         You're in the storage room.
        %You're in what was once a storage room.  A set of steps lead up.
PLACE    FAKE.Y2
         You're at "Y2"?
         %You are in a large room, with a passage to the south, a passage to the
          west, and a wall of broken rock to the east.  There is a large "Y2" on
          a rock in the room's center.
PLACE    FAKE.JUMBLE
         You are in a jumble of rock, with cracks everywhere.
        %You are in a jumble of rock, with cracks everywhere.
PLACE    CATACOMBS.1
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.2
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.3
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.4
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.5
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.6
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.7
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.8
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.9
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.10
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.11
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.12
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.13
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.14
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.15
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.16
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.17
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.18
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    CATACOMBS.19
         You are in the catacombs.  Enchanted tunnels lead in all directions.
        %You are in the catacombs.  Enchanted tunnels lead in all directions.
PLACE    AUDIENCE
         You're at west end of Audience Hall.
        %You are standing at the west end of the royal Audience Hall.
         The walls here are composed of the finest marble, and the floor is
         built of slabs of rare onyx and bloodstone.  The ceiling is high and
         vaulted, and is supported by pillars of rare Egyptian red granite;
         it gives off a nacreous glow that fills the entire chamber with
         a light like moon-light shining off of polished silver.
PLACE    AUDIENCE.E
         You're at east end of Audience Hall.
        %You are at the eastern end of the Audience Hall.  There is a large
         dais rising out of the floor here;  resting upon the dais is a strange-
         looking throne made out of interlocking bars and rods of metal.
PLACE    BANSHEE.1
         You're in winding passage
        %You are in a winding passage which enters from the northwest,
         loops around several times, and exits to the north.
PLACE    GOLDEN
         You're in golden chamber.
        %You are in a chamber with golden walls and a high ceiling.  Passages
         lead south, northeast, and northwest.
PLACE    ARABESQUE
         You're in Arabesque room.
        %You are in a small room whose walls are covered with an elaborate
         pattern of arabesque figures and designs.
PLACE    TRANSLUCENT
         You're in room with translucent walls.
        %You are in a large room whose walls are composed of some translucent
         whitish mineral.  The room is illuminated by a flickering reddish
         glow shining through the southern wall.  A passage leads east.
PLACE     BOULDERS
          You're in chamber of boulders.
         %You are in a small chamber filled with large boulders. The walls are
          very warm, causing the air in the room to be almost stifling from the
          heat.  The only exit is a crawl heading west, through which is coming
          a low rumbling.
PLACE     LIMESTONE
          You're in limestone passage.
         %You are walking along a gently sloping north/south passage lined with
          oddly shaped limestone formations.
PLACE     BARREN
          You are at entrance of the barren room.
         %You are standing at the entrance to a large, barren room. A sign
          posted above the entrance reads:  "Caution!  Bear in room!"
PLACE     BEARHERE
          You are in the barren room.
         %You are inside a barren room. The center of the room is completely
          empty except for some dust.  Marks in the dust lead away toward the
          far end of the room.  The only exit is the way you came in.
PLACE     MAZED.131
          You are in a maze of twisting little passages, all different.
         %You are in a maze of twisting little passages, all different.
PLACE     MAZED.132
          You are in a little maze of twisty passages, all different.
         %You are in a little maze of twisty passages, all different.
PLACE     MAZED.133
          You are in a twisting maze of little passages, all different.
         %You are in a twisting maze of little passages, all different.
PLACE     MAZED.134
          You are in a twisting little maze of passages, all different.
         %You are in a twisting little maze of passages, all different.
PLACE     MAZED.135
          You are in a twisty little maze of passages, all different.
         %You are in a twisty little maze of passages, all different.
PLACE     MAZED.136
          You are in a twisty maze of little passages, all different.
         %You are in a twisty maze of little passages, all different.
PLACE     MAZED.137
          You are in a little twisty maze of passages, all different.
         %You are in a little twisty maze of passages, all different.
PLACE     MAZED.138
          You are in a maze of little twisting passages, all different.
         %You are in a maze of little twisting passages, all different.
PLACE     MAZED.139
          You are in a maze of little twisty passages, all different.
         %You are in a maze of little twisty passages, all different.
PLACE     MAZED.140
          Dead end.
         %Dead end.
PLACE    SANDSTONE
         You're in sandstone chamber.
        %You are in a small chamber to the east of the Hall of Mists.  The
         walls are composed of rough red sandstone.  There is a large, cubical
         chunk of rock in the center of the room.
PLACE    MORION
         You're in the Morion room.
        %You are in a small room.  The walls are composed of a dark, almost
         black form of smoky quartz; they glisten like teeth in the lamp-light.
         The only exit is the passage to the south through which you entered.
PLACE    VAULT
         You're in room with vaulted ceiling.
        %You are in a room with a high, vaulted ceiling.  A tunnel leads
         upwards and to the north.
PLACE    PEELGRUNT
         You're in Peelgrunt room.
        %You are in the Peelgrunt room.
PLACE    INSAFE   {in the safe (weird case - see SAFE actions)}
         You are in the safe.
        %You are inside the safe.
PLACE    CORRID.1
         You are standing in a wide, north-and-south corridor.
        %You are standing in a wide, north-and-south corridor.
PLACE    CORRID.2
         You're at bend in wide corridor.
        %You are standing at a bend in a wide corridor which runs to the east
         and west.  To the east, the corridor turns left and continues north;
         to the west, it turns left and continues south.
PLACE    TOOL
         You're in Tool room.
        %You are in a small, low-ceilinged room with the words "Witt Company
         Tool Room - Melenkurion division" carved into one of the walls.  A
         wide corridor runs south from here.
PLACE    CORRID.3
         You're at division in passage.
        %You are at a division in a narrow passage.  Two spurs run east and
         north;  the main passage exits to the south.
PLACE    CUBICLE
         You're in dank cubicle.
        %You are in a small, dank cubicle of rock.  A small passage leads back
         out to the south;  there is no other obvious exit.
PLACE    SPHERICAL
         You're in spherical room.
        %You're in a large, completely spherical room with polished walls.  A
         narrow passage leads out to the north.
PLACE    TUNNEL.1
         You're in low tunnel with irregular ceiling.
        %You are in a low tunnel with an irregular ceiling.  To the north, the
         tunnel is partially blocked by a recent cave-in, but you can probably
         get past the blockage without too much trouble.
PLACE    GLASSY
         You're in large room with glassy walls.
        %You're standing in a very large room (which however is smaller than the
         Giant room) which has smooth, glassy-looking walls.  A passage enters
         from the south and exits to the north.
PLACE    LAIR
         You're in the Sorcerer's Lair.
        %This is the Sorcerer's Lair.  The walls are covered with exotic runes
         written in strange, indecipherable scripts;  the only readable phrase
         reads "noside samoht".  Strange shadows flit about on the walls, but
         there is nothing visible to cast them.  Iridescent blue light drips
         from a stalactite far above, falls towards the floor, and evaporates
         before touching the ground.  A deep, resonant chanting sound vibrates
         from deep in the ground beneath your feet, and a whispering sound
         composed of the echoes of long-forgotten spells and cantrips seeps
         from the walls and fills the air.  Passages exit to the east and west.
PLACE    BRINK.1
         You're at brink of bottomless pit.
        %You are standing on the brink of what appears to be a bottomless pit
         plunging down into the bowels of the earth.  Ledges run around the
         pit to the east and west, and a passage leads back to the north.
PLACE    BRINK.2
         You're on southern edge of bottomless pit.
        %You are standing at the south end of a ledge running around the west
         side of a bottomless pit.  The ledge once continued around to the east
         side of the pit, but was apparently obliterated by a rock-slide
         years ago.  A cold wind blows out of a tunnel leading to the southeast.
PLACE    ICE
         You're in Ice room.
        %You are in the Ice room.  The walls and ceiling here are composed of
         clear blue glacial ice;  the floor is fortunately made of rock and
         is easy to walk upon.  There is a passage leading to the northwest,
         and a slide of polished ice leading downwards to the east - if you
         were to slide down it you probably couldn't get back up.
PLACE    SLIDE
         You're at bottom of icy slide.
        %You're at the entrance to an extensive and intricate network of tunnels
         carved out of solid ice.  A slippery slope leads upwards and north, but
         you cannot possibly climb up it.
PLACE    ICECAVE.1
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.1A
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.2
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.2A
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.3
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.3A
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.4
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.5
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.6
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.7
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.8
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.9
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.10
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.11
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.12
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.12A
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.13
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.14
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.15
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.15A
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.16
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.17
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.18
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.19
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.20
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.21
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.22
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.23
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.24
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.25
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.26
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.27
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.28
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.28A
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.29
         You are in an intricate network of ice tunnels.
        %You are in an intricate network of ice tunnels.
PLACE    ICECAVE.30
         You're in small, icy chamber.
        %You are in a small chamber melted out of the ice.  Glowing letters
         in midair spell out the words "This way out".
PLACE    BRINK.3
         You're on eastern side of bottomless pit.
        %You are standing on the eastern side of a bottomless pit.  A narrow
         ledge runs north towards a dimly-visible passage;  the ledge once
         continued south of this point but has been shattered by falling rock.
         A narrow crack in the rock leads northeast.
PLACE    CRACK.1
         You're in narrow, twisting crack.
        %You are following a narrow crack in the rock which enters from the
         southwest, turns and twists somewhat, and exits to the southeast.
PLACE    CRACK.2
         You're at north end of tight passage.
        %You are standing at the northern end of a rather tight passage.  A
         narrow crack in the rock leads west.
PLACE    CRACK.3
         You're at south end of tight passage.
        %You are at the southern end of a tight passage.  A hands-and-knees
         crawl continues to the south.
PLACE    CRACK.4
         You're in very small chamber.
        %You are in a very small chamber.  A narrow crawl leads north.
PLACE    ARCH.COR.1
         You're in coral passage.
        %You are in an arched coral passage which enters from the west, splits,
         and continues on to the east over a smooth and damp-looking patch of
         sand.  The fork in the passage once led to the south, but it is now
         completely blocked by debris.
PLACE    ARCH.COR.2
         You're at bend in arched coral corridor.
        %You are at a bend in an arched corral passage;  the passage enters
         from the west over a patch of damp sand, turns, and continues north.
PLACE    ARCH.FORK
         You're at fork in arched corral passage.
        %You are at a fork in a high, arched coral passage.  The main portion
         of the passage enters from the south;  two smaller passages lead
         east and north.  The smell of salt water is very strong here.
PLACE    JONAH
         You're at entrance to the Jonah room.
        %You are standing at the entrance of the Jonah room, a cavernous
         hall with high ribbed walls.  The hall extends far to the south;
         a coral passage leads west.
PLACE    IN.JONAH
         You're at south end of the Jonah room.
        %You are at the south end of the Jonah room.  Ahead of you, the way
         is barred by a large set of immense stalactites and stalagmites
         which intermesh like clenched teeth.  Nothing except blackness is
         visible between the stone formations.
PLACE    FOURIER
         You're in the Fourier passage.
        %You are in the Fourier passage.  This is a long and highly convoluted
         passage composed of coral, which twists and turns like the path of
         an earthworm tripping on LSD.  The passage here enters from the
         northwest, convulses, and exits to the southwest (from which
         direction can be felt a cool and salty-smelling breeze).
PLACE    SHELF
         You're on shelf of rock above beach.
        %You are standing on a large shelf of sedementary rock overlooking
         a lava beach.  The shelf is an extension of an incredible cliff
         which extends north, south, and upwards for as far as the eye can
         see.  Crudely carved steps lead down from the shelf to the beach, and
         a twisting coral passage exits to the west.
PLACE    BEACH
         You're on beach.
        %You are standing on a short, barren beach composed of hardened lava.
         Rugged and unclimbable volcanic hills block all view to the north
         and south, and a seemingly infinite cliff fills the entire western
         hemisphere.  To the east, a narrow inlet of ocean water laps gently
         upon the beach.  The scene is illuminated by the light of three small
         moons shining through the shimmering glow of an aurora that fills
         the entire sky with golden splendor.  Steps lead up the cliff to a
         shelf of rock.
PLACE    PLATFORM
         You're on tiny platform above volcano.
        %You are precariously perched on a tiny platform suspended in midair.
         Two thousand feet below you is the mouth of a very active volcano,
         spewing out a river of hot lava.
*
PLACE    LIMBO
*        Limbo is the normal holding area for objects that aren't
*        currently visible in the cave.  All special objects
*        (dwarf, pirate, axe, treasure chest, pearl, etc) start
*        out here and are moved to the apropriate places in the
*        cave at the proper times.  The nest of golden eggs
*        ends up here the first time you give it to the troll
*        and may be fetched back to the Giant room with the
*        Fee Fie Foe Foo sequence;  the second time you try to
*        give it to the troll it ends up in Ylem (q.v.) and
*        can't be gotten back.  The Oyster starts out here and
*        is swapped with the Clam when you succeed in opening the
*        clam with the trident.  Needless to say, there is no
*        way that the adventurer should be able to get to Limbo
*        (unless he is a wizard using the master-mode commands)
*        since he could do all kinds of nasty things here (get the
*        batteries without paying the coins, get the rug without
*        first killing the dragon, get the food back after feeding
*        the bear, move the clam to the house, etc.)  Very nasty!
*
         You are in Limbo.
         %You are in Limbo (program bug!).  Say OUT to get out of here.
PLACE    YLEM
*
*        Ylem must be the last place defined (following Limbo).  It is
*        intended as a trash-can place - objects moved to Ylem are
*        forever inaccessable (coding convention only - no enforcement
*        by the handlers).  Currently Ylem is used as follows:  if
*        you cheat the troll out of the nest of golden eggs (as you
*        must if you wish to get full score) and then try to bribe
*        him with them a second time, he lets them sail into the chasm
*        and demands something else;  the eggs are moved to Ylem, and
*        the Fee Fie Foe Foo logic will recognize this and refuse to
*        fetch them back to the Giant room again.  Ylem is also used
*        in the fall-to-a-painful-death logic (label SPLATTER and
*        a couple of miscellaneous calls also) so that if you fall from
*        someplace and would end up lying dead at some location
*        that isn't really defined (the bottom of the chasm,
*        in the volcanic gorge, etc) the things you were carrying
*        get deposited in an inaccessable location.
*
         You are in Ylem.
         %You are in Ylem (circular file for objects).
OBJECT    GRATE
         {Grate}
         %The grate is locked.
         %The grate is open.
OBJECT    STEPS
         {Steps}
OBJECT    DOOR
         {Rusty door}
         %The way north is barred by a massive, rusty, iron door.
         %The way north leads through a massive, rusty, iron door.
OBJECT    SNAKE
         {Snake}
         %A huge green fierce snake bars the way!
         %>$< (chased away)
OBJECT    FISSURE
         {Fissure}
         %>$<
         %A crystalline bridge now spans the fissure.
         %The crystalline bridge has vanished!
OBJECT    TABLET
         {Stone tablet}
         %A massive stone tablet imbedded in the wall reads:
          "Congratulations on bringing light into the Dark room!"
OBJECT    MIRROR
         {Mirror}
         %>$<
OBJECT    PLANT
         {Plant}
         %There is a tiny little plant in the pit, murmuring "Water, water, ..."
         %The plant spurts into furious growth for a few seconds.
         %There is a 12-foot-tall beanstalk stretching up out of the pit,
          bellowing "WATER!! WATER!!"
         %The plant grows explosively, almost filling the bottom of the pit.
         %There is a gigantic beanstalk stretching all the way up to the hole.
         %You've over-watered the plant! It's shriveling up! It's, it's...
OBJECT    PLANT2
         {Phony plant (seen in Twopit room only when tall enough)}
         %>$< (not grown yet - invisible from above)
         %>$< (transition - growing)
         %The top of a 12-foot-tall beanstalk is poking out of the west pit.
         %>$< (growing still more)
         %There is a huge beanstalk growing out of the west pit up to the hole.
OBJECT    STALACTITE
         {Stalactite}
         %>$<
OBJECT   FOG
       {Fog in the fog-filled room (where else?)}
        %You are standing, badly befuddled, in a pale purple fog.
        %You are wandering around in the middle of a bright red fog.
        %You are lost in the midst of a thick, pea-green fog.
        %You are trying to find your way through a dense coal-black fog.
        %You are lost in the heart of a strange yellow fog.
        %You are standing, badly bedazzled, in a day-glow orange fog.
        %You are hunting your way through a shimmering magenta fog.
        %You are somewhere in the center of a weird, pearly pink fog.
OBJECT   GLOW
       {Glow of light in the midst of the fog}
*          N.B. - the directions listed here must be in the same as (and
*          in the same order as) the first 8 directions listed in the
*          VERBS file - it they aren't, incredible confusion (that is, more
*          incredible than what we're trying to create) will result.
         %A faint glow of light is visible through the fog to the east.
         %A glimmer of light is visible through the fog in the west.
         %A glow of light is visible through the fog to the north.
         %A faint shimmer of light is visible to the south.
         %A flickering light is visible through the fog in the northeast.
         %A dim light is visible in the southeast.
         %A dim glow of light is visible in the southwest.
         %A dim flickering light is visible through the fog in the northwest.
OBJECT    SHADOW
         {Shadowy figure}
         %The shadowy figure seems to be trying to attract your attention.
OBJECT   BLOB     {Rover, to all you "The Prisoner" fans}
        {The cave "bouncer"}
        %>$<                     0
        %>$<                     1
        %
         From somewhere in the distance comes an ominous bubbling sound.
 
        %
         The bubbling sound grows louder.
 
        %
         The bubbling sound ends with a loud >splash<.
 
        %
         A hollow, echoing >ROAR< sounds in the distance.
 
        %>$<                     6
        %
         A strange throbbing sound can be heard in the distance.
 
        %>$<                     8
        %
         The throbbing sound is growing louder.
 
        %>$<                     10
        %
         The source of the throbbing sound is approaching quickly.  Another
         hollow >ROAR< echoes through the cave.
 
        %>$<                     12
        %
         There is a loud >ROAR< only a short distance away!!
 
        %>$<                     14
        %
         Into view there bounces a horrible creature!!  Six feet across, it
         resembles a large blob of translucent white jelly;  although it looks
         massive, it is bouncing lightly up and down as though it were as light
         as a feather.  It is emitting a constant throbbing sound, and it
         >ROAR<s loudly as it sees you.
 
        %There is an immense and unfriendly-looking blob in the room with you!
        %
         The blob >ROAR<s triumphantly and bounces straight at you with amazing
         speed, crushing you to the ground and cutting off your air supply
         with its body.  You quickly suffocate.
OBJECT    DRAWING
         {Cave drawings}
         %>$<
OBJECT    PIRATE
         {Pirate}
         %>$<  He never stays to visit, but runs away.
OBJECT    DRAGON
         {Dragon}
         %A huge green fierce dragon bars the way!
          The dragon is sprawled out on a Persian rug!!
         %Congratulations! You have just vanquished a dragon with your bare
          hands!  (Unbelievable, isn't it?)
         %The body of a huge green dead dragon is lying off to one side.
        %The rotting carcass of a dead dragon is lying off to one side.
OBJECT    CHASM
         {Chasm}
         %A rickety wooden bridge extends across the chasm, vanishing into the
          mist.  A sign posted on the bridge reads, "STOP! Pay troll!"
         %The wreckage of a bridge (and a dead bear) can be seen at the bottom
          of the chasm.
        %The charred remains of a wooden bridge can be seen at the bottom
         of the chasm.
OBJECT   TROLL
         {Troll}
         %A burly troll stands by the bridge and insists you throw him a
          treasure before you may cross.
         %>$< (paid off, haven't crossed bridge yet)
         %>$< (paid off, crossed bridge - he'll be back!)
         %The troll steps out from beneath the bridge and blocks your way.
         %>$< (chased away)
         %From beneath the bridge there sounds a muffled bellow of frustrated
         avarice.  The troll stomps out, resumes his position by the end of
         the bridge, and glowers fiercely in your direction.  "Very funny,"
         you hear him mutter, "but not very smart - you'll pay for that!"
         %The troll nimbly steps to one side and grins nastily as the nest of
         golden eggs flies past him and plummets into the chasm.  "Fool me
         once, shame on you;  fool me twice, shame on me!" he sneers.  "I want
         something a touch more substantial this time!"
OBJECT    TROLL2
         {Phony troll}
         %The troll is nowhere to be seen.
OBJECT   OGRE
       {Ogre}
        %There is a large, nasty-looking ogre blocking your path!
OBJECT   BASILISK
        {Basilisk}
        %There is a basilisk lying in the corridor to the north, snoring
         quietly.
        %There is a basilisk lying in the corridor to the south.  It is
         asleep, but is twitching and grumbling as if restless.
        %There is a petrified basilisk in the corridor to the north.
        %There is a petrified basilisk in the corridor to the south.
OBJECT   GONG
        {Gong}
        %There is a large brass gong fastened to the wall here.
OBJECT   DJINN
       {Djinn}
        %There is a twelve-foot djinn standing in the center of the pentagram,
         glowering at you.
OBJECT   TURTLE
        {Turtle}
        %Darwin the tortoise is swimming in the reservoir nearby.
OBJECT    MESSAGE
         {Message in second maze}
         %There is a message scrawled in the dust in a flowery script, reading:
          "This is not the maze where the pirate leaves his treasure chest."
OBJECT    VOLCANO
         {Volcanic gorge}
        %>$<      Nothing happening yet
        %The earth begins to shudder violently, and smoke flows up from the
         gorge beneath your feet.  With a violent >GLOP!<, the volcano
         belches out an immense blast of molten lava which flies into the
         air above the gorge and suddenly solidifies into a fragile-looking arch
         of wheat-colored stone that bridges the gorge.
        %There is a wheat-colored stone bridge arching over the gorge.
        %The earth shudders violently, and steam blasts upwards from the geyser.
         The wheat-stone bridge cracks and splits, and the fragments fall into
         the gorge.
OBJECT   STATUE
        {Statue of minotaur}
        %>$<  Solid wall
        %Dark tunnels lead northeast, north, and northwest.
OBJECT   QUICKSAND
       {Quicksand - state 0 = soft, state 1 = hardened by rod.}
OBJECT   SLIME
       {Slime}
        %The passage to the south is swathed with sheets of evil-looking
         green slime, which twitches and flows as if aware of your presence.
OBJECT    MACHINE
         {Vending machine}
         %There is a massive vending machine here. The instructions on it read:
          "Drop coins here to receive fresh batteries."
OBJECT   SAFE
       {Safe}
        %A massive walk-in safe takes up one entire wall.  It is tightly
         closed, and has no handle, lock, nor keyhole.
        %A massive walk-in safe takes up one entire wall.  Its door has been
         swung open and blocks the exit passage.
        %A massive walk-in safe takes up one entire wall.  It is closed, and
         there are signs of melting around the edges of its door.
OBJECT   THRONE
         >$< Throne in audience hall
OBJECT   SKELETON
        {Skeleton}
        %Resting on the throne ("sitting" isn't really the right word) is an
         incredible skeleton.  It is fairly humanoid from the waist up (except
         for its incredible size and four extra arms);  below that, it resembles
         the body of a giant python, and is wrapped in and around the bars and
         rods of the throne.  Clutched in one bony hand is a long sceptre,
         ornately encrusted with sapphires!!
OBJECT    BEAR
         %There is a ferocious cave bear eying you from the far end of the room!
         %There is a gentle cave bear sitting placidly in one corner.
         %There is a contented-looking bear wandering about nearby.
OBJECT   BATTERIES
         [Worn-out/Fresh] batteries
         %There are fresh batteries here.
         %Some worn-out batteries have been discarded nearby.
OBJECT    CARPET
         {Carpet and/or moss}
         %>$<
OBJECT   DINGHY
       {Dingy}
        %Lying upon the beach are the shattered remains of what must once have
         been a dinghy.  The remains consist of little more than a few broken
         boards, upon one of which may be seen a crude sketch of a skull and two
         crossed thighbones (perhaps this dinghy was once owned by a cook?)
        %The shattered remains of a dinghy lie forlornly on the beach.
OBJECT   BAG
         Bag filled with pieces of eight
        %There is a bag (obviously filled with pieces of eight) in the dinghy!
        %There is a bag filled with pieces of eight lying off to one side!
OBJECT   CROWN
         Crown
        %There is a massive crown made of solid iridium floating in midair!
        %There is a massive iridium crown here!
OBJECT    GOLD
          Large gold nugget
         %There is a large sparkling nugget of gold here!
OBJECT    DIAMONDS
          Several diamonds
         %There are diamonds here!
OBJECT    SILVER
          Bars of silver
         %There are bars of silver here!
OBJECT    JEWELRY
          Precious jewelry
         %There is precious jewelry here!
OBJECT    COINS
          Rare coins
         %There are many coins here!
OBJECT    CHEST
          Treasure chest
        %The pirate's treasure chest is here, half-hidden behind a rock!
         %The pirate's treasure chest is here!
OBJECT    EGGS
          Golden eggs
         %There is a large nest here, full of golden eggs!
         %The nest of golden eggs has vanished!
         %Done!
OBJECT    TRIDENT
          Jeweled trident
         %There is a jewel-encrusted trident here!
OBJECT   HELMET
        Helmet
        %There is a gem-encrusted visorless helmet sitting on the floor!
OBJECT    VASE
          Ming vase
         %There is a delicate, precious, Ming vase here!
         %The vase is now resting, delicately, on a velvet pillow.
         %The Ming vase drops with a delicate crash.
OBJECT   POTTERY
         Worthless shards of pottery
         %The floor is covered with worthless shards of pottery.
OBJECT    EMERALD
          Egg-sized emerald
         %There is an emerald here the size of a plover's egg!
OBJECT   SCEPTRE
         Sapphire sceptre
        %>$<  Sceptre's 0-mode description is part of "SKELETON"
        %A sapphire-encrusted sceptre is lying on the ground!
OBJECT   YACHT
         Ruby-covered toy yacht
        %There is a small toy yacht sitting on the floor. It is totally
         covered with rubies, and has the words "Omar Khayyam" engraved
         on the side!!
        %The ruby yacht of Omar Khayyam is sitting on the floor!
OBJECT    PYRAMID
          Platinum pyramid
         %There is a platinum pyramid here, 8 inches on a side!
OBJECT    PEARL
          Glistening pearl
         %Off to one side lies a glistening pearl!
OBJECT    RUG
          Persian rug
         %There is a Persian rug spread out on the floor!
OBJECT    SPICES
          Rare spices
         %There are rare spices here!
OBJECT   BEADS
         Ancient Indian turquoise beads.
        %There is a string of ancient Indian turquoise beads draped casually
         over the edge of the balcony!
        %There is a string of ancient Indian turquoise beads here!
OBJECT    CHAIN
          Golden chain
         %There is a golden chain lying in a heap on the floor!
         %The bear is locked to the wall with a golden chain!
         %There is a golden chain locked to the wall!
OBJECT   RING
         Mithril ring
        %There is a shiny ring (crafted of the finest mithril) lying here!
OBJECT   SPYGLASS
         Scrimshaw spyglass
        %There is a small spyglass carved out of whale baleen sitting here!
OBJECT   SCULPTURE
         Rock-crystal sculpture
        %A finely-carved crystalline sculpture of a pig is resting in a niche
         melted out of the icy wall of the tunnel!
        %There is a fine crystalline sculpture of a pig here!
        %There is a fine crystalline sculpture of an eel here!
        %There is a fine crystalline sculpture of an emu here!
        %There is a fine crystalline sculpture of an elf here!
        %There is a fine crystalline sculpture of a mouse here!
        %There is a fine crystalline sculpture of a rabbit here!
        %There is a fine crystalline sculpture of an ibex here!
        %There is a fine crystalline sculpture of a frog here!
        %There is a fine crystalline sculpture of a tiger here!
        %There is a fine crystalline sculpture of a mule here!
        %There is a fine crystalline sculpture of a moose here!
        %There is a fine crystalline sculpture of a dog here!
        %There is a fine crystalline sculpture of a spider here!
        %There is a crude sculpture of a very bedraggled phoenix here!
OBJECT   BRACELET
         Jade bracelet
        %There is an ancient Chinese jade bracelet here!
OBJECT   CASKET
         Casket of opals
        %There is a casket full of rare black opals sitting on a shelf!
        %There is a casket full of rare black opals here!
OBJECT    KEYS
          Set of keys
         %There are some keys on the ground here.
OBJECT    LAMP
          Brass lantern
         %There is a shiny brass lamp nearby.
         %There is a lamp shining nearby.
OBJECT    CAGE
          Wicker cage
         %There is a small wicker cage discarded nearby.
         %There is a small wicker cage nearby.
OBJECT    BIRD
          Little bird in cage
         %A cheerful little bird is sitting here singing.
         %There is a little bird in the cage.
OBJECT    ROD
          Black rod
         %A three foot black rod with a rusty star on an end lies nearby.
OBJECT   PLATE
         Metal plate
        %A highly polished metal plate is leaning against the wall.
        %A polished metal plate lies nearby.
OBJECT    DYNAMITE
          Black rod
         %A three foot black rod with a rusty mark on an end lies nearby.
OBJECT    PILLOW
          Velvet pillow
         %A small velvet pillow lies on the floor.
OBJECT    CLAM
          Giant clam  >grunt!<
         %There is an enormous clam here with its shell tightly closed.
OBJECT    OYSTER
          Giant oyster  >groan!<
         %There is an enormous oyster here with its shell tightly closed.
         %Interesting. There seems to be something written on the underside of
          the oyster.
OBJECT    MAGAZINES
          "Spelunker Today"
         %There are a few recent issues of "Spelunker Today" magazine here.
OBJECT    KNIFE
OBJECT    FOOD
          Tasty food
         %There is food here.
OBJECT    BOTTLE
         [/!`]Small bottle
         %There is a bottle of water here.
         %There is an empty bottle here.
         %There is a bottle of oil here.
OBJECT   WATER
         !@ full of water
 
OBJECT   OIL
         !@ full of oil
 
OBJECT   FLASK
         Earthenware flask
        %There is a sealed earthenware flask sitting in the center of the
         pentagram.
        %There is a small, tightly-sealed earthenware flask on the ground here.
         It has the words, "London Dry" written on the side.
        %There is a small, empty earthenware flask here.
OBJECT    AXE
          Dwarf's axe
         %There is a little axe here.
         %There is a little axe lying beside the bear.
OBJECT   SWORD
         Singing sword
        %There is a sword here with its blade plunged deep into the block
         of stone.  The sword is singing quietly to itself.
        %There is a magic sword here, chiming out the bell-like tones of
         "Khumbu Ice-fall" by ringing its blade against the ground.
        %There is a sword here, singing "A Day in the Life" in a quiet,
         introspective voice.
        %There is a magic sword here, singing "Cold Blue Steel and Sweet
         Fire" to itself in a plaintive, hopeless voice.
        %There is a sharp and obviously magical sword here. It is
         quietly humming excerpts from Prokofiev's "Romeo and Juliet"
         ballet to itself.
        %There is a sword lying on the ground, jauntily whistling the
         March from Tchaikovsky's "Nutcracker Suite".
        %There is a sharp sword lying here. It is (somehow) singing
         Tchaikovsky's "1812 Overture" in twelve parts, by itself!
        %The stirring strains of Rossini's "William Tell" overture fill
         the room, coming from a singing sword lying on the ground.
        %There is a singing sword lying on the ground. From it resound the
         massed voices of a two-hundred-singer choir, filling the air with
         the stirring sound of the Hallelujah Chorus from Handel's "Messiah".
        %There is a sharp and shiny sword here. It is somehow managing to
         sing Harry Partch's "Daphne of the Dunes" without destroying its
         singing organs (whatever they happen to be...)
        %There is a sword here, singing "Witchi-Tai-To" in two-part harmony
         with itself.
        %There is a very strange singing sword here - it is glowing and
         vibrating, and the eerie electronic notes of Charles Wuorinen's
         "Time's Encomium" issue from its blade and fill the air.
OBJECT   TEETH
         Several dragon's teeth
        %There are several dragon's teeth scattered haphazardly about.
        %There are several dragon's teeth in a pile on the floor.
OBJECT   VIAL
         Vial of oily liquid
        %On the ground lies a small glass vial filled with an oily liquid.
        %The dwarf catches a lungful of the cloud, gags audibly and stumbles
         out of the room retching, sneezing, and cursing up a storm.
        %The dwarves blanche in horror and dash away as fast as their brief
         and misshapen legs can carry them.
        %The troll calmly waves the vapor away.
        %The bear inhales some of the vapor and snarls angrily.
        %The bear inhales some of the vapor and moans appreciatively.
        %The snake completely ignores the vapor.
        %The bird breathes in a miniscule amount of the vapor and immediately
         sings a twenty-second segment of Morton Subotnik's "Sidewinder".
        %The slime filling the passage to the south blackens and shrivels
         away into nothingness.
        %The dragon sniffs the air, rumbles deep in his chest, and shoots out
         a small puff of flame that ignites and incinerates the vapor.
        %The djinn takes a deep sniff of the vapor and comments, "AH!  A TRUELY
         FINE ARABIAN PERFUME!  I HAVEN'T SMELLED ANYTHING LIKE THAT FOR YEARS!"
        %The basilisk doesn't wake up.
        %The gooseberry goblins sniff the vapor, screech in terror, and dash off
         into the distance.
OBJECT   MUSHROOM
         Mushroom
        %There is a small mushroom growing on the wall.
        %There is a small mushroom lying on the floor.
        %As you swallow the mushroom your mouth becomes numb, and everything
         seems to swirl around you.  The effect quickly passes, and you find
         that your muscles have bulged unbelievably.
        %
         A strange malaise suddenly afflicts you.  You shiver with chill,
         and your muscles seem to turn to putty;  everything around you becomes
         grey and unreal.  The fit quickly passes, and you find that your body
         has degenerated back to what it was like before you ate the mushroom.
 
OBJECT   GOBLINS
       {Gooseberry goblins}
        %
         Suddenly and without warning, there appears from within the very
         cave walls around you a horde of vicious little goblins!  Each one
         stands about eight inches high on a pair of spindly black legs, has
         a globular, spine-covered body resembling a giant gooseberry, a
         wide mouth filled with sharp teeth, and a pair of glittering little
         green eyes!  They swarm around you and try to block your way.
 
        %You are surrounded by a horde of silent little gooseberry goblins!
        %
         One of the gooseberry goblins begins to giggle in a high-pitched
         voice.  Another takes up the giggling, then another....  soon all
         of them are giggling insanely and jumping up and down with glee!
 
        %You are surrounded by a giggling horde of little gooseberry goblins!
        %
         The goblins are jumping up and down frantically, and are working
         themselves into a real slavering frenzy!!
 
        %You are surrounded by a slavering horde of gooseberry goblins!
        %
         With a shrill cry, the gooseberry goblins hurl themselves upon you,
         tickling you mercilessly.  You crush and hurl away several of them,
         but are soon borne down to the ground by the endless attack.  The
         goblins then gleefully rip out your throat, and you sink into
         unconsciousness.
OBJECT   DWARF
        *Dwarf (you can't pick him up)
        %There is a nonexistant dwarf in the room with you!  (oops)
        %
         There is a threatening little dwarf in the room with you!
        %
         There are two bloodthirsty little dwarves in the room with you!
        %
         There are three nasty little dwarves in the room with you!
        %
         There are four hostile little dwarves in the room with you!
        %
         There are five threatening little dwarves in the room with you!
        %
         There are six bloodthirsty little dwarves in the room with you!
        %
         There are seven nasty, hostile little dwarves in the room with you!
        %
         There are eight angry little dwarves in the room with you!
        %
         There are nine hostile and nasty little dwarves in the room with you!
        %
         There are ten very angry little dwarves in the room with you!
SYNON     KEYS,KEY,SET
SYNON     LAMP,HEADLAMP,LANTERN
SYNON     PILLOW,VELVET
SYNON     MAGAZINES,ISSUES,SPELUNKER,"SPELUNKER"
SYNON     DWARF,DWARVES
SYNON     KNIFE,KNIVES
SYNON     FOOD,RATIONS
SYNON     BOTTLE,JAR
SYNON     WATER,H2O
SYNON     PLANT,BEANSTALK
SYNON     SHADOW,FIGURE
SYNON     VOLCANO,GEYSER,GORGE
SYNON     MACHINE,VENDING
SYNON     CARPET,MOSS,CURTAINS
SYNON     GOLD,NUGGET
SYNON     SILVER,BARS
SYNON     CHEST,BOX,TREASURE
SYNON     EGGS,EGG,NEST
SYNON     VASE,MING
SYNON    POTTERY,SHARDS
SYNON     PYRAMID,PLATINUM
SYNON     RUG,PERSIAN
SYNON     CAGE,WICKER
SYNON    JEWELRY,JEWELS
SYNON    CASKET,OPALS
SYNON    BRACELET,JADE
SYNON    SCULPTURE,CRYSTAL
SYNON    RING,MITHRIL
SYNON    SPYGLASS,SCRIMSHAW
SYNON    BAG,PIECES,EIGHT
SYNON    VIAL,PHIAL
SYNON    STATUE,MINOTAUR
SYNON    YACHT,RUBY,RUBAIYAT
SYNON    DJINN,DJANN,GENIE
SYNON    TURTLE,TORTOISE,DARWIN
SYNON    BEADS,INDIAN,STRING,TURQUOISE
VERB      SAY,CHANT,SING,UTTER,MUMBLE
VERB      SAVE,SUSPEND,PAUSE
VERB     RESTORE
VERB      UPSTREAM
VERB      DOWNSTREAM
VERB      FORWARD,CONTINUE,ONWARD
VERB      BACK,RETURN,RETREAT
VERB      OUT,OUTSIDE,EXIT,LEAVE
VERB      ENTRANCE
VERB      GULLY
VERB      STREAM
VERB      ROCK,ROCKS
VERB      BED,STREAMBED
VERB      CRAWL,CRAWLS
VERB      IN,INWARD,INSIDE,ENTER
VERB      SURFACE
VERB      NULL,NOWHERE
VERB      PASSAGE,TUNNEL
VERB      VIEW
VERB      HOLE
VERB      STAIRS
VERB      UP,UPWARD,U,ABOVE,ASCEND
VERB      DOWN,D,DOWNWARDS,DESCEND
VERB      OUTDOORS
VERB      CRACK
VERB      DOME
VERB      LEFT
VERB      RIGHT
VERB      HALL
VERB      JUMP
VERB      CROSS,ACROSS,OVER
VERB      EAST,E
VERB      WEST,W
VERB      NORTH,N
VERB      SOUTH,S
VERB      NORTHEAST,NE
VERB      SOUTHEAST,SE
VERB      SOUTHWEST,SW
VERB      NORTHWEST,NW
VERB      SECRET
VERB      CLIMB
VERB      LOOK,EXAMINE,TOUCH,DESCRIBE
VERB      GET,CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,TOTE
VERB      DROP,RELEASE,FREE,DISCARD,DUMP
VERB      OPEN,UNLOCK
VERB      CLOSE,LOCK
VERB      ON,LIGHT
VERB      OFF,EXTINGUISH
VERB      WAVE,SHAKE,SWING
VERB      PLACATE,CALM,TAME
VERB      WALK,RUN,TRAVEL,GO,PROCEED,EXPLORE,GOTO,FOLLOW,TURN
VERB      KILL,ATTACK,FIGHT,HIT,STRIKE,SLAY
VERB      POUR
VERB      EAT,DEVOUR
VERB      DRINK
VERB      RUB
VERB      THROW,TOSS
VERB      QUIT,STOP,Q
VERB      FIND,WHERE
VERB     INVENTORY,INV,INVENT
VERB      FEED
VERB      FILL
VERB      SCORE
VERB      BRIEF
VERB      READ,PERUSE
VERB      BREAK,SHATTER,SMASH
VERB      RIDE
VERB      HOURS
VERB      FUM
VERB      SESAME,OPENSESAME,ABRA,ABRACADABRA,SHAZAM,HOCUS,POCUS,CADABRA
VERB      HELP,?
VERB      TREE,TREES
VERB      DIG,EXCAVATE
VERB      LOST
VERB      MIST
VERB      INFO,INFORMATION
VERB      SWIM
VERB      LPSD
VERB     FAST
VERB     FULL
VERB     NEWS
VERB     CAVE
VERB     FIX,REPAIR
VERB     WIZARD
*
*        N.B. - the following magic words (ZORTON through BLERBI) *must*
*        be defined in reverse alphabetical order!  If new magic words
*        are added, place them in the proper sequence and modify the
*        code in the "AT CYLINDRICAL" area!  If you don't do this right,
*        people are going to have a hell of a time getting out of the
*        cylindrical room during cave-closure.
*
VERB     ZORTON
VERB     XYZZY
VERB     THURB
VERB     SNOEZE
VERB     SAMOHT
VERB     PLUGH
VERB     PHUGGG
VERB     NOSIDE
VERB     MELENKURION
VERB     KNERL
VERB     KLAETU
VERB     FOO
VERB     FOE
VERB     FIE
VERB     FEE
VERB     BLERBI
*
*        End of reverse-alphabetical-order section.
*
VERB     CURIOUS
VERB     GREEN
VERB     IDEAS
VERB     SLEPT
VERB     FURIOUSLY
VERB     RUNOUT
*        The first three entries in the text section must be the null
*        string, a blank line, and the "Ok." respose - they also
*        exist in the run-time program, for speed's sake.
TEXT     SOK!
TEXT     BLANK
 
TEXT     OK!
         Ok.
TEXT     LOGON
         Welcome to CP-6 Adventure!!   Say "NEWS" to get up-to-date
         game details as of 9/18/84.
 
TEXT     NEWSDATA
         9/18/84 - A set of maps which describe Colossal Cave may be ordered
         from the following address:
 
        /         David Platt
        /         c/o Honeywell Information Systems
        /         5250 West Century Boulevard
        /         Los Angeles, CA  90045
 
         There is no charge for the maps;  however, each request MUST include
         a large (legal-sized or better) self-addressed envelope with at least
         two first-class stamps.  Requests received without envelopes, or with
         insufficient return postage, will be tossed into a bottomless pit and
         never heard from again.
 
         The set of maps consists of a two-page map of the main cave, plus
         detail maps of the mazes, tunnels, and other complex areas.
         The locations of various treasures and tools are given in the main
         map... however, the maps do not reveal ways past the cave's obstacles.
 
         1/19/82 - Based on many requests, the SAVE/RESTORE logic has been
         modified in a way that makes exploration of dangerous sections of the
         cave rather easier.  Three changes are effective:  (1) you need not
         wait 30 minutes after SAVE'ing a game to RESTORE it;  (2) when you
         have SAVE'd a game, you will have the chance to continue with your
         exploration immediately;  (3) when you RESTORE a game, you will have
         the option to keep the saved game on disk, and can thus RESTORE it
         an unlimited number of times.
 
         A minor bug in the pirate logic has been fixed.
 
         10/18/79 - Several problems have been fixed in this version of
         Adventure.  Both the new run unit and the new database file should
         be installed at the same time.  (1)  The interpreter trap during
         "RESTORE" operations has been fixed.  (2)  The 'vanishing fog' problem
         has been corrected.  (3)  If you pour water or oil on the ground, the
         ground will remain wet (although you can't get the water or oil back
         by mopping up the floor or any such thing).  (4)  Games saved under
         previous versions of the database cannot be restored using this
         version due to some slight changes in the object status controls.
 
         Suggestions are being entertained for possible additions to the
         cave.  If you have any interesting ideas, please write them down
         and mail them to Dave Platt, c/o Honeywell, 5250 W. Century Blvd,
         Los Angeles CA 90254, or give me a call at (213)216-6232.
 
TEXT     INTRO
         Somewhere nearby is Colossal Cave, where others have found fortunes in
         treasure and gold, though it is rumored that some who enter are never
         seen again.  Magic is said to work in the cave.  I will be your eyes
         and hands.  Direct me with commands of 1 or 2 words.
 
         Should you get stuck, type "HELP" for some general hints.  For infor-
         mation on how to end your adventure, etc., type "INFO".
 
         /                              - - -
 
 
TEXT     DWARFBLOCK
         A little dwarf with a big knife blocks your way.
TEXT     FIRSTDWARF
 
         A little dwarf just walked around a corner, saw you, threw a little
         axe at you which missed, cursed, and ran away.
TEXT     KNIVESTHROWN
 
         [One/#] nasty sharp kni[fe is/ves are] thrown at you!
TEXT     KNIVESMISS
         [It misses/They miss] you!
TEXT     KNIVESGOTYOU
         [It/One of them] gets you!
TEXT     FIRST.DEFLECTOR
         Your magic ring shoots out a bolt of lightning that splinters the
         [knife/knives] into dust before [it/they] can reach you!
TEXT
         A glowing disk of black fire jumps out of your magic ring and swallows
         the hurtling [knife/knives] before [it/they] can harm you!
TEXT
         [A/Several] ball[/s] of searing flame [leaps/burst] out of your magic ring, [bounces/rebound]
         off of the ground, and [melts/vaporize] the kni[fe/ves] before [it/they] can reach you!
TEXT     LAST.DEFLECTOR
         Your magic ring emits a blast of some strange magical energy that
         knocks the kni[fe/ves] aside!
TEXT     SAYSPLUGH
         A hollow voice says "Plugh".
TEXT     NOCANGO
         I'm sorry, but there's no way you can go # from here.
TEXT
         There is no way for you to go #.
TEXT
         You cannot go #.
TEXT     OGNACON
         Going # is not possible from here.  Sorry.
TEXT     OOF!
         You have run into a wall of rock and can go no further in this
         direction.
TEXT     IAMUNSURE
         I am unsure how you are facing.  Use compass points or nearby objects.
TEXT     INFROMOUT
         I don't know in from out here.  Use compass points or name something
         in the general direction you want to go.
TEXT     CANTAPPLY
         I don't know how to apply that word here.
TEXT     HUH??
         I don't understand that!
TEXT     IAMGAME
         I'm game.  Would you care to explain how?
TEXT     NOCANLOOK
         Sorry, but I am not allowed to give more detail.  I will repeat the
         long description of your location.
TEXT     ITISNOWDARK
         It is now pitch dark.  If you proceed you will likely fall into a pit.
TEXT     WMEANSWEST
         If you prefer, simply type W rather than WEST.
TEXT     BIRDHINT?
         Are you trying to catch the bird?
TEXT
         The bird is frightened right now and you cannot catch it no matter
         what you try.  Perhaps you might try later.
TEXT     GETPASTSNAKE
         Are you trying to somehow deal with the snake?
TEXT
         You can't kill the snake, or drive it away, or avoid it, or anything
         like that.  There is a way to get by, but you don't have the necessary
         resources right now.
TEXT     WANTTOQUIT
         Do you really want to quit now?
TEXT     CRUNCH
         You fell into a pit and broke every bone in your body!
TEXT     YOUHAVEIT
         You are already carrying it!
TEXT     BESERIOUS
         You can't be serious!
TEXT     BIRDISSCARED
         The bird was unafraid when you entered, but as you approach it becomes
         disturbed and you cannot catch it.
TEXT     NEEDCAGE
         You might be able to catch the bird, but you could not carry it.
TEXT     NOTCARRYING
         You aren't carrying it!
TEXT     IDONTSEE
         I see no # here.
TEXT     BIRD..SNAKE
         The little bird attacks the green snake, and in an astounding flurry
         drives the snake away.
TEXT     NEEDKEYS
         You have no keys!
TEXT     NOLOCK
         It has no lock.
TEXT     CANTLOCKIT
         I don't know how to lock or unlock such a thing.
TEXT     ITWASLOCKED
         It was already locked.
TEXT     GRATELOCKED
         The grate is now locked.
TEXT     GRATEUNLOCKED
         The grate is now unlocked.
TEXT     GRATE.STUCK
         The lock seems to be stuck - the key refuses to turn!
TEXT     WASUNLOCKED
         It was already unlocked.
TEXT     NOLIGHTHERE
         You have no source of light.
TEXT     LAMPNOWON
         Your lamp is now on.
TEXT     LAMPNOWOFF
         Your lamp is now off.
TEXT     LAMPWASON
         Your lamp was already on!
TEXT     LAMPWASOFF
         Your lamp was not lit!
TEXT     BEAR..CHAIN
         There is no way to get past the bear to unlock the chain, which is
         probably just as well.
TEXT     NOTHING
         Nothing happens.
TEXT     WHERE?
         Where?
TEXT     PACIFIST
         There is nothing here to attack.
TEXT     BIRDISDEAD
         The little bird is now dead.  Its body disappears.
TEXT     CANTKILLSNAKE
         Attacking the snake both doesn't work and is very dangerous.
TEXT     KILLEDDWARF
         You killed a little dwarf.
TEXT     DWARFDODGES
         You attack a little dwarf, but he dodges out of the way.
TEXT     DWARFSTABS
         You attack a little dwarf, but he dodges out of the way and stabs
         you with his nasty sharp knife!
TEXT     WITHWHAT?
         With your bare hands??
TEXT     MAGICKWORD
         Good try, but that is an old worn-out magic word.
TEXT     HELPDATA
 
         I know of places, actions, and things.  Most of my vocabulary
         describes places and is used to move you there.  To move, try words
         like FOREST, BUILDING, DOWNSTREAM, ENTER, EAST, WEST, NORTH, SOUTH,
         UP, or DOWN.  I know about a few special objects, like a black rod
         hidden in the cave.  These objects can be manipulated using some of
         the action words that I know.  Usually you will need to give both the
         object and action words (in either order), but sometimes I can infer
         the object from the verb alone.  Some objects also imply verbs; in
         particular, "INVENTORY" implies "TAKE INVENTORY", which causes me to
         give you a list of the things you're carrying (you can say just
         "INV" instead of "INVENTORY" if you wish).  The objects have side
         effects; for instance, the rod scares the bird.  Usually people having
         trouble moving just need to try a few more words.  Usually people
         trying unsuccessfully to manipulate an object are attempting something
         beyond their (or my!) capabilities and should try a completely
         different tack.  To speed the game you can sometimes move long
         distances with a single word.  For example, "BUILDING" usually gets
         you to the building from anywhere above ground except when lost in the
         forest.  Also, note that cave passages turn a lot, and that leaving a
         room to the north does not guarantee entering the next from the south.
         Good luck!
 
TEXT     CANT.HELP.YOU
         Well, you do seem to be having problems, don't you?  Unfortunately,
         I'm not allowed to help you out;  you got yourself into this, and
         you'll have to find a solution to your problems yourself.
TEXT     NO.MORE.HELP
         I'm afraid that I can't tell you anything more that would be useful;
         you'll have to figure out what to do on your own.
TEXT     UNLOCKKEYS
         You can't unlock the keys.
TEXT     YOUDIDNTMOVE
         You have crawled around in some little holes and wound up back in the
         main passage.
TEXT     WHEREISCAVE
         I don't know where the cave is, but hereabouts no stream can run on
         the surface for long.  I would try the stream.
TEXT     NEEDDETAIL
         I need more detailed instructions to do that.
TEXT     CANTFIND
         I can only tell you what you see as you move about and manipulate
         things.  I cannot tell you where remote things or places are.
TEXT     NOCOMPRENDE
         I don't know the word "#".
TEXT     WHAT?
         Huh??
TEXT     LOOKINGCAVE
         Are you trying to get into the cave?
TEXT     GRATENEEDSKEYS
         The grate is very solid and has a hardened steel lock.  You cannot
         enter without a key, and there are no keys nearby.  I would recommend
         looking elsewhere for the keys.
TEXT     INFOREST
         The trees of the forest are large hardwood oak and maple, with an
         occasional grove of pine or spruce.  There is quite a bit of under-
         growth, largely birch and ash saplings plus nondescript bushes of
         various sorts.  This time of year visibility is quite restricted by
         all the leaves, but travel is quite easy if you detour around the
         spruce and berry bushes.
TEXT     HITHERE
         Would you like instructions?
TEXT     NEEDSHOVEL
         Digging without a shovel is quite impractical.  Even with a shovel
         progress is unlikely.
TEXT     NEEDDYNAMITE
         Blasting requires dynamite.
TEXT     IMCONFUSED
         I'm as confused as you are.
TEXT     THISISMIST
         Mist is a white vapor, usually water, seen from time to time in
         caverns.  It can be found anywhere but is frequently a sign of a deep
         pit leading down to water.
TEXT     FEETAREWET
         Your feet are now wet.
TEXT     BLEAH
         Yeetttch!  I think I just lost my appetite.
TEXT     URRP
         Thank you, it was delicious!
TEXT     SLURP
         You have taken a drink from the stream.  The water tastes strongly of
         minerals, but is not unpleasant.  It is extremely cold.
TEXT     SALT.H20.BAD
         I'm afraid that all that's available here is salt water, which
         isn't good for anything much... you'de better try elsewhere.
TEXT     WATERGONE
         The bottle of water is now empty.
TEXT     RUBLAMP
         Rubbing the electric # is not particularly rewarding.  Anyway,
         nothing exciting happens.
TEXT     PECULIAR
         Peculiar.  Nothing unexpected happens.
TEXT     REPULSIVE
         That's a repulsive idea!
TEXT     POURWATER
         Your bottle is empty and the ground is wet.
TEXT     GROUND.IS.DAMP
         The ground here is damp.
TEXT     CANTPOUR
         You can't pour that.
TEXT     WATCHIT
         Watch it!
TEXT     WHICHWAY
         Which way should I #?
TEXT     YOUAREDEAD
         Oh dear, you seem to have gotten yourself killed.  I might be able to
         help you out, but I've never really done this before.  Do you want me
         to try to reincarnate you?
TEXT
         All right.  But don't blame me if something goes wr......
        /                     -- poof!! --
         You are engulfed in a cloud of orange smoke.  Coughing and gasping,
         you emerge from the smoke and find....
TEXT
         Tsk, tsk - you did it again!  Remember - you're only human, and you
         don't have as many lives as a cat!  (at least, I don't think so...)
         That's twice you've ended up dead - want to try for three?
TEXT
         As you wish.  Hang on for just a second while I fire up my thurible...
         >foof!<    An immense cloud of orange smoke fills the air.  As it
         clears, you find that once again....
TEXT
         You clumsy oaf, you've done it again!  I don't know how long I can
         keep this up.  Do you want me to try reincarnating you again?
TEXT
         Okay, now where did I put my orange smoke?....  >poof!<
         Everything disappears in a dense cloud of orange smoke.
TEXT
         Now you've really done it!  I'm out of orange smoke!  You don't expect
         me to do a decent reincarnation without any orange smoke, do you?
TEXT
         Yes....  well, that's the kind of blinkered, Philistine pig-ignorance
         that I've come to expect from you mortals.  You sit there on your
         loathsome, spotty behind, squeezing blackheads and not caring a
         thinker's damn about the struggling cave-sprite, you simpering,
         whining, mouldy-faced heap of parrot droppings!  If you're so
         smart, then you can just reincarnate yourself, because quite
         frankly I'm as mad as hell and I'm not going to take this
         anymore - I'm leaving!!!!
 
TEXT     SNIDELEY
TEXT     CANTGOBACK
         Sorry, but I no longer seem to remember how it was you got here.
TEXT     ARMSAREFULL
         You can't carry anything more.  You'll have to drop something first.
TEXT     CANTPASSLOCK
         You can't go through a locked steel grate!
TEXT     ITISHERENOW
         I believe what you want is right here with you.
TEXT     DONTFITSLIT
         You don't fit through a two-inch slit!
TEXT     TRYTHEBRIDGE
         I respectfully suggest you go across the bridge instead of jumping.
TEXT     NOWAYACROSS
         There is no way across the fissure.
TEXT     ARMSAREEMPTY
         You're not carrying anything.
TEXT     YOUNOWHAVE
         You are currently holding the following:
TEXT     BIRDSEED
         It's not hungry (it's merely pinin' for the fjords).  Besides, you
         have no bird seed.
TEXT     SNAKE..BIRD
         The snake has now devoured your bird.
TEXT     SNAKEWONTEAT
         There's nothing here it wants to eat (except perhaps you).
TEXT     FED..DWARF
         You fool, dwarves eat only coal!  Now you've made him *really* mad!!
TEXT     NOWAYTOCARRY
         You have nothing in which to carry it.
TEXT     BOTTLEWASFULL
         Your bottle is already full.
TEXT     NOTHING2FILL
         There is nothing here with which to fill the bottle.
TEXT     BOTTLE..H20
         Your bottle is now full of water.
TEXT     BOTTLE..OIL
         Your bottle is now full of oil.
TEXT     CANTFILLTHAT
         You can't fill that.
TEXT     HAH!
         Don't be ridiculous!
TEXT     DOORNEEDSOIL
         The door is extremely rusty and refuses to open.
TEXT     OIL..PLANT
         The plant indignantly shakes the oil off its leaves and asks, "Water?"
TEXT     HINGES..RUST
         The hinges are quite thoroughly rusted now and won't budge.
TEXT     OIL..DOOR
         The oil has freed up the hinges so that the door will now move,
         although it requires some effort.
TEXT     GET..PLANT
         The plant has exceptionally deep roots and cannot be pulled free.
TEXT     NO..KNIVES
         The dwarves' knives vanish as they strike the walls of the cave.
TEXT     WONT..FIT
         Something you're carrying won't fit through the tunnel with you.
         You'd best take inventory and drop something.
TEXT     CLAM.2.BIG
         You can't fit this five-foot clam through that little passage!
TEXT     OYSTER.2.BIG
         You can't fit this five-foot oyster through that little passage!
TEXT     DROP.THE.CLAM
         I advise you to put down the clam before opening it.  >strain!<
TEXT     DROP.THE.OYSTER
         I advise you to put down the oyster before opening it.  >wrench!<
TEXT     NEED.TRIDENT
         You don't have anything strong enough to open the clam.
TEXT     NEED.TRIDNT2
         You don't have anything strong enough to open the oyster.
TEXT     CLAM..OPENED
         A glistening pearl falls out of the clam and rolls away.  Goodness,
         this must really be an oyster.  (I never was very good at identifying
         bivalves.)  Whatever it is, it has now snapped shut again.
TEXT     OYSTER..OPENED
         The oyster creaks open, revealing nothing but oyster inside.  It
         promptly snaps shut again.
TEXT     CRAWL..CAVEIN
         You have crawled around in some little holes and found your way
         blocked by a recent cave-in.  You are now back in the main passage.
TEXT     RUSTLING
         There are faint rustling noises from the darkness behind you.
TEXT     PIRATE..ZOTZ
 
         Out from the shadows behind you pounces a bearded pirate!  "Har, har,"
         he chortles, "I'll just take all this booty and hide it away with me
         chest deep in the maze!"  He snatches your treasure and vanishes into
         the gloom.
TEXT     PIRATE.ZOT.2
 
         Out from the darkness behind you leaps the pirate!  "Har, har," he
         chortles nastily, "I see you've found some more treasure for me!
         Thanks, me hearty, you're doing just fine!"  With that, he snatches
         your treasure and slips away into the gloom, chuckling with glee.
TEXT     CLOSING.NOW
 
         A sepulchral voice reverberating through the cave, says, "Cave closing
         soon.  All adventurers please report to the treasure room via the
         alternate entrance to claim your treasure."
 
TEXT     GRATE.CLOSED
 
         A mysterious recorded voice groans into life and announces:
         /   "This exit is closed.  Please report to the treasure room via
         /   the alternate entrance to claim your treasure."
 
TEXT     DEAD&CLOSED
 
         It looks as though you're dead.  Well, seeing as how it's so close to
         closing time anyway, I think we'll just call it a day.
TEXT     GO.REPOSIT
 
         The sepulchral voice entones, "The cave is now closed."  As the echoes
         fade, there is a blinding flash of light (and a small puff of orange
         smoke). . . .    As your eyes refocus, you look around and find...
 
TEXT     LEAVE.BIRD
         Oh, leave the poor unhappy bird alone.
TEXT     HERESOMEWHERE
         I daresay whatever you want is around here somewhere.
TEXT     NO.CAN.GO
         I don't know how to get there from here.
TEXT     YOU.ARE.THERE
         That's where you are now!
TEXT     I.C.A.BEAR
         You are being followed by a very large, tame bear.
TEXT     INFO.2
 
         If you want to end your adventure early, say "QUIT".
         To suspend your adventure such that you can continue later, say
         "SUSPEND" (or "PAUSE" or "SAVE").  To re-start your game at a later
         time, start up a new adventure and after I say "You are standing...",
         you must say "RESTORE".  You can also name your game by saying
         "SUSPEND mine" (and "RESTORE mine") where "mine" is the name that
         you wish your suspended name to be known by (1-12 characters).
         To see what hours the cave is normally open, say "HOURS".
         To see how well you're doing, say "SCORE".  To get full credit for a
         treasure, you must have left it safely in the building, though you get
         partial credit just for locating it.  You lose points for getting
         killed, or for quitting, though the former costs you more.  There are
         also points based on how much (if any) of the cave you've managed to
         explore; in particular, there is a large bonus just for getting in (to
         distinguish the beginners from the rest of the pack), and there are
         other ways to determine whether you've been through some of the more
         harrowing sections.  If you think you've found all the treasures, just
         keep exploring for a while.  If nothing interesting happens, you
         haven't found them all yet.  If something interesting *does* happen,
         it means you're getting a bonus and have an opportunity to garner many
         more points in the master's section.  I may occasionally offer hints
         if you seem to be having trouble.  If I do, I'll warn you in advance
         how much it will affect your score.  To save paper, you may specify
         "BRIEF", which tells me never to repeat the full description of a
         place unless you explicitly ask me to by saying "LOOK".  If you
         are an experienced adventurer, you may wish to specify "FAST", which
         is like "BRIEF" but more so;  in "FAST" mode I will *never* under
         any circumstances give the full description of a place.  Finally, if
         you are in "BRIEF" or "FAST" modes, you may return to the normal mode
         of operation by saying "FULL".
 
TEXT     QUIT.NOW?
         Do you indeed wish to quit now?
TEXT     NOTHING.VASE
         There is nothing here with which to fill the vase.
TEXT     SHATTER.VASE
         The sudden change in temperature has delicately shattered the vase.
TEXT     NO.CAN.FIX
         It is beyond your power to do that.
TEXT     DUNNO.HOW
         I don't know how.
TEXT     TOO.FAR.UP
         It is too far up for you to reach.
TEXT     DWARF.POOF
         You killed a little dwarf.  The body vanishes in a cloud of greasy
         black smoke.
TEXT     DWARF.QUIP
         You have mortally injured a little dwarf with your #.  The dwarf
         staggers, slumps to the ground, gasps "Epo'u mfu uifn vtf fncbmnjoh
         gmvje.  J xbou up cf tuvggfe xjui dsbc nfbu!" and then expires in
         a puff of oily black smoke.
TEXT     KILL.OYSTER
         The shell is very strong and is impervious to attack.
TEXT     START.OVER
         What's the matter, can't you read?  Now you'd best start over.
TEXT     KILL.DRAGON
         The # bounces harmlessly off the dragon's thick scales.
TEXT     PAST.DRAGON
         The dragon looks rather nasty.  You'd best not try to get by.
TEXT     BIRD..DRAGON
         The little bird attacks the green dragon, and in an astounding flurry
         gets burnt to a cinder.  The ashes blow away.
TEXT     BIRD..TROLL
         The little bird attacks the troll, who blithly ignores it.  The bird
         soon becomes discouraged, flies back to land at your feet, and begins
         singing to itself.
TEXT     BIRD..OGRE
         The little bird attacks the ogre, and in an astounding flurry gets
         caught and crushed.  The mangled remains vanish into thin air.
TEXT     BIRD..BEAR
         The little bird attacks the ferocious cave bear, and in an astounding
         flurry gets ripped to shreds.  The bloody remains disappear.
TEXT     BIRD..CALMBEAR
         The little bird flies over to the bear, circles curiously around
         its head several times, and then flies back to land at your feet
         and begins singing.
TEXT     BIRD..BASILISK
         The little bird attacks the basilisk, and in an astounding flurry
         succeeds in awakening it.  The basilisk glares at the bird, causing
         the bird to explode into a cloud of fine sand, and then turns and
         stares balefully at you, turning you into a pillar of fine marble
         suitable for decorative lawn or garden use.
TEXT     BIRD..DWARF
         The little bird attacks the dwar[f/ves], and in an astounding flurry
         gets cut to shreds by [his/their] nasty sharp kni[fe/ves]!  The tattered
         remains fade from sight.
TEXT     ON.WHAT?
         On what?
TEXT     BRIEF.OK
         Okay, from now on I'll only describe a place in full the first time
         you come to it.  To get the full description, say "LOOK".
TEXT     TROLL.DATA
         Trolls are close relatives with the rocks and have skin as tough as
         that of a rhinoceros.  The troll fends off your blows effortlessly.
TEXT     EL.CHEAPO
         The troll deftly catches the #, examines it carefully, and tosses it
         back, declaring, "Good workmanship, but it's not valuable enough."
TEXT     BOUGHTHIMOFF
         The troll catches the # and scurries away out of sight.
TEXT     TROLL.SEZ.NO
         The troll refuses to let you cross.
TEXT     NO.BRIDGE
         There is no longer any way across the chasm.
TEXT     BEAR..BRIDGE
         Just as you reach the other side, the bridge buckles beneath the
         weight of the bear, which was still following you around.  You
         scrabble desperately for support, but as the bridge collapses you
         stumble back and fall into the chasm.
TEXT     BEAR..TROLL
         The bear lumbers toward the troll, who lets out a startled shriek and
         scurries away.  The bear soon gives up the pursuit and wanders back.
TEXT     AXE..BEAR
         The axe misses and lands near the bear where you can't get at it.
TEXT     KILL..BEAR
         With what?  Your bare hands??  Against *his* bear hands???  Don't be
         ridiculous - he'd tear you to shreds!
TEXT     BEAR.PUZZLED
         The bear is confused; he only wants to be your friend.
TEXT     IT.IS.DEAD
         For crying out loud, the poor thing is already dead!
TEXT     BEAR..URRP
         The bear eagerly wolfs down your food, after which he seems to calm
         down considerably and even becomes rather friendly.
TEXT     BEAR.IS.CHAINED
         The bear is still chained to the wall.
TEXT     CHAIN.LOCKED
         The chain is still locked.
TEXT     CHAIN.UNLOCKED
         The chain is now unlocked.
TEXT     LOCK..CHAIN
         The chain is now locked.
TEXT     LOCK..CHAIN?
         There is nothing here to which the chain can be locked.
TEXT     NO.FOOD
         There is nothing here to eat.
TEXT     ILL.GIVE.HINT
         I can give you some advice that might help you solve your problem,
         but I'll have to charge you # points for it.  TANSTAAFL, y'know!
TEXT     WANT.HINT?
         Do you want the hint?
TEXT     HINT.MAZE?
         Do you need help getting out of here?
TEXT
         You can make the passages look less alike by dropping things.  You
         could then make a map that would let you find your way around.
TEXT     HINT.PLOVER?
         Are you trying to explore beyond the Plover room?
TEXT
         You will definitely need a source of light to explore that region, and
         it is impossible to get the lamp into the Plover room through the
         narrow tunnel entering from the alcove.
TEXT     HINT.WITTS?
         Do you need help getting out of here?
TEXT
         Don't go west.
TEXT     FEED..TROLL
         Gluttony is not one of the troll's vices.  Avarice, however, is.
TEXT     LAMP.IS.DIM
         Your lamp is getting dim.  You'd best start wrapping this up, unless
         you can find some fresh batteries.  I seem to recall there's a vending
         machine in the maze.  Bring some coins with you.
TEXT     LAMP.IS.DEAD
         Your lamp has run out of power.
TEXT     LAMP.DEAD!
 
         There's not much point in wandering around out here, and you can't
         explore the cave without a lamp.  So let's just call it a day.
TEXT     PIRATE.RUNS
 
         There are faint rustling noises from the darkness behind you.  As you
         turn toward them, the beam of your lamp falls across a bearded pirate.
         He is carrying a large chest.  "Shiver me timbers!" he cries, "I've
         been spotted!  I'd best hie meself off to the maze to hide me chest!"
         With that, he vanishes into the gloom.
TEXT     LAMP.BATTERIES
         Your lamp is getting dim.  You'd best go back for those batteries.
TEXT     LAMP.REFUEL
         Your lamp is getting dim.  I'm taking the liberty of replacing the
         batteries.
TEXT     LAMP.NOFUEL
         Your lamp is getting dim, and you're out of spare batteries.  You'd
         best start wrapping this up.
TEXT     MAG.DWARVISH
         I'm afraid the magazine is written in a form of Dwarvish runes
         with which I am not familiar.
TEXT     CHEST.ELSEWHERE
         "This is not the maze where the pirate leaves his treasure chest."
TEXT     THIS.IS.A.CLUE
         Hmmm, this looks like a clue, which means it'll cost you 10 points to
         read it.  Should I go ahead and read it anyway?
TEXT     NEW.EFFECT
         It says, "There is something strange about this place, such that one
         of the words I've always known now has a new effect."
TEXT     UNCHANGED
         It says the same thing it did before.
TEXT     MACHINE.SIGN
         It reads, "Drop coins here to receive fresh batteries."
TEXT     I.DONT.UNDERSTAND
         I'm afraid I don't understand.
TEXT     DARK.ROOM
         It says, "Congratulations on bringing light into the Dark-room!"
TEXT     SHATTER.MIRROR
         You strike the mirror a resounding blow, whereupon it shatters into a
         myriad tiny fragments.
TEXT     THROW.VASE
         You have taken the vase and hurled it delicately to the ground.
TEXT     IS.THIS.OK?
         Is this acceptable?
TEXT     SUSP.DEMO
         There's no point in suspending a demonstration game.
TEXT     BROKENECK
         You are at the bottom of the pit with a broken neck.
TEXT     UNCLIMBABLE
         The dome is unclimbable.
TEXT     SNAKEBLOCKS
         You can't get past the snake.
TEXT     MISTCRAWL
         You have crawled around in a little passage north of and parallel
         to the Hall of Mists.
TEXT     PLUMMET
*
*        The following statements define the text to be used when
*        the person tries to jump over the chasm, jumps down the
*        pit, etc.  There should be one text message for every
*        reincarnation that is allowed, plus 1 (i.e., one of these
*        messages for each of the message pairs printed
*        by CORONER.
         Aaaaaaaaaiiiiiiiiiiieeeeeeeeee........
        /                                                     >splat!<
 
         Hmmmm - I never saw a red flapjack before!
TEXT     PLUMMET1
         Aaaaaaaaaaaaaaaaaaahhhhhhhhhhhhhhhhhh........
        /                                                    >squish!<
 
         Yetch - what a mess!
TEXT     PLUMMET2
         Gaaaaaaaaaaaaaaaaaaaaaaaaaahhhhhh...........
        /                                                    >crunch!<
TEXT     PLUMMET3
         Haaaaaaaaaaaaaalllllllllllllllllpppppp...........
        /                                                   >smash!<
TEXT     NOCANCLIMB
         There's nothing climbable here.
TEXT     WHAT.DO
         What do you want me to do with the #?
TEXT     MISTCRACK
         The crack is far too small for you to enter.
TEXT     PIPEFIT
         The stream flows out through a pair of 1 foot diameter sewer pipes.
         It would be advisable to leave via the exit.
TEXT     YOUDONTHAVE
         You have no #!
TEXT     NOCLIMBUP
         There's nothing to climb here.  Say "UP" or "OUT" to leave the pit.
TEXT     SHORTPLANT
         You have climbed up the plant and out of the pit.
TEXT     LONGPLANT
         You scurry up the plant and into the hole in the wall.
TEXT     CANTGETAXE
         As you approach the bear, it snarls threateningly;  you are forced
         to retreat without the #.
TEXT     DRAGON.RUG
         You can't get by the dragon to get at the rug.
TEXT     YOUSCORED
 
 
         You have scored a total of # points, out of a possible maximum of
TEXT     TOPSCORE
         # points.  During this game of Adventure, you have taken a total of
TEXT     NMOVES
         # turns.
 
 
TEXT     NOJUMPING
         There is nowhere for me to jump to.
TEXT     CLARIFY
         # what?
TEXT     DWARF.QUITS
         The dwar[f/ves] quickly scuttle[s/] off into the gloom.
TEXT     SAID
         Ok - "#".
TEXT     IFYOUQUIT
         If you were to quit now, you would score a total of # points, out
TEXT     IFYOUQUIT2
         of a possible maximum of # points.
TEXT     FISH
         You are obviously a rank amateur.  Better luck next time.
TEXT     NOVICE
         Your score qualifies you as a novice-class adventurer.
TEXT     EXPERIENCED
         You have achieved the rating; "Experienced Adventurer".
TEXT     SEASONED
         You may now consider yourself a "Seasoned Adventurer".
TEXT     JUNIORMASTER
         You have reached "Junior Master" status.
TEXT     MASTER.C
         Your score puts you in Master Adventurer class C.
TEXT     MASTER.B
         Your score puts you in Master Adventurer class B.
TEXT     MASTER.A
         Your score puts you in Master Adventurer class A.
TEXT     GRAND
         All of Adventuredom gives tribute to you, Adventurer Grandmaster!
TEXT     NEED1
         You only need one more point to reach the next level of expertise!
TEXT     NEED
         To reach the next qualification level you need # more points.
TEXT     NEW.BATTERIES
         The old batteries in your lamp were pretty well shot - I've taken the
         the liberty of putting in the new ones.
TEXT     DUNNO.HAO
         I don't know how to # such a thing.
TEXT     MUSTWAIT
         If you suspend your Adventure now, you will have to wait at least
         # minutes before continuing.
TEXT     CANT.SAVE
         I'm sorry, but I can't save your game at the moment;  something
         seems to be wrong with the save file.
TEXT     NO.IMAGE
         I can't find any saved game for you to restore.
TEXT     EXPLOSION
         An explosion has destroyed the well-house during the time that your
         game was suspended.  You're going to have to start over.
TEXT     SAVE.THE.IMAGE
         Do you want me to keep the save-image?
TEXT     CONTINUE.NOW
         Do you wish to continue with the game immediately?
TEXT     TOO.SOON
         I'm sorry - only a wizard can restart a game in less than # minutes.
TEXT     DOUSED.DWARF
         The # flies through the air and thoroughly drenches the dwarf.  He
         shakes himself off and curses violently; he *REALLY* looks angry!
TEXT     DOUSED.DWARVES
         The # flies through the air and thoroughly drenches the dwarves. They
         shake themselves off and curse violently; they *REALLY* look angry!
TEXT     CANTDRINK
         There is nothing here that I can drink!
TEXT     CANT.READ.OYSTER
         There's nothing written on the oyster.
TEXT     OYSTER.IS.BARE
         There is nothing written on the top of the oyster.
TEXT     CAVE.NOT.OPEN
         I'm terrible sorry - Colossal Cave is closed.  Our hours are:
 
TEXT     ETMF.TOO.HIGH
         I'm afraid that I can't start up a real Adventure for you at the
         moment; the system's ETMF is too high.
TEXT     TOO.MANY.USERS
         I'm afraid that there are too many people on the system at the moment;
         I can't start up a real Adventure for you.
TEXT     CAN.DEMO
         We do allow visitors to make short explorations during our off hours.
 
TEXT     WANT.DEMO
         Would you like to do that?
TEXT     TA.TA
         Ok, then - I suggest that you try again later.
TEXT     WIZARD.ENDS
 
         A large cloud of green smoke appears in front of you.  It clears away
         to reveal a tall wizard, clothed in grey.  He fixes you with a steely
         glare and declares, "This adventure has lasted too long."  With that
         he makes a single pass over you with his hands, and everything around
         you fades away into a grey nothingness.
TEXT     RESTORE.PRIME
         I'm afraid that I can't restore your saved game - it's prime time
         at the moment, and only demonstration Adventures are permitted.
TEXT     RESTORE.ETMF
         I'm sorry, but I can't restore your Adventure - the ETMF is too
         high.  You'll have to try again later.
TEXT     RESTORE.USERS
         I'm sorry, but there are too many users on the system at the moment;
         please try again later when the system is less heavily in use, and
         I'll restore your Adventure then.
TEXT     HOURS.ARE
 
         Colossal Cave is open during the following hours:
 
TEXT     R.U.A.WIZARD?
         Are you actually a wizard?
TEXT     PROVE.IT
         Prove it - say the magic word!
TEXT     OH.POOH
         Oh, pooh - you are nothing but a charlatan!  That little piece of
         deception is going to cost you 10 points!!
TEXT     SO.YOU.ARE
         Oh, dear, you really *are* a wizard!  Sorry to have bothered you....
TEXT     NOTHING.OBVIOUS
         Nothing obvious happens.
TEXT     SCHLURP
         Hmmmm..  This sand is rather soft, and you're sinking in a little...
         In fact you're sinking in a lot!   Oh, no - it's QUICKSAND!!  HELP!!
         HELP!! HELP!!!
        /               >glub<
        /                        >glub<
        /                                   >glub<
        /                                                 >blurp<
TEXT     SCHLURP2
         You know, I've heard of people who really fell in for the soft sell,
         but
        /     >glub<
        /            this
        /                  >glub<
        /                          is
        /                              >glub<
        /                                       ridiculous!
        /
        /                                                          >blop!<
TEXT     SLIMED
         As you enter into the passage, you are forced to brush up against
         some of the green slime.  Instantly it flows down and covers your
         body, and rapidly digests away all of your flesh.
TEXT     FZAP
         With a sharp sizzling sound, a large spark of electricity jumps
         out of thin air and strikes your lamp.  The immense electrical charge
         flows to ground through your body and fries you to a crisp.
TEXT     LAMP.GOES.POOF
         With a loud "zap" a bolt of lightning springs out of midair and strikes
         your lamp, which immediately and violently explodes.  You narrowly
         miss being torn to shreds by the flying metal.
 
TEXT     LAMP.EXPLODES
         In a loud crackle of electricity, a bolt of lightning jumps out of
         nowhere and strikes your lamp.  The lamp instantly explodes like a
         grenade, and you are mown down by a cloud of shrapnel.
TEXT     LAMP.RECHARGED
         The air fills with tension, and there is a subdued crackling sound.
         A blue aura forms about your lantern, and small sparks jump from the
         lantern to the ground.  The aura fades away after several seconds,
         and your lamp is once again shining brightly.
TEXT     GOT.THE.SWORD
         The singing sword slides easily out of the rock.
TEXT     SWORD.IS.STUCK
         The sword is firmly embedded in the stone, and you aren't strong
         enough to pull it out.
TEXT     VIAL.EXPLODES
         The vial strikes the ground and explodes with a violent >FOOM!<,
         neatly severing your foot.  You bleed to death quickly and messily.
TEXT     VIAL.BANG
         The vial explodes into splinters and disintegrates, releasing an
         oily liquid which rapidly sublimes into a large mushroom-shaped cloud
TEXT     FIRST.FUME
         of pale puce vapor smelling like sequoia sap and ozone.
TEXT
         of bright green vapor smelling like pine needles and sea water.
TEXT
         of thick yellow vapor smelling like cheddar cheese and bananas.
TEXT
         of choking green vapor smelling like chlorine and apples.
TEXT
         of misty white vapor with no scent.
TEXT
         of nearly-invisible vapor with a strong odor of walnuts and onions.
TEXT     LAST.FUME
         of ominously glowing vapor smelling of hot iron.
TEXT     REVENGE
         As you reach the middle of the bridge, the troll appears from out
         of the tunnel behind you, wearing a large backpack.  "So, Mister
         Magician," he shouts, "you like to use magic to steal back my hard-
         earned toll?  Let's see how you like a little of MY magic!!"  With
         that, he aims a tube running from the backpack directly at the bear
         and pulls a trigger.  A spout of magical fire roars out and singes the
         bear's fur;  the bear bellows in pain and dashes onto the bridge to
         escape.  The bridge shudders, groans, and collapses under the weight,
         and you and the bear plunge down into the chasm.
TEXT     REVENGE.1
         As you reach the middle of the bridge, the troll appears from out
         of the tunnel behind you, wearing a large backpack.  "So, Mister
         Magician," he shouts, "you like to use magic to steal back my hard-
         earned toll?  Let's see how you like a little of MY magic!!"  With
         that, he aims a tube running from the backpack directly at the bridge
         and pulls a trigger.  A spout of magical fire roars out and incinerates
         the bridge supports, causing the bridge to sway giddily and collapse
         into the chasm.  You plunge down to your death.
TEXT     SWORD.MISSES
         The sword misses the bear, bounces off of the wall, and lands at
         your feet.
TEXT     BEAR.MISSES
         The bear dodges away from your attack, growls, and swipes at you
         with his claws.  Fortunately, he misses.
TEXT     BEAR.GETS.YOU
         The bear snarls, ducks away from your attack and slashes you to death
         with his claws.
TEXT     FOOF.FIRST
 
         >>Foof!<<
 
TEXT
 
         >>Foom!<<
 
TEXT
 
         >>Poof!<<
 
TEXT
 
         A thick cloud of orange smoke appears from thin air and blocks your
         view.   When it vanishes, you find:
 
TEXT
 
         There is a brilliant flash of light and a sudden fanfare of trumpets!
         When your eyes recover from the flash, you find that:
 
TEXT     FOOF.LAST
 
         >>Whoooosh!<<
 
TEXT     FOOF.ODD
 
         >sputter<
        /            >spark<
        /      >phut<
        /               >hsssssssssss
        /                            ssssss
        /                                  sss
        /                                     s
        /                                      s
        /                                       .
        /                                        .
        /                                         .
 
         Oh, blast.  Excuse me for a moment, please......
 
        /                                                          {KICK!}
 
         >>Foof!<<
 
TEXT     OOF
         Wheeeeeeeeeeeeeeeee..........
        /
        /                                           >oof!<
        /
 
TEXT     SLIDE.SLIPPERY
         The icy slide is far too steep and slippery to climb.
TEXT     OGRE.BLOCKS
         The ogre growls at you and refuses to let you pass.
TEXT     OGRE.REBUFF
         The ogre contemptously catches the # in mid-swing, rips it out
         of your hands, and uses it to chop off your head.
TEXT     OGRE.CATCH
         The ogre casually catches the # in mid-air, braces his feet, winds
         up and throws the # straight back at you with incredible force.  You
         are unable to dodge it and it chops you in half.
TEXT     OGRE.KILLED
         The sword halts in mid-air, twirls like a dervish, and chants several
         bars of "Dies Ire" in a rough tenor voice.  It then begins to spin
         like a rip-saw blade and flies directly at the ogre, who attempts to
         catch it without success;  it strikes him full on the chest.  There is
         a brilliant flash of light, a deafening roar and a cloud of oily grey
         smoke;  when the smoke clears (and your eyes begin working properly
         again) you see that the ogre has vanished.  The sword is lying on the
         ground, sparking and flaming.  Before your eyes it softens and melts,
         writhes as if in pain, and shrinks rapidly until all that is left is
         a small silvery ring which cools rapidly.
TEXT     OGRE.TOO.TOUGH
         You attack the ogre, but he fends off your attack easily and comes
         very close to crushing your skull with *his* bare (but extremely
         strong) hands.  You are forced to retreat in disgrace.
TEXT     OGRE.RIPS.HEAD.OFF
         You attack the ogre - a brave but foolish action.  He quickly grabs
         you and with a heave of his mighty arms rips your body limb from limb.
TEXT     NO.ARCH
         I'm afraid I can't go that way - walking on red-hot lava is contrary
         to union regulations (and is bad for your health anyhow).
TEXT     FUMES.BURN
         As you approach the center of the archway, hot vapors saturated with
         brimstone drift up from the lava in the gorge beneath your feet.  You
         are swiftly overcome by the foul gasses and, with your lungs burned
         out, fall off of the bridge and into the gorge.
TEXT     FUMES.MISS
         As you approach the center of the archway, hot vapors saturated with
         brimstone drift up from the lava in the gorge beneath your feet.  The
         mithril ring in your hand quivers and glows, and the fumes eddy away
         from the bridge without harming you.
 
TEXT     BURN.BOTH
         As you approach the center of the archway, hot vapors saturated with
         brimstone drift up from the lava in the gorge beneath your feet.  You
         and the bear are both overcome by the noxious gasses and, with your
         lungs burned out, slip off of the bridge and plummet into the gorge.
TEXT     BURN.BEAR
         As you approach the center of the archway, hot vapors saturated with
         brimstone drift up from the lava in the gorge beneath your feet.  The
         mithril ring in your hand quivers and glows, and a swirling vortex
         of white vapor encircles you and protects you from the fumes.  The
         bear is not so lucky, though, since the vortex is rather small;  the
         noxious gasses choke it and it staggers off of the side of the arch
         and plummets into the gorge below.
 
TEXT     GHOST.BANG
         As you reach the center of the bridge, a ghostly figure appears in
         front of you.  He (?) stands at least eight feet tall, and has the
         lower body of an enormous snake, six arms, and an angry expression on
         his face.  "You'll not have my sceptre that easily!" he cries, and
         makes a complex magical gesture with his lower right arm.  There is a
         brilliant flash of light and a vicious >crack<, and the bridge cracks
         and plummets into the gorge.
TEXT     NO.KEYHOLE
         The door to the safe has no keyhole, dial, or handle - I can't figure
         out how to open it!
TEXT     ALREADY.OPEN
         The # is already open!
TEXT     IT.IS.MELTED
         The door to the safe seems to be fused shut - I can't open it.
TEXT     ALREADY.SHUT
         The # is already closed!
TEXT     SAFE.SHUTS
         >screeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeech<
        /                                              >ker-CHUNK!<
 
         The safe is now closed.
TEXT     SAFE.OPENS
         >ker-THUNK<
        /            >screeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeech<
 
         The (somewhat rusty) safe is now open.
TEXT     WHISPER
         You pluck the sceptre from the skeleton's bony hand.  As you do, the
         skeleton raises its head and whispers "Remember - #!" in a
         forboding tone; it then sags to the ground and crumbles into dust which
         drifts away into the still air of the cave.
TEXT     BLEW.SAFE
         As you pluck the sceptre from the skeleton's grasp, it raises its head
         and whispers, "You blew it!".  It then shivers and collapses into a
         pile of fine dust which quickly vanishes.
TEXT     SAFE.FUSES
 
         >bong<                 The very air quivers with sound as though
        /   >bong<               someone, somewhere in the distance, has struck
        /      >bong<             three powerful blows on an immense brass gong.
 
         Smoke trickles out from around the edges of the safe's door, and the
         door itself glows red with heat for a moment.
 
         A hollow voice says,  "This is a Class 1 security alarm.  All cave
         security forces go to Orange Alert.  I repeat - Orange Alert."
 
TEXT     SAFE.BLOCKS
         The safe's door is blocking the exit passage - you'll have to close
         the safe to get out of here.
TEXT     SIZZLE
         EEEEEEEEEAAAAAAAAAAAaaaaaahhhhhhhhhhhhh..........
 
        /                                                      >sizzle<
TEXT     SLICE.BLOB
         The # cuts through the blob's body (?) without harming it.
TEXT     BOUNCE.BLOB
         You attack the strange blob, but bounce harmlessly off of its strong
         but very rubbery skin.
TEXT     CRUMBLE
         Rock silently crumbles off of the wall in front of you, revealing
         dark passages leading northwest, north, and northeast.
TEXT     PLAIN.HINT
         Having problems?
TEXT
         Ok - what you need to do is apply a little philosophy.  To wit:  there
         is a question that you need to ask whenever you explore a new room
         in this cave.  In most places, the answer to the question is "yes".
         In some other places, it's "no" for an obvious reason.  Right here,
         the answer is "no" but the reason isn't so obvious.  If you can figure
         out what the question is, you can get out of here easily.  I can tell
         you this - it's always a vital question if you wish to survive.
TEXT     BAS.GRUMBLE
         The basilisk stirs restlessly and grumbles in its sleep as you pass,
         but it does not awaken.
 
TEXT     PETRIFY.SELF
         The basilisk stirs grumpily and awakens, peering sleepily about.  It
         sees its reflection in the metal plate that you are carrying,
         shudders, and turns into solid granite.
 
TEXT     PETRIFY.ME
         The basilisk stirs grumpily and awakens, peering sleepily about.  It
         spies you, growls, and stares you straight in the eye.  Your body
         is instantly petrified.
TEXT     HIT.BASILISK
         You attack the basilisk mightily.  It instantly awakens and looks you
         dead in the eye, and your body turns to solid rock.
TEXT     AXE.BASILISK
         The # rebounds harmlessly from the basilisk's tough scales.  The
         basilisk awakens, grunting in shock, and glares at you.  You are
         instantly turned into a solid rock statue (and not a particularly
         impressive one, at that).
TEXT     REBOUND
         The # rebounds harmlessly from the pentagram's magic force
         field.  It's just as well - the djinn doesn't seem dangerous.
TEXT     KILL.A.FEW
         You kill several of the gooseberry goblins with your #, but
         the others swarm at you, force you to the ground, and rip out
         your throat.
TEXT     TOUGH.DJINN
         That's not a wise thing to try - djinni are essentially immortal
         and thus are pretty hard to hurt.  Besides, this one seems rather
         friendly - why don't you just try releasing him?
TEXT     GOBL.EAT.YOU
         Goblins live exclusively on human flesh, and you can't spare
         any of your own to placate them.  On the other hand, I suspect
         that they're going to eat you pretty soon whether you like it
         or not - you'd better find some way of killing them or driving
         them away!
TEXT     WARRIORS
 
         As each of the dragon's teeth strikes the ground, a fully-armed human
         skeleton springs up from where it struck and leaps to your defense!
         The skeletal warriors attack the vicious gooseberry goblins and drive
         them away in screaming panic;  they then salute you with their ancient
         and rusty swords, and fade silently into nothingness.
 
TEXT     POLITE.DJINN
         The wax seal breaks away easily.  A cloud of dark smoke pours up from
         the mouth of the flask and condenses into the form of a twelve-foot
         Djinn standing in the pentagram.  He pushes experimentally at the
         magical wall of the pentagram (which holds), and nods politely to
         you.  "MY THANKS, OH MORTAL," he says in an incredibly deep bass
         voice.  "IT HAS BEEN THREE THOUSAND YEARS SINCE SOLOMON SEALED ME
         INTO THAT BOTTLE, AND I AM GRATEFUL THAT YOU HAVE RELEASED ME.  IF
         YOU WILL OPEN THIS PENTAGRAM AND LET ME GO FREE, I WILL GIVE YOU SOME
         ADVICE THAT YOU MAY ONE DAY WISH TO POSSESS."
TEXT     RUDE.DJINN
         The flask's wax seal crumbles at your touch.  A large cloud of black
         smoke pours out, solidifying into the form of a twelve-foot Djinn.
         "AT LAST!" he says in an earth-shaking voice, "I KNEW THAT SOMEDAY
         SOMEONE WOULD RELEASE ME!  I WOULD REWARD YOU FOR THIS, MORTAL, BUT
         IT HAS BEEN THREE THOUSAND YEARS SINCE I HAD A SOLID MEAL, AND I'M
         NOT GOING TO STAND HERE CHATTERING WHEN I COULD BE OUT EATING A SIX-
         INCH SIRLOIN STEAK.  FAREWELL."  With that, he somewhat rudely explodes
         back into smoke and drifts quickly out of sight.
TEXT     DJINN.ADVICE
         The pentagram's magical barrier sparks fitfully and goes down.  The
         Djinn stretches gratefully and smiles at you.  "AGAIN, MY THANKS," he
         says.  "MY ADVICE TO YOU WILL TAKE THE FORM OF A HISTORY LESSON.
         WHEN RALPH WITT, THE ARCHITECT AND CONSTRUCTOR OF THIS CAVE, WAS VERY
         YOUNG, HE BECAME VERY INCENSED THAT HIS NAME WAS AT THE END OF THE
         ALPHABET.  HE FELT (FOR SOME REASON) THAT THE LETTER W BELONGED NEAR
         THE BEGINNING OF THE ALPHABET, AND THAT ALL OF THOSE "UPSTART LETTERS
         WHICH UNFAIRLY USURPED THE BEST PLACES" SHOULD BE FORCED INTO EXILE
         AT THE END OF THE ALPHABET.  HIS INSTINCT FOR MATTERS MAGICAL AND
         MYSTICAL LED HIM TO APPLY THIS STRANGE BELIEF INTO THE CAVE'S
         STRUCTURE WHEN HE EXCAVATED IT.  YOU HAVEN'T YET BEEN AFFECTED BY HIS
         STRANGE HABITS, BUT YOU SHOULD REMEMBER THIS.  FAREWELL, AND GOOD
         LUCK."  With that, the Djinn evaporates into a cloud of smoke and
         drifts rapidly away.
TEXT     KILL.GOBLINS
         You attack the goblins and manage to squash a few, but the others
         overwhelm you, forcing you to the ground and ripping out your throat.
TEXT     EMPTY.PENTA
         The pentagram is empty - there's nothing to let out!
TEXT     GOBLIN.CHASE
         You are being pursued by a vicious horde of little gooseberry goblins!
 
TEXT     FALL&STARVE
         You have jumped into a bottomless pit.  You continue to fall for
         a very long time.  First, your lamp runs out of power and goes
         dead. Later, you die of hunger and thirst.
TEXT     FALL&STARVED
         You have jumped into a bottomless pit.  Eventually, you die of thirst.
TEXT     CANTENTERSAFE
         The safe's door is closed, and you can't get in!
TEXT     NO.HANDLE
         There is no handle on the inside of the safe door, nor any other way
         to get a grip on it.  You'll have to leave the safe before shutting it.
TEXT     CANT.SWIM
         I can't swim, or walk on water.  You'll have to find some other way
         to get across, or get someone to assist you.
TEXT     TURTLE.BACK
         You step gently on Darwin the Tortoise's back, and he carries you
         smoothly over to the southern side of the reservoir.  He then blows
         a couple of bubbles at you and sinks back out of sight.
 
TEXT     GONG.RINGS
 
         >BONNNNGGGGGGGGGG<
 
         Darwin the Tortoise blinks in surprise at the noise, but does nothing.
TEXT     GONG.FETCH
 
         >BONNNNNGGGGGGGGG<
 
         A hollow voice says, "The GallopingGhost Tortoise Express is now at
         your service!"
 
         With a swoosh and a swirl of water, a large tortoise rises to the
         surface of the reservoir and paddles over to the shore near you.
         The message, "I'm Darwin - ride me!" is inscribed on his back in
         ornate letters.
 
TEXT     WHIRLPOOL?
         Into the whirlpool??
TEXT     FLOW.DOWN
         You plunge into the water and are sucked down by the whirlpool.
TEXT     FLOW.RIP
         You plunge into the water and are sucked down by the whirlpool.  The
         current is incredibly strong, and you barely manage to hold onto
         your lamp;  everything else is pulled from your grasp and is lost in
         the swirling waters.
TEXT     FLOW.DARK
         You plunge into the water and are sucked down by the whirlpool into
         pitch darkness.
TEXT     FLOW.D.RIP
         You plunge into the water and are sucked down by the whirlpool into
         pitch darkness.  The current is incredibly strong, and everything that
         you are carrying is ripped from your grasp and is lost in the swirling
         waters.
TEXT     WHIRL.LAND
 
         The swirling waters deposit you, not ungently, on solid ground.
 
TEXT     PHUGGG.DATA
 
         A large phosphorescent cloud of smoke drifts into view, and a large
         mouth and two dark eyes take shape on the side.  One of the eyes winks
         at you, and the djinn's deep voice says "GREETINGS AGAIN, MORTAL.  I
         HAVE REMEMBERED A PIECE OF ANCIENT LORE THAT I LEARNED FROM MY AUNT,
         AN AFREET OF GREAT KNOWLEDGE.  THERE IS ANOTHER MAGIC WORD THAT YOU
         MIGHT FIND OF USE IF YOU SHOULD EVER FIND YOURSELF BEING ATTACKED BY
         THOSE PESTIFEROUS DWARVES.  YOU SHOULD USE IT ONLY AS A LAST RESORT,
         THOUGH, SINCE IT IS A MOST POTENT WORD AND IS PRONE TO BACKFIRE FOR
         NO OBVIOUS REASON;  ALSO, IT SHOULD NEVER BE USED NEAR WATER OR NEAR
         ANY SHARP WEAPON OR THE RESULTS MAY BE MOST UNFORTUNATE.  THE WORD
         IS 'phuggg'", whispers the djinn, "AND IT MUST BE PRONOUNCED CAREFULLY
         IF IT IS TO HAVE THE PROPER EFFECT.  FAREWELL AGAIN, AND GOOD LUCK!"
         With that, the djinn-cloud drifts away out of sight.
 
TEXT     JELLYFISH
 
         >splurch!<
 
         Oh, no!  You've turned yourself into a jellyfish, and fallen to the
         ground and been splattered far and wide!  Well, that certainly wasn't
         very smart!!!  You were warned not to use that work near water!
TEXT     CAVE.DESTROYED
 
         The ground begins to shudder ominously, and the very cave walls around
         you begin to creak and groan!  A sulphurious stench fills the air!
 
         With an incredible lurch, the ground begins to dance and ripple as
         though it were liquid!  You are thrown off of your feet and tossed
         violently up and down!  The cave walls begin to crumble and split from
         the stress!
 
         There is a terrible ROAR of rending rock!!  The cave ceiling splits,
         and rocks plunge down and smash your lower body to a gooey paste!!
 
         There is a violent blast in the distance!  Steam and smoke drift into
         view through the rents in the walls, and furiously-bubbling red-hot
         lava flows in and surrounds you.  The cave ceiling disintegrates in
         an incredible orgy of grinding destruction, and the cave walls fall
         and are pounded into fine dust.
 
 
 
         You are lying, badly mangled, on a small rock island in a sea of
         molten lava.  Above you, the sky is faintly visible through a thick
         pall of smoke and steam.  A short distance to the north, the remains
         of a well-house are sinking slowly into the bubbling ooze.
 
 
         There is a distant, sourceless screech of incredible anguish!  With
         a sharp >poof< and a small puff of orange smoke, a bent and bearded
         elf appears.  He is dressed in working clothes, and has a name-tag
         marked "Ralph" on his shirt.  "You blithering idiot!" he storms.
         "You were warned quite clearly not to use that work near water!!  I
         hadn't gotten all of the bugs out of it yet, and now your incredible
         incompetance has totally destroyed Colossal Cave!!  Do you have the
         faintest scintilla of an iota of an understanding of how much work
         I'm going to have to do to get the cave rebuilt?!?  I'll have to go
         all the way to Peking for another dragon, and I'll have to convince
         the Goblin's Union to send me another team of gooseberry goblins;
         I'll have to sub-contract the building of the volcano out to the
         local totrugs, and worst of all I'll have to go through eight months
         of paperwork and red tape to file a new Environmental Impact
         statement!!  All because you couldn't follow directions, you
         purblind and meatbrained moron!  I'm rescinding all of your game
         points and throwing you out!  Out!   OUT!   GET OUT!$!%#&'@%!!%%!"
 
TEXT     ZOT.AXE
         Your axe glows bright orange and fades into nothingness.
TEXT     ZOT.SWORD
         Your sword jumps into the air, chants several bars of the "Volga
         Boatman", shoots off several fitful blue sparks, and disintegrates.
TEXT     IT.WORKED
         A clear, liquid chime sounds in midair.  A large, four-clawed hand
         reaches out of the ground, grabs the dwarf, and pulls it down into
         nothingness.
TEXT
         A clear, liquid chime sounds in midair.  A long green tentacle
         covered with sucker disks reaches out from nowhere, grabs the
         dwarves, and pulls them back to wherever it came from.
TEXT
         There is a sharp sizzling sound.  The dwarf explodes into flame
         and vanishes.
TEXT
         There is a sharp sizzling sound.  The dwarves are engulfed in
         a wave of fire that appears from nowhere, and are completely
         incinerated;  the flames then vanish into nothingness again.
TEXT
         There is a sharp whistling sound from nowhere.  The dwarf shudders
         and turns into a moth, which then flies away.
TEXT
         There is a sharp whistling sound from nowhere.  The dwarves stiffen,
         shudder, and melt down into a large puddle of soggy goo that quickly
         soaks into the ground and vanishes.
TEXT     IT.DIDNT.WORK
         A clear, liquid chime sounds in midair.  A large, four-clawed foot
         appears in midair and stomps violently downward, missing the dwarf
         but thoroughly squashing you.
TEXT
         A clear, liquid chime sounds in midair.  A large and very toothy
         mouth appears in midair and chomps ferociously.  The dwarves manage
         to evade it, but it bites you in half.
TEXT
         There is a sharp sizzling sound.  A ball of fire roars out of nowhere,
         misses the dwarf, bounces off of a wall, and incinerates you.
TEXT
         There is a sharp sizzling sound.  A ball of fire appears from nowhere,
         bounces off of the ground, and explodes violently, incinerating both
         you and the dwarves.
TEXT
         There is a sharp crackling sound from the air above you.  The dwarf
         shudders and turns into a sabre-toothed tiger, which attacks and
         kills you in short order.
TEXT
         There is a sharp crackling sound from the air above you.  The dwarves
         stiffen, fall to the ground, and melt into a large puddle of soggy
         goo.  The goo twitches a few times and then flows at you with
         incredible speed;  it attacks and strangles you with little
         difficulty.
TEXT     SET.FLASK.DOWN
         You have set the flask down in the center of the pentagram.
TEXT     CAMEO
         From somewhere in the distance, there comes a musical skirl of
         light, elvish laughter and the sounds of merriment.
TEXT
         From somewhere nearby, there suddenly comes a sound of something
         mechanical in motion.  As you turn towards it, an incredible
         figure rolls into the light of your lamp.  It stands about five
         feet high on a wheeled metal pedestal, and has a globular light-
         filled head, accordion-pleated metal arms, and a cylindrical body
         the size of an oil drum with a plastic panel on the front.  It rolls
         past without taking any notice of you, all the while waving its
         arms, flashing a light behind its front panel and bellowing "WARNING!
         WARNING!  DANGER!" at the top of its not inconsiderable voice.  It
         rolls on out of sight, and moments later there is an immense flash
         of light and a tremendous blast of sparks and smoke.  When the air
         clears, you find that no trace remains of the strange apparition.
TEXT
         With a sudden gust of air, a large cave bat flutters into view,
         flies around your head several times, squeaks with disgust, and
         flutters on out of sight.
TEXT
         Suddenly, the ground quivers underfoot;  a dull rumbling sound
         resounds from the rock around you, and in the distance you can
         hear the crash of falling rock.  The earth tremor subsides after
         a few seconds without causing any major damage.
TEXT
         From the darkness nearby comes the sound of shuffling feet.  As you
         turn towards the sound, a nine-foot cyclops ambles into the light of
         your lamp.  The cyclops is dressed in a three-piece suit of worsted
         wool, and is wearing a black silk top-hat and cowboy boots and is
         carrying an ebony walking-stick.  It catches sight of you and stops,
         seeming frozen in its tracks, with its bloodshot eye bulging in
         amazement and its fang-filled jaw drooping with shock.  After staring
         at you in incredulous disbelief for a few moments, it reaches into
         the pocket of its vest and pulls out a small plastic bag filled with
         a leafy green substance, and examines it carefully.  "It must be
         worth eighty pazools an ounce after all" mumbles the cyclops, who
         casts one final look at you, shudders, and staggers away out of
         sight.
TEXT
         From somewhere in the distance comes a heart-wrenching scream of
         mortal terror!  "NO!  DON'T!  NO!  NO!  HELP!!!!" cries the voice,
         and then lets out a wail of agony that is cut off abruptly.  Subdued
         crunching and slurping sounds can be heard for a minute or so, and
         then silence falls.
TEXT     LAST.CAMEO
         From somewhere nearby come the sounds of sliding, stumbling feet.
         As you turn towards them, the beam of your lamp falls upon a tall,
         shambling figure approaching you out of the darkness.  Standing no
         more than five feet tall, it cannot possibly weigh more than fifty
         pounds including the shroud and bandages in which it is wrapped;
         a musty reek like the scent of old, dead earth seeps from it and
         fills the air.  As you cower back in disgust and horror, the figure
         halts, examines you through eyes resembling wet pebbles, and
         whispers "Peace, man!" in a voice like wind rustling through dead
         trees.  It then turns and shambles away into the darkness.
TEXT     THROW.PIT
         You have tossed the # down into the pit.
TEXT     THROW.FISSURE
         You have thrown the # down into the fissure.
TEXT     THROW.HOLE
         You have tossed the # down into the hole in the floor.
TEXT     THROW.ROOM
         You have tossed the # down into the room below you.
TEXT     THROW.CANYON
         You have tossed the # down into the canyon beneath your feet.
TEXT     THROW.WHIRLPOOL
         You have hurled the # into the middle of the whirlpool.
TEXT     THROW.CAVERN
         You have thrown the # down into the mist filling the cavern.
TEXT     THROW.CHASM
         You have hurled the # down into the misty bottom of the chasm.
TEXT     THROW.GORGE
         You have hurled the # down into the boiling lava at the bottom
         of the volcanic gorge.
TEXT     THROW.CHIMNEY
         You have tossed the # down the chimney.
TEXT     THROW.TUBE
         You have tossed the # down into the lava tube and out of sight.
TEXT     THROW.STEPS
         You have thrown the # down the steps and out of view.
TEXT     THROW.SLIDE
         You have tossed the # down the icy slide and out of sight.
TEXT     THROW.BEACH
         You have thrown the # down onto the beach.
TEXT     THROW.RESERVOIR
         You have negligently tossed the # into the center of the reservoir.
TEXT     SHATTERED.IT
         A delicate crash sounds from below.
TEXT     ICE.HINT?
         Are you having problems getting out of the ice tunnels?
TEXT
         To get out of here, you'll first have to get your bearings so that
         you know where you are.  I suggest that you draw a careful, accurate
         map of the tunnel system;  for clarity's sake, keep your lines as
         straight as is feasible and draw in all of the dead ends and such.
         Once you've got a complete and accurate map, examine it carefully; if
         your thoughts refuse to clarify, you might try using the old Yoga
         trick of standing on your head, and see if that helps.
TEXT     CANT.SEE.ANYTHING
         It's pitch dark in here - I can't tell whether there's anything here
         that I can pick up!
TEXT     GROPE.FALL
         Hmmph - you're not asking for much, are you - it's pitch dark in
         here!  Well, I'll grope around and try to find the #.....
        / {hunt}
        /         {hunt}
        /                  {rummage}
        /                              {trip!}
        /                                       Aaaiiii
        /                                              iie
        /                                                 ee
        /                                                   e
        /                                                    e
        /                                                    e
        /                                                    e
        /                                                     >SPLAT!<
 
         You stumbled into a pit and broke your back!
TEXT     GROPE.MISS
         Hmmph - you're not asking for much, are you - it's pitch dark
         in here, and I'll have to grope around to try to find the #.
         Well, if I must, I must.....
        /                                 {hunt}
        /                                           {search}
        /                                                      {hunt}
        /                  {rummage}
        /         {peer}
        /                  {touch}
        /             {hunt}
        /                                 >scrape<
        /                                          Youch! {curse}
        /                  {hunt}
        /                              {seek}
 
         No luck - I can't find the #!  If you could get me some light in
         here, maybe I'd be able to do better.  Sorry....
TEXT     USE.A.WEAPON
         That may be just as well.  If you do insist upon trying to #
TEXT     KILL.THE.WHATEVER
         the #, you might be well advised to use a weapon of some sort.
VARIABLE HERE,THERE,ARG1,ARG2,STATUS
VARIABLE LAMPLIFE
VARIABLE I,J,K,L
VARIABLE INVCT
VARIABLE DEATHS,PENALTIES,SCOREX,MAXSCORE,TURNS,ADMIN,MOVES
VARIABLE FOOBAR
VARIABLE DWARFCOUNT,CLOCK,CLOSURE,QUITTING,OK
VARIABLE TIME,HINT.TIME
VARIABLE STRENGTH,MUSHTIME,DRAGTIME,LASTCLOCK
VARIABLE PASSWORD,SAFEEXIT,ESCAPE,CAMEO.TIME
VARIABLE MAGICK,BACKLASH,FLEETFOOT,FOOF
VARIABLE EXPLODE.THE.WELLHOUSE
LABEL    GETSCORE
         IFEQ  QUITTING,0
            OR
         IFGT  CLOSURE,2
            SET   SCOREX,9
         ELSE
            SET   SCOREX,0
         FIN
         SET   MAXSCORE,9
         ITOBJ I
            BIT   I,VALUED
               IFLOC I,BUILDING
                  OR
               IFGT  CLOSURE,2
                  ADD   SCOREX,15
               ELSE
                  BIT   I,SEEN
                     ADD   SCOREX,2
                  FIN
               FIN
               ADD   MAXSCORE,15
            FIN
         EOI
*
         IFLOC MAGAZINES,WITTSEND
            ADD   SCOREX,1
         FIN
         ADD   MAXSCORE,1
*
         BIT   DEBRIS,BEENHERE
            OR
         BIT   Y2,BEENHERE
            ADD   SCOREX,20
            BIT   LAIR,SEEN
               ADD   SCOREX,10
            FIN
            BIT   BEACH,SEEN
               ADD   SCOREX,10
            FIN
            BIT   FACES,SEEN
               ADD   SCOREX,10
            FIN
         FIN
         ADD   MAXSCORE,50
*
         SET   I,CLOSURE
         MULT  I,20
         ADD   SCOREX,I
         ADD   MAXSCORE,100
*
         SET   L,DEATHS
         MULT  L,10
         SUB   SCOREX,L
*
         SUB   SCOREX,PENALTIES
*
         IFLT  SCOREX,0
            SET   SCOREX,0
         FIN
*
LABEL    FINIS
         CALL  GETSCORE
         VALUE YOUSCORED,SCOREX
         VALUE TOPSCORE,MAXSCORE
         VALUE NMOVES,MOVES
         IFLT  SCOREX,20
            LDA   I,FISH
            SUB   SCOREX,20
         ELSE
            IFLT  SCOREX,130
               LDA   I,NOVICE
               SUB   SCOREX,130
            ELSE
               IFLT  SCOREX,240
                  LDA   I,EXPERIENCED
                  SUB   SCOREX,240
               ELSE
                  IFLT  SCOREX,350
                     LDA   I,SEASONED
                     SUB   SCOREX,350
                  ELSE
                     IFLT  SCOREX,470
                        LDA   I,JUNIORMASTER
                        SUB   SCOREX,470
                     ELSE
                        IFLT  SCOREX,510
                           LDA   I,MASTER.C
                           SUB   SCOREX,510
                        ELSE
                           IFLT  SCOREX,530
                              LDA   I,MASTER.B
                              SUB   SCOREX,530
                           ELSE
                              IFLT  SCOREX,550
                                 LDA   I,MASTER.A
                                 SUB   SCOREX,550
                              ELSE
                                 LDA   I,GRAND
                                 LDA   SCOREX,0
                              FIN
                           FIN
                        FIN
                     FIN
                  FIN
               FIN
            FIN
         FIN
         SAY   I
         SAY   BLANK
         MULT  SCOREX,-1
         IFGT  SCOREX,0
            IFEQ  SCOREX,1
               SAY   NEED1
            ELSE
               VALUE NEED,SCOREX
            FIN
         FIN
         SAY   BLANK
         STOP
LABEL    PHOG     {control fog and glow in fog}
         IFLT  FOG,8    {state 8 = invisible fog}
            RANDOM   FOG,8    {change color of fog}
         FIN
         RANDOM   GLOW,8   {move the glow around}
         IFNEAR   LAMP
            AND
         IFEQ  LAMP,1      {lamp here and glowing?}
            APPORT   GLOW,LIMBO  {if so, masks out faint glow}
         ELSE
            APPORT   GLOW,PLAIN.2   {if not, move glow into place}
            IFAT  PLAIN.2        {is that where we are?}
               AND
               NOT
            BIT   STATUS,MOVED
               SAY   GLOW        {announce faint glimmer of light}
            FIN
         FIN
LABEL    CORONER
         SET   QUITTING,0
         SAY   BLANK
         BIC   ADMIN,NOMAGIC     {reset magic-inhibit mode}
         BIC   ADMIN,TICKER      {clear once-per-move}
         SET   BLOB,0            {reset blob}
         APPORT   BLOB,LIMBO     {and get rid of him}
         APPORT   GOBLINS,LIMBO  {get rid of goblins, if around}
         IFEQ  BASILISK,1        {adjust the basilisk so that}
            SET   BASILISK,0     {he gets viewed from the south}
         ELSE                    {as he should - whether he's}
            IFEQ  BASILISK,3     {petrified or not...}
               SET   BASILISK,2
            FIN
         FIN
         APPORT   FOG,PLAIN.1    {move the fog back to its initial}
         SET   FOG,8             {position, and make it semi-visible}
         ADD   DEATHS,1
         IFGT  CLOSURE,1
            IFEQ  CLOSURE,2
               SAY   DEAD&CLOSED
            ELSE
               SUB   DEATHS,1 {don't charge for dying in repository}
            FIN
            CALL  FINIS
         FIN
         LDA   I,YOUAREDEAD-2
         ADD   I,DEATHS
         ADD   I,DEATHS
         SAY   I
         QUERY  SOK!
            ADD   I,1
            SAY   I
            SAY   BLANK
            LDA   J,SNIDELEY-1
            IFLT  I,J
               IFHAVE   VASE
                  APPORT   VASE,LIMBO
                  GET   POTTERY
               FIN
               ITOBJ I
                  IFHAVE I
                     DROP  I
                  FIN
               EOI
               APPORT   WATER,LIMBO
               APPORT   OIL,LIMBO
               SET   INVCT,0
               SET   LAMP,0
               APPORT   FOG,PLAIN.1
               SET   FOG,8
               CALL  PHOG     {chase glow into place}
               GOTO  BUILDING
               SET   THERE,0
               APPORT   LAMP,ROAD
               IFEQ  LAMPLIFE,0
                  BIT   LAMP,SPECIAL1
                     OR
                     NOT
                  BIT   LAIR,BEENHERE
                     LOCATE   I,BATTERIES
                     IFEQ  BATTERIES,1
                        OR
                        NOT
                     BIT   I,NOTINCAVE
                        APPORT   LAMP,YLEM
                     FIN
                  FIN
               FIN
               APPORT   DWARF,LIMBO
               SET   DWARF,0
               BIC   PIRATE,SPECIAL1   {clear chasing mode}
               QUIT
            ELSE
               CALL  FINIS
            FIN
         ELSE
            CALL  FINIS
         FIN
         STOP
LABEL    GETBIRD
         NEAR  BIRD
         IFHAVE   BIRD
            SAY   YOUHAVEIT
            QUIT
         FIN
         IFEQ  BIRD,1
            GET   CAGE
            GET   BIRD
            SAY   OK
         ELSE
            IFHAVE   CAGE
               IFHAVE   ROD
                  SAY   BIRDISSCARED
               ELSE
                  BIC   BIRDCHAMBER,HINTABLE
                  GET   BIRD
                  SET   BIRD,1
                  SAY   OK
               FIN
            ELSE
               SAY   NEEDCAGE
            FIN
         FIN
         QUIT
LABEL    GETCAGE
         NEAR  CAGE
         IFHAVE   CAGE
            SAY   YOUHAVEIT
            QUIT
         FIN
         GET   CAGE
         IFNEAR   BIRD
            IFEQ  BIRD,1
               GET   BIRD
            FIN
         FIN
         SAY   OK
         QUIT
LABEL    GETKNIFE
         BIT   AXE,SEEN
            SAY   NO..KNIVES
            QUIT
         FIN
LABEL    DROPBIRD
         HAVE  BIRD
         DROP  BIRD
         SET   BIRD,0
         IFNEAR   SNAKE
            SAY   BIRD..SNAKE
            APPORT   SNAKE,LIMBO
            BIC   MTKING,HINTABLE
            QUIT
         ELSE
            IFNEAR   DRAGON
               IFEQ  DRAGON,0
                  APPORT   BIRD,LIMBO  {incinerate bird}
                  SAY   BIRD..DRAGON
                  QUIT
               FIN
            ELSE
               IFNEAR   TROLL
                  SAY   BIRD..TROLL       {ignore bird}
                  QUIT
               ELSE
                  IFNEAR   OGRE
                     SAY   BIRD..OGRE  {dismember the bird}
                     APPORT   BIRD,LIMBO
                     QUIT
                  ELSE
                     IFNEAR   BEAR
                        IFEQ  BEAR,0
                           SAY   BIRD..BEAR  {catch and devour bird}
                           APPORT   BIRD,LIMBO
                        ELSE
                           SAY   BIRD..CALMBEAR
                        FIN
                        QUIT
                     ELSE
                        IFNEAR   BASILISK
                           AND
                        IFLT  BASILISK,2
                           SAY   BIRD..BASILISK {petrify bird and you}
                           APPORT   BIRD,LIMBO
                           CALL  CORONER
                        ELSE
                           IFNEAR   DWARF
                              NAME  BIRD..DWARF,DWARF
                              APPORT   BIRD,LIMBO
                              QUIT
                           FIN
                        FIN
                     FIN
                  FIN
               FIN
            FIN
         FIN
         SAY   OK
         QUIT
LABEL    DROPCAGE
         HAVE  CAGE
         DROP  CAGE
         IFHAVE   BIRD
            DROP  BIRD
         FIN
         SAY   OK
         QUIT
LABEL    DROPVASE
         HAVE  VASE
         DROP  VASE
         IFAT  SOFT
            SAY   OK
         ELSE
            IFHAVE   PILLOW
               OR
               NOT
            IFNEAR   PILLOW
               SET   VASE,2
               SAY   VASE
               APPORT   VASE,LIMBO
               APPORT   POTTERY,HERE
            ELSE
               SET   VASE,1
               SAY   VASE
               SET   VASE,0
            FIN
         FIN
         QUIT
LABEL    DROPLIQUID
         HAVE  ARG2
         APPORT   ARG2,LIMBO
         SET   BOTTLE,1
         IFNEAR   DWARF
            AND
         IFKEY THROW    {throwing oil or water at dwarf - dangerous!}
            IFEQ  DWARF,1
               NAME  DOUSED.DWARF,ARG2
            ELSE
               NAME  DOUSED.DWARVES,ARG2
            FIN
            BIS   DWARF,SPECIAL2    {dwarf gets angry}
         ELSE
            SAY   POURWATER
         FIN
         QUIT
LABEL    DROPBOTTLE
         HAVE  BOTTLE
         DROP  BOTTLE
         APPORT   OIL,LIMBO
         APPORT   WATER,LIMBO
         SAY   OK
         QUIT
LABEL    GETBOTTLE
         NEAR  BOTTLE
         IFHAVE   BOTTLE
            SAY   YOUHAVEIT
            QUIT
         FIN
         IFLT  INVCT,STRENGTH
            GET   BOTTLE
            IFEQ  BOTTLE,0
               GET   WATER
            ELSE
               IFEQ  BOTTLE,2
                  GET OIL
               FIN
            FIN
            SAY   OK
         ELSE
            SAY   ARMSAREFULL
         FIN
         QUIT
LABEL    GETOIL
         AT    EASTPIT
         IFHAVE   BOTTLE
            IFEQ  BOTTLE,1
               SET   BOTTLE,2
               GET   OIL
               SAY   BOTTLE..OIL
            ELSE
               SAY   BOTTLEWASFULL
            FIN
         ELSE
            SAY   NOWAYTOCARRY
         FIN
         QUIT
LABEL    GETWATER
         BIT   HERE,H20HERE
         ELSE
            PROCEED
         FIN
         IFHAVE   BOTTLE
            IFEQ  BOTTLE,1
               SET   BOTTLE,0
               GET   WATER
               SAY   BOTTLE..H20
            ELSE
               SAY   BOTTLEWASFULL
            FIN
         ELSE
            SAY   NOWAYTOCARRY
         FIN
         QUIT
LABEL    KILLTROLL
         SAY   TROLL.DATA
         QUIT
LABEL    KILLBEAR
         IFEQ  BEAR,0
            SAY   KILL..BEAR
         ELSE
            SAY   BEAR.PUZZLED
         FIN
         QUIT
LABEL    KILLSNAKE
         SAY   CANTKILLSNAKE
         QUIT
LABEL    KILLDRAGON
         IFGT  DRAGON,0
            SAY   IT.IS.DEAD
            QUIT
         FIN
         QUERY WITHWHAT?
            SET   DRAGON,1
            SAY   DRAGON
            SET   DRAGON,2
            APPORT   RUG,SECRETCYNNE1
            APPORT   TEETH,SECRETCYNNE1
            BIC   DRAGON,SCHIZOID
            ITOBJ I
               IFNEAR   I
                  IFHAVE   I
                  ELSE
                     APPORT   I,SECRETCYNNE1
                  FIN
               FIN
            EOI
            GOTO  SECRETCYNNE1
         ELSE
            NAME  USE.A.WEAPON,ARG1
            NAME  KILL.THE.WHATEVER,ARG2
         FIN
         QUIT
LABEL    KILLBIRD
         IFLT  CLOSURE,3
            APPORT   BIRD,LIMBO
            SAY   BIRDISDEAD
         ELSE
            SAY   LEAVE.BIRD
         FIN
         QUIT
LABEL    KILLBIVALVE
         SAY   KILL.OYSTER
         QUIT
LABEL    KILLDWARF
         QUERY WITHWHAT?
            SET   I,STRENGTH
            SUB   I,INVCT
            ADD   I,2
            MULT  I,10
            CHANCE   I
               SAY   KILLEDDWARF
               SUB   DWARF,1
               IFEQ  DWARF,0
                  APPORT   DWARF,LIMBO
               FIN
               SUB   DWARFCOUNT,1
            ELSE
               CHANCE   I
                  SAY   DWARFDODGES
               ELSE
                  SAY   DWARFSTABS
                  CALL CORONER
               FIN
            FIN
         ELSE
            NAME  USE.A.WEAPON,ARG1
            NAME  KILL.THE.WHATEVER,ARG2
         FIN
         QUIT
LABEL    KILLOGRE
         QUERY WITHWHAT?
            CHANCE   50
               SAY   OGRE.TOO.TOUGH
            ELSE
               SAY   OGRE.RIPS.HEAD.OFF
               CALL  CORONER
            FIN
         ELSE
            NAME  USE.A.WEAPON,ARG1
            NAME  KILL.THE.WHATEVER,ARG2
         FIN
         QUIT
LABEL    KILLBLOB
         SAY   BOUNCE.BLOB
         QUIT
LABEL    KILLDJINN
         SAY   TOUGH.DJINN
         QUIT
LABEL    KILLGOBLINS
         SAY   KILL.GOBLINS
         CALL  CORONER
LABEL    KILLBASILISK
         IFLT  BASILISK,2
            SAY   HIT.BASILISK
            CALL  CORONER
         ELSE
            SAY   IT.IS.DEAD
            QUIT
         FIN
LABEL    HITGONG
         IFNEAR   TURTLE
            SAY   GONG.RINGS
         ELSE
            SAY   GONG.FETCH
            APPORT   TURTLE,HERE
         FIN
         QUIT
LABEL    GETBEAR
         NEAR  BEAR
         IFHAVE   BEAR
            SAY   I.C.A.BEAR
         ELSE
            IFAT  BEARHERE
               IFEQ  BEAR,2
                  SAY   OK
                  GET BEAR
               ELSE
                  SAY   BEAR.IS.CHAINED
               FIN
            ELSE
               SAY   OK
               GET   BEAR
            FIN
         FIN
         QUIT
LABEL    DROPBEAR
         HAVE  BEAR
         DROP  BEAR
         SAY   OK
         QUIT
LABEL    FREEDJINN
         NEAR  DJINN
         SAY   DJINN.ADVICE
         APPORT   DJINN,LIMBO
         BIS   DJINN,SPECIAL1
         QUIT
LABEL    GETCHAIN
         AT BEARHERE
         NEAR  CHAIN
         IFEQ  CHAIN,0
            PROCEED
         ELSE
            SAY   CHAIN.LOCKED
         FIN
         QUIT
LABEL    GETSWORD
         NEAR  SWORD
         IFEQ  SWORD,0
            AND
         IFLT  INVCT,STRENGTH
            AND
            NOT
         IFHAVE   SWORD
            IFEQ  MUSHROOM,2
               SAY   GOT.THE.SWORD
               SET   SWORD,1
               GET   SWORD
            ELSE
               SAY   SWORD.IS.STUCK
            FIN
            QUIT
         FIN
LABEL    GETSCEPTRE
         NEAR  SCEPTRE
         IFEQ  SCEPTRE,0
            AND
         IFLT  INVCT,STRENGTH
            GET   SCEPTRE
            SET   SCEPTRE,1
            RANDOM   PASSWORD,5
            IFEQ  PASSWORD,0
               LDA   PASSWORD,BLERBI
            ELSE
               IFEQ  PASSWORD,1
                  LDA   PASSWORD,KLAETU
               ELSE
                  IFEQ  PASSWORD,2
                     LDA   PASSWORD,KNERL
                  ELSE
                     IFEQ  PASSWORD,3
                        LDA   PASSWORD,SNOEZE
                     ELSE
                        LDA   PASSWORD,ZORTON
                     FIN
                  FIN
               FIN
            FIN
            IFEQ  SAFE,0
               NAME  WHISPER,PASSWORD
            ELSE
               SAY   BLEW.SAFE
            FIN
            APPORT   SKELETON,LIMBO
            QUIT
         FIN
LABEL    SPLATTER
*
*        Label SPLATTER should be called any time it is desirable to have
*        the adventurer fall to a painful death.  One of a series of
*        text messages will be output, depending on how many times he
*        has been killed so far during this game.  Before calling SPLATTER,
*        the calling routine should GOTO the place that is at the bottom of
*        whatever the adventurer has jumped into - if that place isn't
*        well-defined (bottom of the chasm, volcanic gorge, etc.), then
*        go to Ylem.
*
         LDA   I,PLUMMET
         ADD   I,DEATHS
         SAY   I
         CALL  CORONER
LABEL    DO.CAMEO          {generate strange cameo appearances if possible}
         SET   CAMEO.TIME,0   {only one cameo per game, max}
         BIT   HERE,NOTINCAVE {cameos work only in the cave}
            OR
         BIT   HERE,NODWARF   {and only in dwarf-accessable areas}
            OR
         BIT   HERE,LIT       {and only in un-lit rooms}
            OR
         BIT   HERE,ONE.EXIT  {and only where there are several exits}
            OR
            NOT
         IFHAVE   LAMP        {and only if you have your lamp}
            OR
         IFEQ  LAMP,0         { (which must be turned on) }
            OR
         BIT   PIRATE,SPECIAL1 {and not if the pirate is chasing you}
            OR
         IFNEAR   DWARF       {and not if you're being plagued by dwarves}
            OR
         IFNEAR   DRAGON      {or near the dragon (living or dead) }
            OR
         IFNEAR   TROLL       {or argueing with the troll}
            OR
         IFNEAR   SNAKE       {or trying to get past the snake}
            OR
         IFNEAR   QUICKSAND   {or trying to cross the quicksand}
            PROCEED
         FIN
         LDA   I,CAMEO
         RANDOM   J,LAST.CAMEO-CAMEO+1
         ADD   I,J
         SAY   BLANK
         SAY   I
         SAY   BLANK
LABEL    CLOSE.THE.CAVE
         SAY   GO.REPOSIT
         BIC   STATUS,FASTMODE
         BIC   STATUS,QUICKIE
         ITOBJ I
            LOCATE   J,I
            BIT   J,NOTINCAVE
               OR
            IFHAVE   I
               AND
            BIT   I,PORTABLE
               APPORT   I,YLEM
            FIN
         EOI
         ITPLACE  I
            BIT   I,NOTINCAVE
               BIC   I,BEENHERE
            FIN
         EOI
         SET   CLOSURE,3   {in cylindrical chamber}
         SET   CLOCK,999
         GOTO  CYLINDRICAL
         SET   ESCAPE,0
         QUIT
LABEL    CLOCK4            {administrative clock has ticked}
         IFEQ  CLOSURE,0
            SET   CLOSURE,1
            ITOBJ I
               BIT   I,VALUED
                  AND
                  NOT
               IFLOC I,BUILDING
                  SET   CLOSURE,0
               FIN
            EOI
            IFEQ  CLOSURE,1
               SET   CLOCK,35
            ELSE
               RANDOM   CLOCK,10
               ADD   CLOCK,30
            FIN
            IFGT  SCULPTURE,0
               RANDOM   SCULPTURE,@SCULPTURE-1    {skip the "on shelf" state}
               ADD   SCULPTURE,1
            FIN
            IFGT  SWORD,0
               RANDOM   SWORD,@SWORD-1      {skip the "in stone" state}
               ADD   SWORD,1
            FIN
            IFEQ  DRAGON,2
               SUB   DRAGTIME,LASTCLOCK
               IFLT  DRAGTIME,0
                  SET   DRAGON,3
               FIN
            FIN
            BIT   DJINN,SPECIAL1
               AND
               NOT
            BIT   DJINN,SPECIAL2
               AND
               NOT
            IFNEAR   DWARF
               BIS   DJINN,SPECIAL2
               SAY   PHUGGG.DATA
               SET   CLOCK,5
               SET   LASTCLOCK,CLOCK
               PROCEED
            FIN
            IFGT  MUSHROOM,1
               SUB   MUSHTIME,LASTCLOCK
               IFLT  MUSHTIME,0
                  IFEQ  MUSHROOM,2
                     SET   MUSHROOM,3
                     SET   MUSHTIME,40
                     SAY   MUSHROOM
                     SET   STRENGTH,7
                     SET   CLOCK,8
                     SET   LASTCLOCK,CLOCK
                     PROCEED
                  ELSE
                     SET   MUSHROOM,0
                     APPORT   MUSHROOM,CUBICLE
                  FIN
               FIN
            FIN
            IFGT  CAMEO.TIME,0
               AND
            IFLT  CAMEO.TIME,MOVES
               RANDOM   CLOCK,10
               ADD   CLOCK,10
               CALL  DO.CAMEO
               SET   LASTCLOCK,CLOCK
               PROCEED
            FIN
            BIT   MISTS,BEENHERE
               OR
            BIT   Y2,BEENHERE
               BIT   HERE,NOTINCAVE
                OR
               BIT   HERE,NODWARF
                  RANDOM   CLOCK,10
                  ADD   CLOCK,8
                ELSE
                  IFGT  MOVES,150      {have we been here a while without}
                   AND
                   NOT
                  BIT   PIRATE,SEEN    {seeing him at least once?}
                   OR
                  BIT   PIRATE,SPECIAL1   {or, was he chasing us?}
                   OR
                  CHANCE   15          {or, 15% of the time}
                   AND
                   NOT
                  BIT   CHEST,SEEN     {haven't found his chest yet}
                   AND
                   NOT
                  IFNEAR   DWARF       {and, not under attack by dwarves}
                   AND
                   NOT
                  BIT   HERE,LIT       {and, this place is dark}
                   AND
                  IFHAVE   LAMP        {and, we have the lamp}
                   AND
                  IFGT  LAMP,0         {and, and it's shining}
                     BIC   PIRATE,SPECIAL1      {clear "chasing"}
                     SET   J,0
                     BIC   RING,VALUED {so it doesn't get stolen}
                     ITLIST   I
                        BIT   I,VALUED
                           AND
                        IFNEAR   I
                           APPORT   I,MAZEA.114
                           SET   J,1
                        FIN
                     EOI
                     BIS   RING,VALUED
                     IFEQ  J,0
                         NOT
                        BIT   PIRATE,SEEN    {first time thru?}
                           AND
                        IFGT  MOVES,150   {have we been here a while?}
                           APPORT   CHEST,MAZEA.114
                           APPORT   MESSAGE,MAZED.140
                           SAY   PIRATE.RUNS
                           BIS   PIRATE,SEEN
                        ELSE
                           SAY   RUSTLING
                           BIS   PIRATE,SPECIAL1    {set "following"}
                           RANDOM   CLOCK,10
                           ADD      CLOCK,4
                        FIN
                     ELSE
                        BIT   PIRATE,SEEN
                           SAY   PIRATE.ZOT.2
                          ELSE
                           SAY   PIRATE..ZOTZ
                           BIS   PIRATE,SEEN
                           APPORT   CHEST,MAZEA.114
                           APPORT   MESSAGE,MAZED.140
                        FIN
                     FIN
                    ELSE      {don't invoke pirate}
                     SET   I,DWARFCOUNT
                     ADD   I,2
                     MULT  I,10
                     IFNEAR   DWARF
                      OR
                     CHANCE   I
                      AND
                     IFLT  DWARF,DWARFCOUNT  {more dwarves left...}
                        BIT   AXE,SEEN    {seen first dwarf?}
                           APPORT   DWARF,HERE
                           ADD   DWARF,1
                           IFEQ  DWARF,1
                              SAY   DWARF {announce him}
                              BIS   DWARF,SPECIAL1  {first knife not thrown}
                              BIC   DWARF,SPECIAL2  {not enraged}
                           FIN
                          ELSE   {first dwarf, coming up!}
                           APPORT   AXE,HERE
                           BIS   AXE,SEEN
                           SAY   FIRSTDWARF
                        FIN
                     FIN
                  FIN
               FIN
            FIN
         ELSE
            IFEQ  CLOSURE,1   {is it near closing time?}
               SET   CLOSURE,2   {set "Closing soon"}
               SET   GRATE,0     {lock the grate}
               SAY   CLOSING.NOW {Sepulchral voice}
               IFNEAR   DWARF
                  VALUE DWARF.QUITS,DWARF {fades into the gloom}
               FIN
               APPORT   DWARF,LIMBO {get rid of him/them}
               SET   DWARF,0  {zilch all present dwarves}
               SET   DWARFCOUNT,0   {don't let him reappear}
               SET   FISSURE,0      {destroy bridge}
               SET   GORGE,0        {destroy wheatstone bridge}
               APPORT   TROLL,LIMBO {remove troll}
               APPORT   DRAGON,LIMBO {remove dragon}
               SET   TROLL,5        {scared - inhibit return}
               APPORT   TROLL2,SWOFCHASM {fetch fake troll}
               BIS   FISSURE,INVISIBLE
               BIS   GORGE,INVISIBLE
               SET   CLOCK,25       {time to try to leave}
            ELSE        {must be closing time!}
               BIT   ADMIN,PANICED  {did he try to get out?}
                  BIC   ADMIN,PANICED {reset panic flag}
                  SET   CLOCK,15    {let him get frantic}
               ELSE                 {if he was calm,}
                  CALL  CLOSE.THE.CAVE
               FIN
            FIN
         FIN
         SET   LASTCLOCK,CLOCK
LABEL    BAILOUT
         IFEQ  STATUS,1
            NAME  CLARIFY,ARG1
            BIS   STATUS,PLS.CLARIFY   {request clarification}
         ELSE
            IFEQ  STATUS,2
               AND
            BIT   ARG2,OBJECT
               IFNEAR   ARG2
                  NAME  DUNNO.HAO,ARG1
               ELSE
                  NAME  IDONTSEE,ARG2
               FIN
            ELSE
               NAME  DUNNO.HAO,ARG1
            FIN
         FIN
         QUIT
LABEL    LAMPREY          {Lamp getting dim or has gone out}
         IFGT  LAMPLIFE,0
            IFEQ  BATTERIES,1
               SAY   LAMP.NOFUEL
            ELSE
               IFNEAR   BATTERIES
                  SAY   LAMP.REFUEL
                  SET   BATTERIES,1
                  ADD   LAMPLIFE,300
                  BIC   LAMP,SPECIAL1     {clear "recharged" flag}
               ELSE
                  BIT   BATTERIES,SEEN
                     SAY   LAMP.BATTERIES
                  ELSE
                     SAY   LAMP.IS.DIM
                  FIN
               FIN
            FIN
         ELSE
            IFEQ  CLOSURE,2
               CALL  CLOSE.THE.CAVE
            ELSE
               IFNEAR   BATTERIES
                  AND
               IFEQ  BATTERIES,0
                  SAY   LAMP.REFUEL
                  SET   BATTERIES,1
                  ADD   LAMPLIFE,300
               ELSE
                  SAY   LAMP.IS.DEAD
                  SET   LAMP,0
                  BIS   ADMIN,RANOUT      {don't fall in a pit this move}
                  CALL  PHOG     {chase glow into place}
               FIN
            FIN
         FIN
LABEL    READ.MAGAZINES
         SAY   MAG.DWARVISH
         QUIT
LABEL    READ.TABLET
         SAY   DARK.ROOM
         QUIT
LABEL    READ.MESSAGE
         SAY   CHEST.ELSEWHERE
LABEL    READ.MACHINE
         SAY   MACHINE.SIGN
         QUIT
LABEL    HINT.LOGIC
         SET   I,0
         IFAT  DEPRESSION
            IFEQ  GRATE,0
               NOT
               IFHAVE   KEYS
                  LDA   I,LOOKINGCAVE
               FIN
            FIN
         FIN
         IFAT  BIRDCHAMBER
            IFNEAR   BIRD
               IFEQ  BIRD,0
                  IFHAVE   ROD
                     LDA   I,BIRDHINT?
                  FIN
               FIN
            FIN
         FIN
         IFAT  MTKING
            IFNEAR   SNAKE
               NOT
               IFNEAR   BIRD
                  LDA   I,GETPASTSNAKE
               FIN
            FIN
         FIN
         IFAT  WITTSEND
            LDA   I,HINT.WITTS?
         FIN
         IFAT  PLOVER
            OR
         IFAT  ALCOVE
            OR
         IFAT  DARK
            NOT
            BIT   DARK,BEENHERE
               LDA   I,HINT.PLOVER?
            FIN
         FIN
         IFAT  PLAIN.2
            LDA   I,PLAIN.HINT
         FIN
         BIT   HERE,INMAZE
            LDA   I,HINT.MAZE?
         FIN
         LDA   J,SLIDE-1
         LDA   K,ICECAVE.30+1
         IFGT  HERE,J
            AND
         IFLT  HERE,K
            LDA   I,ICE.HINT?
         FIN
         IFGT  I,0
            SET   HINT.TIME,0
            QUERY I
               VALUE ILL.GIVE.HINT,HINT.COST
               QUERY WANT.HINT?
                  ADD   I,1
                  SAY   I
                  ADD   PENALTIES,HINT.COST
                  BIC   HERE,HINTABLE
                  IFAT  PLOVER
                     OR
                  IFAT  ALCOVE
                     OR
                  IFAT  DARK
                     BIC   PLOVER,HINTABLE
                     BIC   DARK,HINTABLE
                     BIC   ALCOVE,HINTABLE
                  ELSE
                     BIT   HERE,INMAZE
                        ITPLACE  I
                           BIT   I,INMAZE
                              BIC   I,HINTABLE
                           FIN
                        EOI
                     FIN
                  FIN
               FIN
            FIN
         FIN
LABEL    NO.MOVE.POSSIBLE
         IFNEAR   LAMP
            AND
         IFEQ     LAMP,1
            OR
         BIT   HERE,LIT
            IFKEY GO
               SET   I,ARG2
            ELSE
               SET   I,ARG1
            FIN
            RANDOM   J,OGNACON-NOCANGO+1
            LDA   K,NOCANGO
            ADD   J,K
            NAME  J,I
         ELSE
            CHANCE   25
               SAY   CRUNCH
               CALL  CORONER
            ELSE
               SAY   OOF!
            FIN
         FIN
         IFNEAR   LAMP
            AND
         IFEQ  LAMP,1
            SUB   LAMPLIFE,1
            IFEQ  LAMPLIFE,0
               OR
            IFEQ  LAMPLIFE,40
               CALL  LAMPREY
            FIN
         FIN
         QUIT
LABEL    BREAK.VIAL
         APPORT   VIAL,LIMBO
         SAY   VIAL.BANG
         RANDOM   I,LAST.FUME-FIRST.FUME+1
         LDA   J,FIRST.FUME
         ADD   I,J
         SAY   I
         SAY   BLANK
         IFNEAR   DWARF
            IFEQ  DWARF,1
               SET   VIAL,1
            ELSE
               SET   VIAL,2
            FIN
            SAY   VIAL
            APPORT   DWARF,LIMBO
            SUB   DWARFCOUNT,DWARF
            SET   DWARF,0
         FIN
         IFNEAR   TROLL
            SET   VIAL,3
            SAY   VIAL
         FIN
         IFNEAR   BEAR
            SET   VIAL,4
            IFGT  BEAR,0
               SET   VIAL,5
            FIN
            SAY   VIAL
         FIN
         IFNEAR   SNAKE
            SET   VIAL,6
            SAY   VIAL
         FIN
         IFNEAR   BIRD
            SET   VIAL,7
            SAY   VIAL
         FIN
         IFNEAR   SLIME
            SET   VIAL,8
            SAY   VIAL
            APPORT   SLIME,LIMBO
         FIN
         IFNEAR   DRAGON
            AND
         IFEQ  DRAGON,0
            SET   VIAL,9
            SAY   VIAL
         FIN
         IFNEAR   DJINN
            SET   VIAL,10
            SAY   VIAL
         FIN
         IFNEAR   BASILISK
            AND
         IFLT  BASILISK,2
            SET   VIAL,11
            SAY   VIAL
         FIN
         IFNEAR   GOBLINS
            SET   VIAL,12
            SAY   VIAL
            APPORT   GOBLINS,LIMBO
         FIN
         QUIT
LABEL    DROPVIAL
         IFHAVE   VIAL
            AND
         CHANCE   10
            SAY   VIAL.EXPLODES
            APPORT   VIAL,LIMBO
            CALL  CORONER
         FIN
LABEL    DWARF.ATTACK
*
*        This label handles knife attacks by dwarves.  It should be
*        called with the variable FLEETFOOT set to the "survival asset" of
*        whatever the adventurer was doing (0 for just attacked, 50
*        or so for running, 25 for neither) to reflect the ease with
*        which the dwarf can hit the dude.
*
         SET   J,DWARF  {how many dwarves are here?}
         ADD   J,2      {stretch the odds on knive-throwing a bit}
         RANDOM   J,J   {get # of knives, + 1}
         SUB   J,1      {get # of knives thrown}
         IFLT  J,1      {any actually thrown?}
            PROCEED     {if not, just go back}
         FIN
         VALUE KNIVESTHROWN,J {tell him that he's under attack}
         SET   K,STRENGTH  {let's figure out how agile he is at}
         SUB   K,INVCT     {the moment....}
         MULT  K,5         {5 points per object that he could carry..}
         BIT   DWARF,SPECIAL2  {is dwarf angry (more accurate) ? }
            SUB   K,20     {if so, he's probably in trouble}
         FIN
         ADD   FLEETFOOT,K   {add in the "fleet-foot" compensating factor}
         ADD   FLEETFOOT,35  {give him some chance even if he's loaded down}
         DIVIDE   FLEETFOOT,J   {chances are poor if > 1 knife thrown!}
         IFHAVE   RING     {magic ring will usually defend you}
            RANDOM   I,LAST.DEFLECTOR-FIRST.DEFLECTOR+2 {but not always!}
            IFGT  I,0   {if we got a zero, it doesn't help!}
               LDA   K,FIRST.DEFLECTOR-1
               ADD   I,K   {generate address of defense message}
               VALUE I,J   {tell him that he's been reprieved this time}
               PROCEED     {let 'im off for this once}
            FIN
         FIN
         CHANCE   FLEETFOOT {ok - did they all miss him?}
            OR
         BIT   DWARF,SPECIAL1    {is this the first attack recently?}
            VALUE KNIVESMISS,J   {he's safe this time - whew!}
            BIC   DWARF,SPECIAL1 {clear "first attack" flag}
         ELSE     {oh-oh - he's been stabbed!}
            VALUE KNIVESGOTYOU,J {tell him the bad news}
            CALL  CORONER     {go clean up the bloody mess on the floor}
         FIN
LABEL    WEAPONRY.2     {handle more attack stuff}
         IFNEAR   BASILISK
            IFGT  BASILISK,1
               SAY   IT.IS.DEAD
               IFKEY THROW
                  GET   ARG2
               FIN
            ELSE
               NAME  AXE.BASILISK,ARG2
               CALL  CORONER
            FIN
         ELSE
            IFNEAR   DJINN
               NAME  REBOUND,ARG2
            ELSE
               IFNEAR   GOBLINS
                  NAME   KILL.A.FEW,ARG2
                  CALL  CORONER
               ELSE
                  IFKEY THROW {throwing weapon with no target}
                     GET   ARG2  {will cause us to wade into the}
                     PROCEED  {cause us to throw it to another place}
                  ELSE
                     SAY   OK
                  FIN
               FIN
            FIN
         FIN
         QUIT
LABEL    WEAPONRY    {Handle attacks with weapons}
         IFHAVE   ARG2
            IFKEY THROW
               DROP  ARG2
            FIN
            IFNEAR   DWARF
               SET   I,STRENGTH
               SUB   I,INVCT
               MULT  I,5
               SET   J,DWARF
               ADD   J,2
               MULT  J,15
               ADD   I,J
               IFKEY AXE
                  EOR
               IFKEY SWING
                  ADD   I,15
               FIN
               CHANCE   I
                  CHANCE   5
                     AND
                     NOT
                  BIT   ADMIN,QUIPPED
                     NAME  DWARF.QUIP,ARG2
                     BIS   ADMIN,QUIPPED
                   ELSE
                     SAY   DWARF.POOF
                  FIN
                  SUB   DWARF,1
                  IFEQ  DWARF,0
                     APPORT   DWARF,LIMBO
                  ELSE
                     SET   FLEETFOOT,0
                     SET   BACKLASH,100
                  FIN
                  SUB   DWARFCOUNT,1
               ELSE
                  SAY   DWARFDODGES
                  SET   FLEETFOOT,0   {low "fleet foot" factor}
                  SET   BACKLASH,100     {dwarves will probably fight back}
               FIN
            ELSE
               IFNEAR   SNAKE
                  SAY   CANTKILLSNAKE
                  IFKEY THROW
                     GET   ARG2
                  FIN
               ELSE
                  IFNEAR   DRAGON
                     NAME   KILL.DRAGON,ARG2
                  ELSE
                     IFNEAR   BEAR
                        IFEQ  BEAR,0
                           IFKEY THROW
                              IFKEY AXE
                                 SAY   AXE..BEAR
                                 SET   AXE,1
                              ELSE
                                 SAY   SWORD.MISSES
                              FIN
                           ELSE
                              CHANCE   50
                                 SAY   BEAR.MISSES
                              ELSE
                                 SAY   BEAR.GETS.YOU
                                 CALL  CORONER
                              FIN
                           FIN
                        ELSE
                           SAY   BEAR.PUZZLED
                        FIN
                        QUIT
                     ELSE
                        IFNEAR   TROLL
                           SAY   TROLL.DATA
                        ELSE
                           IFNEAR   OGRE
                              IFKEY SWING
                                 NAME  OGRE.REBUFF,ARG2
                                 CALL  CORONER
                              ELSE
                                 IFKEY AXE
                                    NAME  OGRE.CATCH,ARG2
                                    CALL  CORONER
                                 ELSE
                                    SAY   OGRE.KILLED
                                    APPORT   SWORD,LIMBO
                                    APPORT   OGRE,LIMBO
                                    APPORT   RING,HERE
                                    QUIT
                                 FIN
                              FIN
                           ELSE
                              IFNEAR   BLOB
                                 NAME  SLICE.BLOB,ARG2
                                 QUIT
                              ELSE
                                 CALL WEAPONRY.2
                                 PROCEED  {if no attack, use normal}
                              FIN   {"THROW" logic (see UPCHUCK)}
                           FIN
                        FIN
                     FIN
                  FIN
               FIN
            FIN
         ELSE
            NAME  YOUDONTHAVE,ARG2
         FIN
         QUIT
LABEL    PASSPHRASE
         IFNEAR   SAFE
            IFEQ  SAFE,0
               IFEQ  STATUS,2
                  AND
               IFEQ  ARG2,PASSWORD
                  OR
               IFEQ  ARG1,PASSWORD
                  SAY   SAFE.OPENS
                  SET   SAFE,1
                  BIS   SAFE,SPECIAL1
                  QUIT
               ELSE
                  NOT
                  BIT   SAFE,SPECIAL1
                     SAY   SAFE.FUSES
                     SET   SAFE,2            {melt the safe's door shut}
                     SET   BLOB,1            {wake up the blob}
                     BIS   ADMIN,TICKER      {BLOB is chasing us - quickly!}
                     BIS   ADMIN,NOMAGIC     {inhibit PLUGH etc.}
                     SET   GRATE,0           {lock him in the cave}
                     QUIT
                  FIN
               FIN
            FIN
         FIN
         SAY   NOTHING
         QUIT
LABEL    TICK     {once-per-input routine}
         IFGT  BLOB,0
            IFEQ  BLOB,16     {special case for blob}
               SET   BLOB,17
               SAY   BLOB
               CALL  CORONER
            FIN
            SAY   BLOB
            ADD   BLOB,1
         FIN
LABEL    PRESAY
         IFGT  STATUS,1
            NAME  SAID,ARG2
         FIN
LABEL    PLUNGE   {for plunging into a bottomless pit}
         GOTO YLEM
         IFEQ  LAMP,1
            SET   LAMPLIFE,0
            IFHAVE   LAMP
               SAY   FALL&STARVE
            ELSE
               SAY   FALL&STARVED
            FIN
         ELSE
            SAY   FALL&STARVED
         FIN
         CALL  CORONER
LABEL    UPCHUCK
         SET   I,0
         IFAT PIT
            LDA   I,THROW.PIT
            LDA   J,MISTS
         FIN
         IFAT EASTOFFISSUR
            LDA   I,THROW.FISSURE
            LDA   J,CAVERN
         FIN
         IFAT WESTOFFISSUR
            LDA   I,THROW.FISSURE
            LDA   J,CAVERN
         FIN
         IFAT WEND2PIT
            LDA   I,THROW.PIT
            LDA   J,WESTPIT
         FIN
         IFAT EEND2PIT
            LDA   I,THROW.PIT
            LDA   J,EASTPIT
         FIN
         IFAT LOWNSPASSAGE
            LDA   I,THROW.HOLE
            LDA   J,DIRTY
         FIN
         IFAT WINDOW
            LDA   I,THROW.PIT
            LDA   J,MIRRORCNYN
         FIN
         IFAT WINDOW2
            LDA   I,THROW.PIT
            LDA   J,MIRRORCNYN
         FIN
         IFAT BRINK
            LDA   I,THROW.PIT
            LDA   J,STREAMPIT
         FIN
         IFAT DUSTY
            LDA   I,THROW.HOLE
            LDA   J,COMPLEX
         FIN
         IFAT MAZEA.57.PIT
            LDA   I,THROW.PIT
            LDA   J,BIRDCHAMBER
         FIN
         IFAT SECRETNSCYN
            LDA   I,THROW.ROOM
            LDA   J,SLAB
         FIN
         IFAT SECRETNSCPAS
            LDA   I,THROW.ROOM
            LDA   J,BEDQUILT
         FIN
         IFAT SECRETEW.TITE
            LDA   I,THROW.CANYON
            LDA   J,NSCANYONWIDE
         FIN
         IFAT INCLINE
            LDA   I,THROW.ROOM
            LDA   J,LOW
         FIN
         IFAT CAVERN
            LDA   I,THROW.WHIRLPOOL
            LDA   J,YLEM
         FIN
         IFAT MISTY
            LDA   I,THROW.CAVERN
            LDA   J,CAVERN
         FIN
         IFAT STALACT
            LDA   I,THROW.ROOM
            LDA   J,MAZEA.53
         FIN
         IFAT  RESERVOIR
            OR
         IFAT  RESERVOIR.N
            LDA   I,THROW.RESERVOIR
            LDA   J,YLEM
         FIN
         IFAT BALCONY
            LDA   I,THROW.ROOM
            LDA   J,YLEM
         FIN
         IFAT SWOFCHASM
            LDA   I,THROW.CHASM
            LDA   J,YLEM
         FIN
         IFAT NEOFCHASM
            LDA   I,THROW.CHASM
            LDA   J,YLEM
         FIN
         IFAT BREATHTAKER
            LDA   I,THROW.GORGE
            LDA   J,YLEM
         FIN
         IFAT FACES
            LDA   I,THROW.GORGE
            LDA   J,YLEM
         FIN
         IFAT TUBE
            LDA   I,THROW.CHIMNEY
            LDA   J,CHIMNEY
         FIN
         IFAT TUBE.SLIDE
            LDA   I,THROW.TUBE
            LDA   J,PLAIN.1
         FIN
         IFAT BASQUE.FORK
            LDA   I,THROW.STEPS
            LDA   J,ON.STEPS
         FIN
         IFAT ON.STEPS
            LDA   I,THROW.STEPS
            LDA   J,STEPS.EXIT
         FIN
         IFAT STEPS.EXIT
            LDA   I,THROW.STEPS
            LDA   J,STORAGE
         FIN
         IFAT BRINK.1
            LDA   I,THROW.PIT
            LDA   J,YLEM
         FIN
         IFAT BRINK.2
            LDA   I,THROW.PIT
            LDA   J,YLEM
         FIN
         IFAT ICE
            LDA   I,THROW.SLIDE
            LDA   J,SLIDE
         FIN
         IFAT BRINK.3
            LDA   I,THROW.PIT
            LDA   J,YLEM
         FIN
         IFAT SHELF
            LDA   I,THROW.BEACH
            LDA   J,BEACH
         FIN
         IFAT PLATFORM
            LDA   I,THROW.GORGE
            LDA   J,YLEM
         FIN
         IFEQ  I,0   {"THROWER" bit set but can't find target}
            OR
         IFKEY BEAR     {you can't throw bear into chasm!}
            PROCEED
         FIN
         NAME  I,ARG2
         APPORT   ARG2,J
         IFKEY VASE
            APPORT   VASE,YLEM
            APPORT   SHARDS,J
            LDA   I,YLEM
            IFEQ  I,J
            ELSE
               SAY   SHATTERED.IT
            FIN
         FIN
         IFKEY BOTTLE
            APPORT   OIL,LIMBO
            APPORT   WATER,LIMBO
         FIN
         IFKEY OIL
            OR
         IFKEY WATER
            SET   BOTTLE,1    {threw liquid away - drain bottle}
            APPORT   ARG2,LIMBO
         FIN
         IFKEY CAGE
            AND
         IFHAVE   BIRD
            APPORT   BIRD,J
         FIN
         IFKEY LAMP
            AND
         IFEQ  LAMP,1
            AND
            NOT
         BIT   HERE,LIT
            SAY   ITISNOWDARK
         FIN
         IFKEY BIRD
            SET   BIRD,0
         FIN
         QUIT
LABEL    GROPE.FOR.IT   {grope around in the dark for objects}
         IFEQ  STATUS,1 {did jhe say what to get?}
            SAY   CANT.SEE.ANYTHING
            QUIT
         FIN
         BIT   ARG2,OBJECT
            IFHAVE   ARG2
               OR
               NOT
            BIT   ARG2,PORTABLE
               PROCEED
            FIN
            SET   I,INVCT
            SUB   I,STRENGTH
            MULT  I,5
            ADD   I,60
            CHANCE   I
               NAME  GROPE.FALL,ARG2
               CALL  CORONER
            ELSE
               NAME  GROPE.MISS,ARG2
               QUIT
            FIN
         FIN
AT       ROAD
         MOVE ROAD,HILL
         MOVE WEST,HILL
         MOVE UP,HILL
         MOVE ENTER,BUILDING
         MOVE BUILDING,BUILDING
         MOVE INWARD,BUILDING
         MOVE EAST,BUILDING
         MOVE DOWNSTREAM,VALLEY
         MOVE GULLY,VALLEY
         MOVE STREAM,VALLEY
         MOVE SOUTH,VALLEY
         MOVE DOWN,VALLEY
         MOVE FOREST,FOREST
         MOVE NORTH,FOREST
         MOVE EAST,FOREST
         MOVE DEPRESSION,DEPRESSION
AT       HILL
         MOVE ROAD,ROAD
         MOVE BUILDING,ROAD
         MOVE FORWARD,ROAD
         MOVE EAST,ROAD
         MOVE NORTH,ROAD
         MOVE FOREST,FOREST
         MOVE NORTH,FOREST
         MOVE SOUTH,FOREST
AT       BUILDING
         MOVE ROAD,ROAD
         MOVE OUT,ROAD
         MOVE OUTDOORS,ROAD
         MOVE WEST,ROAD
         IFLT  CLOSURE,2      {is the cave open?}
            SMOVE XYZZY,DEBRIS,FOOF
            SMOVE PLUGH,Y2,FOOF
         FIN
AT       BUILDING
         ANYOF STREAM,DOWNSTREAM
         SAY   PIPEFIT
         QUIT
AT       VALLEY
         MOVE UPSTREAM,ROAD
         MOVE BUILDING,ROAD
         MOVE NORTH,ROAD
         MOVE FOREST,FOREST
         MOVE EAST,FOREST
         MOVE WEST,FOREST
         MOVE UP,FOREST
         MOVE DEPRESSION,DEPRESSION
         ANYOF SOUTH,DOWN,DOWNSTREAM
         IFLT  CLOSURE,2
            GOTO  SLIT
         ELSE
            GOTO  FAKE.SLIT
         FIN
         QUIT
AT       FOREST
         MOVE VALLEY,VALLEY
         MOVE EAST,VALLEY
         MOVE DOWN,VALLEY
         MOVE WEST,FOREST
         MOVE SOUTH,FOREST
AT       FOREST
         ANYOF     FOREST,FORWARD,NORTH
         CHANCE    50
             GOTO FOREST
         ELSE
             GOTO FOREST2
         FIN
         QUIT
AT       FOREST2
         MOVE ROAD,ROAD
         MOVE NORTH,ROAD
         MOVE VALLEY,VALLEY
         MOVE EAST,VALLEY
         MOVE WEST,VALLEY
         MOVE DOWN,VALLEY
         MOVE FOREST,FOREST
         MOVE SOUTH,FOREST
AT       SLIT
         MOVE BUILDING,ROAD
         MOVE UPSTREAM,VALLEY
         MOVE NORTH,VALLEY
         MOVE FOREST,FOREST
         MOVE EAST,FOREST
         MOVE WEST,FOREST
         MOVE DOWNSTREAM,DEPRESSION
         MOVE ROCK,DEPRESSION
         MOVE BED,DEPRESSION
         MOVE SOUTH,DEPRESSION
AT       FAKE.SLIT
         MOVE BUILDING,ROAD
         MOVE UPSTREAM,VALLEY
         MOVE NORTH,VALLEY
         MOVE FOREST,FOREST
         MOVE EAST,FOREST
         MOVE WEST,FOREST
         MOVE DOWNSTREAM,DEPRESSION
         MOVE ROCK,DEPRESSION
         MOVE BED,DEPRESSION
         MOVE SOUTH,DEPRESSION
AT       SLIT
         ANYOF     SLIT,STREAM,DOWN,ENTER
         SAY  DONTFITSLIT
         QUIT
AT       FAKE.SLIT
         ANYOF SLIT,STREAM,DOWN,ENTER
         SET   CLOSURE,5      {victory!}
         BIC   STATUS,FASTMODE
         BIC   STATUS,QUICKIE
         SAY   TREASUREROOM   {describe the booty}
         SET   QUITTING,0
         CALL  FINIS          {end the game in triumph}
AT       DEPRESSION
         MOVE FOREST,FOREST
         MOVE EAST,FOREST2
         MOVE WEST,FOREST
         MOVE SOUTH,FOREST2
         MOVE BUILDING,ROAD
         ANYOF UPSTREAM,GULLY,NORTH,SLIT
         IFLT  CLOSURE,2
            GOTO  SLIT
         ELSE
            GOTO  FAKE.SLIT
         FIN
         QUIT
AT       DEPRESSION
         ANYOF     IN,DOWN,ENTER
         IFEQ GRATE,1
             GOTO INCAVE
         ELSE
             SAY  CANTPASSLOCK
         FIN
         QUIT
AT       INCAVE
         ANYOF     UP,OUT,LEAVE,SURFACE
         IFEQ GRATE,1
             GOTO DEPRESSION
         ELSE
             SAY  CANTPASSLOCK
         FIN
         QUIT
AT       INCAVE
         MOVE CRAWL,COBBLES
         MOVE COBBLES,COBBLES
         MOVE INWARD,COBBLES
         MOVE WEST,COBBLES
         MOVE PIT,PIT
         MOVE DEBRIS,DEBRIS
AT       COBBLES
         MOVE OUT,INCAVE
         MOVE SURFACE,INCAVE
         MOVE NULL,INCAVE
         MOVE ENTRANCE,INCAVE
         MOVE EAST,INCAVE
         MOVE INWARD,DEBRIS
         MOVE DARK,DEBRIS
         MOVE WEST,DEBRIS
         MOVE DEBRIS,DEBRIS
         MOVE PIT,PIT
AT       DEBRIS
         MOVE ENTRANCE,INCAVE
         MOVE CRAWL,COBBLES
         MOVE COBBLES,COBBLES
         MOVE PASSAGE,COBBLES
         MOVE LOW,COBBLES
         MOVE EAST,COBBLES
         MOVE CANYON,CANYON
         MOVE INWARD,CANYON
         MOVE UP,CANYON
         MOVE WEST,CANYON
         MOVE PIT,PIT
         IFEQ  GRATE,1
            MOVE  DEPRESSION,DEPRESSION
         ELSE
            SMOVE DEPRESSION,INCAVE,CANTPASSLOCK
         FIN
AT       DEBRIS
         KEYWORD  XYZZY
         IFGT  CLOSURE,1
            OR
         BIT   ADMIN,NOMAGIC
            SAY   NOTHING
            BIS   ADMIN,PANICED
            QUIT
         ELSE
            SMOVE XYZZY,BUILDING,FOOF
         FIN
         QUIT
AT       CANYON
         MOVE ENTRANCE,INCAVE
         MOVE DOWN,DEBRIS
         MOVE EAST,DEBRIS
         MOVE DEBRIS,DEBRIS
         MOVE INWARD,BIRDCHAMBER
         MOVE UP,BIRDCHAMBER
         MOVE WEST,BIRDCHAMBER
         MOVE PIT,PIT
         IFEQ  GRATE,1
            MOVE  DEPRESSION,DEPRESSION
         ELSE
            SMOVE DEPRESSION,INCAVE,CANTPASSLOCK
         FIN
AT       BIRDCHAMBER
         MOVE ENTRANCE,INCAVE
         MOVE DEBRIS,DEBRIS
         MOVE CANYON,CANYON
         MOVE EAST,CANYON
         MOVE PASSAGE,PIT
         MOVE PIT,PIT
         MOVE WEST,PIT
         IFEQ  GRATE,1
            MOVE  DEPRESSION,DEPRESSION
         ELSE
            SMOVE DEPRESSION,INCAVE,CANTPASSLOCK
         FIN
AT       PIT
         MOVE ENTRANCE,INCAVE
         MOVE DEBRIS,DEBRIS
         MOVE PASSAGE,BIRDCHAMBER
         MOVE EAST,BIRDCHAMBER
         MOVE DOWN,MISTS
         IFEQ  GRATE,1
            MOVE  DEPRESSION,DEPRESSION
         ELSE
            SMOVE DEPRESSION,INCAVE,CANTPASSLOCK
         FIN
AT       PIT
         ANYOF     DOWN,STEPS,PIT
         IFHAVE    GOLD
             SAY  BROKENECK
               GOTO MISTS
             CALL CORONER
         ELSE
             GOTO MISTS
         FIN
         QUIT
AT       PIT
         ANYOF     WEST,CRACK
         SAY  MISTCRACK
         QUIT
AT       PIT
         KEYWORD  JUMP
         GOTO  MISTS
         CALL  SPLATTER
         QUIT
AT       MISTS
         MOVE LEFT,GOLDROOM
         MOVE SOUTH,GOLDROOM
         MOVE  EAST,SANDSTONE
         MOVE FORWARD,EASTOFFISSUR
         MOVE HALL,EASTOFFISSUR
         MOVE WEST,EASTOFFISSUR
         MOVE STAIRS,MTKING
         MOVE DOWN,MTKING
         MOVE NORTH,MTKING
         MOVE Y2,JUMBLE
AT       MISTS
         ANYOF     UP,PIT,STEPS,DOME,PASSAGE,ENTER
         IFHAVE    GOLD
             SAY  UNCLIMBABLE
         ELSE
             GOTO PIT
         FIN
         QUIT
AT       EASTOFFISSUR
         MOVE HALL,MISTS
         MOVE EAST,MISTS
AT       EASTOFFISSURE
         ANYOF     FORWARD,OVER,WEST
         IFEQ FISSURE,0
            SAY   NOWAYACROSS
         ELSE
             GOTO WESTOFFISSURE
         FIN
         QUIT
AT       EASTOFFISSURE
         KEYWORD   JUMP
         IFEQ FISSURE,1
             SAY  TRYTHEBRIDGE
         ELSE
            GOTO  CAVERN
            CALL  SPLATTER
         FIN
         QUIT
AT       GOLDROOM
         MOVE HALL,MISTS
         MOVE OUT,MISTS
         MOVE NORTH,MISTS
AT       MTKING
         MOVE STAIRS,MISTS
         MOVE UP,MISTS
         MOVE EAST,MISTS
AT       MTKING
         ANYOF     NORTH,LEFT,SOUTH,RIGHT,WEST,FORWARD,SW,SECRET
         ANYOF     NW,SE,NE,DOWN
         IFNEAR    SNAKE
             SAY  SNAKEBLOCKS
             QUIT
         ELSE
             MOVE NORTH,LOWNSPASSAGE
             MOVE LEFT,LOWNSPASSAGE
             MOVE SOUTH,SOUTHSIDE
             MOVE RIGHT,SOUTHSIDE
             MOVE WEST,WESTSIDE
             MOVE FORWARD,WESTSIDE
             MOVE DOWN,VAULT
             MOVE NORTHEAST,MORION
             MOVE NORTHWEST,CORRID.3
             MOVE SOUTHEAST,CORRID.1
             MOVE SECRET,SECRETEW.TITE
             CHANCE    35        {Assumes "SW" typed here}
                  MOVE SW,SECRETEW.TITE
             ELSE
                  SAY  YOUDIDNTMOVE
             FIN
             QUIT
AT       WEND2PIT
         MOVE EAST,EEND2PIT
         MOVE CROSS,EEND2PIT
         MOVE WEST,SLAB
         MOVE SLAB,SLAB
         MOVE DOWN,WESTPIT
         MOVE PIT,WESTPIT
AT       WEND2PIT
         KEYWORD   HOLE
         SAY  TOO.FAR.UP
         QUIT
AT       EASTPIT
         MOVE UP,EEND2PIT
         MOVE OUT,EEND2PIT
AT       WESTPIT
         MOVE UP,WEND2PIT
         MOVE OUT,WEND2PIT
AT       WESTPIT
         KEYWORD  CLIMB
         IFEQ  PLANT,0
            SAY   NOCLIMBUP
         ELSE
            IFEQ  PLANT,2
               SAY   SHORTPLANT
               GOTO  WEND2PIT
            ELSE
               SAY   LONGPLANT
               GOTO NARROWCORRIDOR
            FIN
         FIN
         QUIT
AT       WESTPIT
         KEYWORD  GET,PLANT
         SAY   GET..PLANT
         QUIT
AT       WESTOFFISSUR
         MOVE WEST,WENDMISTS
AT       WESTOFFISSURE
         ANYOF     FORWARD,OVER,EAST
         IFEQ FISSURE,0
             SAY  NOWAYACROSS
         ELSE
             GOTO EASTOFFISSURE
         FIN
         QUIT
AT       WESTOFFISSURE
         KEYWORD   JUMP
         IFEQ FISSURE,1
             SAY  TRYTHEBRIDGE
         ELSE
            GOTO  CAVERN
             CALL SPLATTER
         FIN
         QUIT
AT       WESTOFFISSURE
         KEYWORD   NORTH
         SAY  MISTCRAWL
         GOTO WENDMISTS
         QUIT
AT       LOWNSPASSAGE
         MOVE HALL,MTKING
         MOVE OUT,MTKING
         MOVE SOUTH,MTKING
         MOVE NORTH,Y2
         MOVE Y2,Y2
         MOVE DOWN,DIRTY
         MOVE HOLE,DIRTY
AT       SOUTHSIDE
         MOVE HALL,MTKING
         MOVE OUT,MTKING
         MOVE NORTH,MTKING
AT       WESTSIDE
         MOVE HALL,MTKING
         MOVE OUT,MTKING
         MOVE EAST,MTKING
         MOVE WEST,CROSSOVER
         MOVE UP,CROSSOVER
AT       Y2
         MOVE SOUTH,LOWNSPASSAGE
         MOVE EAST,JUMBLE
         MOVE JUMBLE,JUMBLE
         MOVE WEST,WINDOW
AT       Y2
         ANYOF    PLUGH,PLOVER
         IFEQ  STATUS,2
            AND
            NOT
         IFKEY SAY
            PROCEED
         FIN
         IFGT  CLOSURE,1
            OR
         BIT   ADMIN,NOMAGIC
            SAY   NOTHING
            BIS   ADMIN,PANICED
            QUIT
         ELSE
            IFKEY PLUGH
               GOTO  BUILDING
            ELSE
               GOTO  PLOVER
            FIN
            SAY   FOOF
            QUIT
         FIN
AT       JUMBLE
         MOVE DOWN,Y2
         MOVE Y2,Y2
         MOVE UP,MISTS
AT       WINDOW
         MOVE EAST,Y2
         MOVE Y2,Y2
AT       WINDOW
         KEYWORD  JUMP
         SAY   BROKENECK
         GOTO  MIRRORCNYN
         CALL  CORONER
AT       DIRTY
         MOVE EAST,BRINK
         MOVE CRAWL,BRINK
         MOVE UP,LOWNSPASSAGE
         MOVE HOLE,LOWNSPASSAGE
         MOVE WEST,DUSTY
         MOVE BEDQUILT,BEDQUILT
AT       BRINK
         MOVE WEST,DIRTY
         MOVE CRAWL,DIRTY
         MOVE DOWN,STREAMPIT
         MOVE PIT,STREAMPIT
         MOVE CLIMB,STREAMPIT
AT       STREAMPIT
         MOVE CLIMB,BRINK
         MOVE UP,BRINK
         MOVE OUT,BRINK
AT       STREAMPIT
         ANYOF     SLIT,STREAM,DOWN,UPSTREAM,DOWNSTREAM
         SAY  DONTFITSLIT
         QUIT
AT       DUSTY
         MOVE EAST,DIRTY
         MOVE PASSAGE,DIRTY
         MOVE DOWN,COMPLEX
         MOVE HOLE,COMPLEX
         MOVE BEDQUILT,BEDQUILT
AT       WENDMISTS
         MOVE SOUTH,MAZEA.42
         MOVE UP,MAZEA.42
         MOVE PASSAGE,MAZEA.42
         MOVE CLIMB,MAZEA.42
         MOVE EAST,WESTOFFISSUR
         MOVE WEST,LONGHALLEAST
         MOVE CRAWL,LONGHALLEAST
AT       WENDMISTS
         KEYWORD  NORTH
         SAY   MISTCRAWL
         GOTO  WESTOFFISSUR
         QUIT
AT       MAZEA.42
         MOVE UP,WENDMISTS
         MOVE NORTH,MAZEA.42
         MOVE EAST,MAZEA.43
         MOVE SOUTH,MAZEA.45
         MOVE WEST,MAZEA.80
AT       MAZEA.43
         MOVE WEST,MAZEA.42
         MOVE SOUTH,MAZEA.44
         MOVE EAST,MAZEA.45
AT       MAZEA.44
         MOVE EAST,MAZEA.43
         MOVE DOWN,MAZEA.48
         MOVE SOUTH,MAZEA.50
         MOVE NORTH,MAZEA.82
AT       MAZEA.45
         MOVE WEST,MAZEA.42
         MOVE NORTH,MAZEA.43
         MOVE EAST,MAZEA.46
         MOVE SOUTH,MAZEA.47
         MOVE UP,MAZEA.87
         MOVE DOWN,MAZEA.87
AT       MAZEA.46
         MOVE WEST,MAZEA.45
         MOVE OUT,MAZEA.45
AT       MAZEA.47
         MOVE EAST,MAZEA.45
         MOVE OUT,MAZEA.45
AT       MAZEA.48
         MOVE UP,MAZEA.44
         MOVE OUT,MAZEA.44
AT       MAZEA.49
         MOVE EAST,MAZEA.50
         MOVE WEST,MAZEA.51
AT       MAZEA.50
         MOVE EAST,MAZEA.44
         MOVE WEST,MAZEA.49
         MOVE DOWN,MAZEA.51
         MOVE SOUTH,MAZEA.52
AT       MAZEA.51
         MOVE WEST,MAZEA.49
         MOVE UP,MAZEA.50
         MOVE EAST,MAZEA.52
         MOVE SOUTH,MAZEA.53
AT       MAZEA.52
         MOVE WEST,MAZEA.50
         MOVE EAST,MAZEA.51
         MOVE SOUTH,MAZEA.52
         MOVE UP,MAZEA.53
         MOVE NORTH,MAZEA.55
         MOVE DOWN,MAZEA.86
AT       MAZEA.53
         MOVE WEST,MAZEA.51
         MOVE NORTH,MAZEA.52
         MOVE SOUTH,MAZEA.54
AT       MAZEA.54
         MOVE WEST,MAZEA.53
         MOVE OUT,MAZEA.53
AT       MAZEA.55
         MOVE WEST,MAZEA.52
         MOVE NORTH,MAZEA.55
         MOVE DOWN,MAZEA.56
         MOVE EAST,MAZEA.57.PIT
AT       MAZEA.56
         MOVE UP,MAZEA.55
         MOVE OUT,MAZEA.55
AT       MAZEA.57.PIT
         MOVE DOWN,BIRDCHAMBER
         MOVE CLIMB,BIRDCHAMBER
         MOVE WEST,MAZEA.55
         MOVE SOUTH,MAZEA.58
         MOVE NORTH,MAZEA.83
         MOVE EAST,MAZEA.84
AT       MAZEA.58
         MOVE EAST,MAZEA.57.PIT
         MOVE OUT,MAZEA.57.PIT
AT       LONGHALLEAST
         MOVE EAST,WENDMISTS
         MOVE UP,WENDMISTS
         MOVE CRAWL,WENDMISTS
         MOVE WEST,LONGHALLWEST
         MOVE NORTH,CROSSOVER
         MOVE DOWN,CROSSOVER
         MOVE HOLE,CROSSOVER
AT       LONGHALLWEST
         MOVE EAST,LONGHALLEAST
         MOVE NORTH,CROSSOVER
         MOVE SOUTH,MAZED.107
AT       CROSSOVER
         MOVE WEST,LONGHALLEAST
         MOVE NORTH,DEADEND1
         MOVE EAST,WESTSIDE
         MOVE SOUTH,LONGHALLWEST
AT       DEADEND1
         MOVE SOUTH,CROSSOVER
         MOVE OUT,CROSSOVER
AT       COMPLEX
         MOVE UP,DUSTY
         MOVE CLIMB,DUSTY
         MOVE WEST,BEDQUILT
         MOVE BEDQUILT,BEDQUILT
         MOVE NORTH,SHELL
         MOVE SHELL,SHELL
         MOVE EAST,ANTEROOM
AT       BEDQUILT
         MOVE EAST,COMPLEX
         MOVE WEST,SWISS
         MOVE SLAB,SLAB
AT       BEDQUILT
         ANYOF     NORTH,SOUTH,UP,DOWN
         CHANCE    65
             SAY  CRAWL..CAVEIN
             QUIT
         ELSE
            MOVE  DOWN,ANTEROOM
             CHANCE    75
                  MOVE NORTH,LOW
                  MOVE UP,DUSTY
                  MOVE SOUTH,SLAB
             ELSE
                  MOVE NORTH,SECRETJUNCTION
                  MOVE UP,SECRETNSCPAS
                  MOVE SOUTH,TALLEWCNYN
            FIN
         FIN
AT       BEDQUILT
         KEYWORD   NW
         CHANCE   50
            SAY   YOUDIDNTMOVE
         ELSE
            GOTO  ORIENTAL
         FIN
         QUIT
AT       SWISS
         MOVE NE,BEDQUILT
         MOVE WEST,EEND2PIT
         MOVE CANYON,TALLEWCNYN
         MOVE EAST,SOFT
         MOVE ORIENTAL,ORIENTAL
         MOVE  SOFT,SOFT
         ANYOF NW,SOUTH
            CHANCE   65
               MOVE  NW,ORIENTAL
               SAY   YOUDIDNTMOVE
            ELSE
               MOVE  SOUTH,TALLEWCNYN
               SAY   YOUDIDNTMOVE
            FIN
            QUIT
         FIN
AT       EEND2PIT
         MOVE EAST,SWISS
         MOVE WEST,WEND2PIT
         MOVE CROSS,WEND2PIT
         MOVE DOWN,EASTPIT
         MOVE PIT,EASTPIT
AT       SLAB
         MOVE SOUTH,WEND2PIT
         MOVE UP,SECRETNSCYN
         MOVE CLIMB,SECRETNSCYN
         MOVE NORTH,BEDQUILT
         MOVE  BEDQUILT,BEDQUILT
AT       SECRETNSCYN
         MOVE DOWN,SLAB
         MOVE SLAB,SLAB
         MOVE NORTH,MIRRORCNYN
         MOVE MIRROR,MIRRORCNYN
         MOVE RESERVOIR,RESERVOIR
         MOVE  SOUTH,SECRETCYNNE1
AT       SECRETNSCPAS
         MOVE NORTH,SECRETJUNCTION
         MOVE DOWN,BEDQUILT
         MOVE PASSAGE,BEDQUILT
         MOVE SOUTH,STALACT
AT       SECRETJUNCTION
         MOVE SE,BEDQUILT
         MOVE SOUTH,SECRETNSCPAS
         MOVE NORTH,WINDOW2
AT       LOW
         MOVE BEDQUILT,BEDQUILT
         MOVE SW,SLOPING
         MOVE NORTH,DEADEND2
         MOVE SE,ORIENTAL
         MOVE ORIENTAL,ORIENTAL
AT       DEADEND2
         MOVE SOUTH,LOW
         MOVE CRAWL,LOW
         MOVE OUT,LOW
AT       SECRETEW.TITE
         MOVE EAST,MTKING
         MOVE DOWN,NSCANYONWIDE
AT       SECRETEW.TITE
         KEYWORD   WEST
         IFEQ DRAGON,0      {If it's alive...}
             GOTO SECRETCYNNE2
         ELSE
             GOTO SECRETCYNNE1
         FIN
         QUIT
AT       NSCANYONWIDE
         MOVE SOUTH,TIGHTERSTILL
         MOVE NORTH,TALLEWCNYN
AT       TIGHTERSTILL
         MOVE NORTH,NSCANYONWIDE
AT       TALLEWCNYN
         MOVE EAST,NSCANYONWIDE
         MOVE WEST,DEADEND3
         MOVE NORTH,SWISS
         MOVE CRAWL,SWISS
AT       DEADEND3
         MOVE SOUTH,TALLEWCNYN
AT       MAZEA.80
         MOVE NORTH,MAZEA.42
         MOVE WEST,MAZEA.80
         MOVE SOUTH,MAZEA.80
         MOVE EAST,MAZEA.81
AT       MAZEA.81
         MOVE WEST,MAZEA.80
         MOVE OUT,MAZEA.80
AT       MAZEA.82
         MOVE SOUTH,MAZEA.44
         MOVE OUT,MAZEA.44
AT       MAZEA.83
         MOVE SOUTH,MAZEA.57.PIT
         MOVE EAST,MAZEA.84
         MOVE WEST,MAZEA.85
AT       MAZEA.84
         MOVE NORTH,MAZEA.57.PIT
         MOVE WEST,MAZEA.83
         MOVE NW,MAZEA.114
AT       MAZEA.85
         MOVE EAST,MAZEA.83
         MOVE OUT,MAZEA.83
AT       MAZEA.86
         MOVE UP,MAZEA.52
         MOVE OUT,MAZEA.52
AT       MAZEA.87
         MOVE UP,MAZEA.45
         MOVE DOWN,MAZEA.45
AT       NARROWCORRID
         MOVE DOWN,WESTPIT
         MOVE CLIMB,WESTPIT
         MOVE EAST,WESTPIT
         MOVE WEST,GIANT
         MOVE GIANT,GIANT
AT       NARROWCORRIDOR
         KEYWORD  JUMP
         GOTO  WESTPIT
         CALL  SPLATTER
AT       INCLINE
         MOVE NORTH,CAVERN
         MOVE CAVERN,CAVERN
         MOVE PASSAGE,CAVERN
         SMOVE DOWN,LOW,OOF
         SMOVE CLIMB,LOW,OOF
AT       GIANT
         MOVE SOUTH,NARROWCORRID
         MOVE CORRIDOR,NARROWCORRID
         MOVE EAST,TUNNEL.1
         MOVE NORTH,IMMENSENSPASS
AT       IMMENSENSPASS
         MOVE SOUTH,GIANT
         MOVE GIANT,GIANT
         MOVE PASSAGE,GIANT
AT       IMMENSENSPASS
         ANYOF     NORTH,ENTER,CAVERN
         IFEQ DOOR,0
             SAY  DOORNEEDSOIL
         ELSE
             GOTO CAVERN
         FIN
         QUIT
AT       CAVERN
         MOVE SOUTH,IMMENSENSPASS
         MOVE OUT,IMMENSENSPASS
         MOVE GIANT,GIANT
         MOVE WEST,INCLINE
         MOVE INCLINE,INCLINE
AT       CAVERN
         ANYOF DOWN,JUMP      {jumping into whirlpool}
         QUERY WHIRLPOOL?
            LDA   J,LAMP
            SET   K,0
            ITOBJ I
               IFHAVE   I
                  AND
                  NOT
               IFEQ  I,J
                  APPORT   I,YLEM
                  ADD   K,1
               FIN
            EOI
            IFHAVE   LAMP
               SET   INVCT,1
               IFEQ  K,0
                  SAY   FLOW.DOWN
               ELSE
                  SAY   FLOW.RIP
               FIN
            ELSE
               SET   INVCT,0
               IFEQ  K,0
                  SAY   FLOW.DARK
               ELSE
                  SAY   FLOW.D.RIP
               FIN
            FIN
            GOTO  RESERVOIR.N
            SAY   WHIRL.LAND
         ELSE
            SAY   OK
         FIN
         QUIT
AT       SOFT
         MOVE WEST,SWISS
         MOVE OUT,SWISS
         MOVE  SWISS,SWISS
AT       ORIENTAL
         MOVE SE,SWISS
         MOVE WEST,LOW
         MOVE CRAWL,LOW
         MOVE UP,MISTY
         MOVE NORTH,MISTY
         MOVE CAVERN,MISTY
AT       MISTY
         MOVE SOUTH,ORIENTAL
         MOVE ORIENTAL,ORIENTAL
         MOVE WEST,ALCOVE
AT       MISTY
         KEYWORD  JUMP
         GOTO  CAVERN
         CALL  SPLATTER
         QUIT
AT       ALCOVE
         ANYOF EAST,PASSAGE,PLOVER
         IFEQ  INVCT,0
            GOTO PLOVER
         ELSE
            IFEQ  INVCT,1
               IFHAVE   EMERALD
                  GOTO PLOVER
               ELSE
                  SAY   WONT..FIT
               FIN
            ELSE
               SAY   WONT..FIT
            FIN
         FIN
         QUIT
AT       ALCOVE
         MOVE NW,MISTY
         MOVE CAVERN,MISTY
AT       PLOVER
         AT    PLOVER      {'cause can get here via "SAY PLOVER" too}
         KEYWORD  PLOVER
         IFEQ  STATUS,1
            OR
         IFKEY SAY
            IFHAVE   EMERALD
               DROP  EMERALD
            FIN
            SAY   FOOF
            GOTO Y2
            QUIT
         FIN
AT       PLOVER
         ANYOF WEST,PASSAGE,ALCOVE
         IFEQ  INVCT,0
            GOTO ALCOVE
         ELSE
            IFEQ  INVCT,1
               IFHAVE   EMERALD
                  GOTO ALCOVE
               ELSE
                  SAY   WONT..FIT
               FIN
            ELSE
               SAY   WONT..FIT
            FIN
         FIN
         QUIT
AT       PLOVER
         MOVE NE,DARK
         MOVE DARK,DARK
AT       DARK
         MOVE SOUTH,PLOVER
         MOVE PLOVER,PLOVER
         MOVE OUT,PLOVER
AT       ARCHED
         MOVE DOWN,SHELL
         MOVE SHELL,SHELL
         MOVE  UP,ARCH.COR.1
         MOVE  EAST,ARCH.COR.1
AT       SHELL
         MOVE UP,ARCHED
         MOVE HALL,ARCHED
         MOVE DOWN,RAGGEDCORRID
         MOVE  CORRIDOR,RAGGEDCORRID
AT       SHELL
         ANYOF     SOUTH,COMPLEX
         IFHAVE    CLAM
             SAY  CLAM.2.BIG
         ELSE
             IFHAVE    OYSTER
                  SAY  OYSTER.2.BIG
             ELSE
                  GOTO COMPLEX
         EOF
         QUIT
AT       RAGGEDCORRID
         MOVE UP,SHELL
         MOVE SHELL,SHELL
         MOVE DOWN,CULDESAC
AT       CULDESAC
         MOVE UP,RAGGEDCORRID
         MOVE OUT,RAGGEDCORRID
         MOVE  CORRIDOR,RAGGEDCORRID
         MOVE SHELL,SHELL
AT       ANTEROOM
         MOVE UP,COMPLEX
         MOVE WEST,BEDQUILT
         MOVE EAST,WITTSEND
AT       MAZED.107
         MOVE SOUTH,MAZED.131
         MOVE SW,MAZED.132
         MOVE NE,MAZED.133
         MOVE SE,MAZED.134
         MOVE UP,MAZED.135
         MOVE NW,MAZED.136
         MOVE EAST,MAZED.137
         MOVE WEST,MAZED.138
         MOVE NORTH,MAZED.139
         MOVE DOWN,LONGHALLWEST
AT       WITTSEND
         ANYOF     NORTH,SOUTH,EAST,UP,DOWN,NE,NW,SE,SW
         CHANCE    95
             GOTO WITTSEND
         ELSE
             GOTO ANTEROOM
         FIN
         QUIT
AT       WITTSEND
         KEYWORD   WEST
         GOTO  WITTSEND
         QUIT
AT       MIRRORCNYN
         KEYWORD  MIRROR
         SAY   TOO.FAR.UP
         QUIT
AT       MIRRORCNYN
         MOVE SOUTH,SECRETNSCYN
         MOVE NORTH,RESERVOIR
         MOVE RESERVOIR,RESERVOIR
AT       WINDOW2
         MOVE WEST,SECRETJUNCTION
AT       WINDOW2
         KEYWORD  JUMP
         SAY   BROKENECK
         GOTO  MIRRORCNYN
         CALL  CORONER
AT       STALACT
         MOVE NORTH,SECRETNSCPAS
AT       STALACT
         ANYOF     DOWN,JUMP,CLIMB
         CHANCE    40
             GOTO MAZEA.50
         ELSE
             CHANCE    50
                  GOTO MAZEA.53
             ELSE
                  GOTO MAZEA.45
         EOF
         QUIT
AT       MAZED.112
         MOVE SW,MAZED.131
         MOVE NORTH,MAZED.132
         MOVE EAST,MAZED.133
         MOVE NW,MAZED.134
         MOVE SE,MAZED.135
         MOVE NE,MAZED.136
         MOVE WEST,MAZED.137
         MOVE DOWN,MAZED.138
         MOVE UP,MAZED.139
         MOVE SOUTH,MAZED.140
AT       RESERVOIR
         MOVE SOUTH,MIRRORCNYN
         MOVE OUT,MIRRORCNYN
         MOVE MIRROR,MIRRORCNYN
         ANYOF NORTH,CROSS
         SAY   CANT.SWIM
         QUIT
AT       RESERVOIR.N
         MOVE  NORTH,WARM
         MOVE  PASSAGE,WARM
         MOVE  WARM,WARM
         MOVE  BALCONY,BALCONY
         ANYOF SOUTH,CROSS
         IFNEAR   TURTLE
            SAY   TURTLE.BACK
            APPORT   TURTLE,LIMBO
            GOTO  RESERVOIR
         ELSE
            SAY   CANT.SWIM
         FIN
         QUIT
AT       WARM
         MOVE  SOUTH,RESERVOIR.N
         MOVE  RESERVOIR,RESERVOIR.N
         MOVE  NORTHEAST,BALCONY
         MOVE  BALCONY,BALCONY
AT       BALCONY
         MOVE  WEST,WARM
         MOVE  OUT,WARM
         MOVE  WARM,WARM
         MOVE  RESERVOIR,RESERVOIR.N
         KEYWORD  JUMP
         GOTO  YLEM
         CALL  SPLATTER
AT       MAZEA.114
         MOVE SE,MAZEA.84
AT       SWOFCHASM
         MOVE SW,SLOPING
         MOVE SLOPING,SLOPING
         MOVE CORRIDOR,SLOPING
AT       SWOFCHASM
         KEYWORD  THROW
         IFEQ  STATUS,1
            OR
         IFNEAR   TROLL2
            PROCEED
         ELSE
            IFKEY AXE
               OR
            IFKEY SWORD
               IFHAVE   ARG2
                  NAME   EL.CHEAPO,ARG2
                  DROP ARG2
               ELSE
                  PROCEED
               FIN
            ELSE
               BIT   ARG2,OBJECT
                  BIT   ARG2,VALUED
                     IFHAVE   ARG2
                        IFKEY EGGS
                           BIT   TROLL,SPECIAL1
                              SET   TROLL,6  {wary}
                              SAY   TROLL
                              SET   TROLL,0
                              APPORT   EGGS,YLEM {destroy eggs}
                              QUIT
                           FIN
                        FIN
                        NAME  BOUGHTHIMOFF,ARG2
                        SET   TROLL,1
                        APPORT   TROLL,LIMBO
                        APPORT   TROLL2,SWOFCHASM
                        APPORT   ARG2,LIMBO
                     ELSE
                        PROCEED
                     FIN
                  ELSE
                     PROCEED
                  FIN
               ELSE
                  PROCEED
               FIN
            FIN
         FIN
         QUIT
AT       SWOFCHASM
         ANYOF CROSS,NE
         IFGT  CHASM,0
            SAY   NO.BRIDGE
         ELSE
            IFEQ  TROLL,0
               SAY   TROLL.SEZ.NO
            ELSE
               IFEQ  TROLL,2
                  SET   TROLL,3
                  SAY   TROLL
                  SET   TROLL,0
                  APPORT  TROLL,SWOFCHASM
                  APPORT   TROLL2,LIMBO
               ELSE
                  IFEQ  TROLL,1
                     SET   TROLL,2
                  FIN
                  GOTO  NEOFCHASM
               FIN
            FIN
         FIN
         QUIT
AT       SWOFCHASM
         KEYWORD  JUMP
         IFEQ  CHASM,0
            SAY   TRYTHEBRIDGE
         ELSE
            GOTO  YLEM
            CALL  SPLATTER
         FIN
         QUIT
AT       SLOPING
         MOVE DOWN,LOW
         MOVE UP,SWOFCHASM
         MOVE  CHASM,SWOFCHASM
         MOVE  LOW,LOW
         MOVE  OUT,LOW
AT       SECRETCYNNE1
         KEYWORD RUG
         IFEQ  DRAGON,0
            SAY   DRAGON.RUG
            QUIT
         FIN
AT       SECRETCYNNE1
         MOVE NORTH,SECRETNSCYN
         MOVE OUT,SECRETNSCYN
AT       SECRETCYNNE1
         ANYOF     FORWARD,EAST
         IFEQ DRAGON,0
             SAY  PAST.DRAGON
         ELSE
             GOTO SECRETEW.TITE
         FIN
         QUIT
AT       SECRETCYNNE2
         KEYWORD RUG
         IFEQ  DRAGON,0
            SAY   DRAGON.RUG
            QUIT
         FIN
AT       SECRETCYNNE2
         MOVE EAST,SECRETEW.TITE
         MOVE OUT,SECRETEW.TITE
AT       SECRETCYNNE2
         ANYOF     FORWARD,NORTH
         IFEQ DRAGON,0
             SAY  PAST.DRAGON
         ELSE
             GOTO SECRETNSCYN
         FIN
         QUIT
AT       NEOFCHASM
         KEYWORD  RELEASE,BEAR
         HAVE  BEAR
         NEAR  TROLL
         SET   TROLL,4
         SAY   BEAR..TROLL
         APPORT   TROLL,LIMBO
         APPORT   TROLL2,SWOFCHASM
         DROP  BEAR
         QUIT
AT       NEOFCHASM
         KEYWORD  THROW
         IFEQ  STATUS,1
            OR
         IFNEAR   TROLL2
            PROCEED
         ELSE
            IFKEY AXE
               OR
            IFKEY SWORD
               IFHAVE   ARG2
                  NAME   EL.CHEAPO,ARG2
                  DROP ARG2
               ELSE
                  PROCEED
               FIN
            ELSE
               BIT   ARG2,OBJECT
                  BIT   ARG2,VALUED
                     IFHAVE   ARG2
                        IFKEY EGGS
                           BIT   TROLL,SPECIAL1
                              SET   TROLL,6  {wary}
                              SAY   TROLL
                              SET   TROLL,0
                              APPORT   EGGS,YLEM {destroy eggs}
                              QUIT
                           FIN
                        FIN
                        NAME  BOUGHTHIMOFF,ARG2
                        SET   TROLL,1
                        APPORT   TROLL,LIMBO
                        APPORT   TROLL2,SWOFCHASM
                        APPORT   ARG2,LIMBO
                     ELSE
                        PROCEED
                     FIN
                  ELSE
                     PROCEED
                  FIN
               ELSE
                  PROCEED
               FIN
            FIN
         FIN
         QUIT
AT       NEOFCHASM
         ANYOF CROSS,SW
         IFGT  CHASM,0
            SAY   NO.BRIDGE
         ELSE
            IFEQ  TROLL,0
               SAY   TROLL.SEZ.NO
            ELSE
               IFEQ  TROLL,2
                  SET   TROLL,3
                  SAY   TROLL
                  SET   TROLL,0
                  APPORT  TROLL,SWOFCHASM
                  APPORT   TROLL2,LIMBO
               ELSE
                  IFEQ  TROLL,1
                     SET   TROLL,2
                  FIN
                  IFHAVE   BEAR
                     SAY   BEAR..BRIDGE
                     SET   CHASM,1
                     APPORT   TROLL2,LIMBO
                     GOTO  YLEM
                     CALL  CORONER
                  ELSE
                     IFEQ  TROLL,4  {scared him off?}
                        AND
                     BIT   TROLL,SPECIAL1 {already stole eggs back?}
                        IFNEAR   BEAR
                           GET   BEAR
                           SET   CHASM,1
                           SAY   REVENGE
                        ELSE
                           SET   CHASM,2
                           SAY   REVENGE.1
                        FIN
                        APPORT   TROLL2,LIMBO
                        GOTO  YLEM
                        CALL  CORONER
                     ELSE
                        GOTO  SWOFCHASM
                     FIN
                  FIN
               FIN
            FIN
         FIN
         QUIT
AT       NEOFCHASM
         KEYWORD  JUMP
         IFEQ  CHASM,0
            SAY   TRYTHEBRIDGE
         ELSE
            GOTO  YLEM
            CALL  SPLATTER
         FIN
         QUIT
AT       NEOFCHASM
         MOVE NE,CORRIDOR
         MOVE  CORRIDOR,CORRIDOR
         MOVE FORK,FORK
         MOVE VIEW,BREATHTAKER
         MOVE BARREN,BARREN
AT       CORRIDOR
         MOVE  CHASM,NEOFCHASM
         MOVE WEST,NEOFCHASM
         MOVE EAST,FORK
         MOVE FORK,FORK
         MOVE VIEW,BREATHTAKER
         MOVE BARREN,BARREN
AT       FORK
         MOVE  CHASM,NEOFCHASM
         MOVE WEST,CORRIDOR
         MOVE  CORRIDOR,CORRIDOR
         MOVE NE,WARMJUNCTN
         MOVE LEFT,WARMJUNCTN
         MOVE SE,LIMESTONE
         MOVE RIGHT,LIMESTONE
         MOVE DOWN,LIMESTONE
         MOVE VIEW,BREATHTAKER
         MOVE BARREN,BARREN
AT       WARMJUNCTN
         MOVE SOUTH,FORK
         MOVE FORK,FORK
         MOVE NORTH,BREATHTAKER
         MOVE VIEW,BREATHTAKER
         MOVE EAST,BOULDERS
         MOVE CRAWL,BOULDERS
AT       BREATHTAKER
         MOVE SOUTH,WARMJUNCTN
         MOVE PASSAGE,WARMJUNCTN
         MOVE OUT,WARMJUNCTN
         MOVE FORK,FORK
AT       BREATHTAKER
         ANYOF     JUMP,DOWN,CLIMB
         GOTO  YLEM
         CALL  SPLATTER            {let him plummet to a painful death.}
AT       BREATHTAKER
         ANYOF VALLEY,CROSS,GORGE,NORTH
         IFEQ  GORGE,0
            SAY   NO.ARCH
         ELSE
            IFHAVE   RING
               IFHAVE   BEAR
                  SAY   BURN.BEAR
                  APPORT   BEAR,YLEM
               ELSE
                  NOT
                  BIT   FACES,BEENHERE
                     SAY   FUMES.MISS
                  FIN
               FIN
               GOTO  FACES
            ELSE
               IFHAVE   BEAR
                  SAY   BURN.BOTH
               ELSE
                  SAY   FUMES.BURN
               FIN
               GOTO  YLEM
               CALL  CORONER
            FIN
         FIN
         QUIT
AT       BOULDERS
         MOVE WEST,WARMJUNCTN
         MOVE OUT,WARMJUNCTN
         MOVE CRAWL,WARMJUNCTN
         MOVE FORK,FORK
         MOVE VIEW,BREATHTAKER
AT       LIMESTONE
         MOVE NORTH,FORK
         MOVE UP,FORK
         MOVE FORK,FORK
         MOVE SOUTH,BARREN
         MOVE DOWN,BARREN
         MOVE BARREN,BARREN
         MOVE VIEW,BREATHTAKER
AT       BARREN
         MOVE WEST,LIMESTONE
         MOVE UP,LIMESTONE
         MOVE FORK,FORK
         MOVE EAST,BEARHERE
         MOVE INWARD,BEARHERE
         MOVE BARREN,BEARHERE
         MOVE ENTER,BEARHERE
         MOVE VIEW,BREATHTAKER
AT       BEARHERE
         KEYWORD  GET,AXE
         NEAR  AXE
         IFHAVE   AXE
            OR
         IFEQ  AXE,0
            PROCEED
         ELSE
            NAME  CANTGETAXE,ARG2
            QUIT
         FIN
AT       BEARHERE
         MOVE WEST,BARREN
         MOVE OUT,BARREN
         MOVE FORK,FORK
         MOVE VIEW,BREATHTAKER
AT       MAZED.131
         MOVE WEST,MAZED.107
         MOVE SE,MAZED.132
         MOVE NW,MAZED.133
         MOVE SW,MAZED.134
         MOVE NE,MAZED.135
         MOVE UP,MAZED.136
         MOVE DOWN,MAZED.137
         MOVE NORTH,MAZED.138
         MOVE SOUTH,MAZED.139
         MOVE EAST,MAZED.112
AT       MAZED.132
         MOVE NW,MAZED.107
         MOVE UP,MAZED.131
         MOVE NORTH,MAZED.133
         MOVE SOUTH,MAZED.134
         MOVE WEST,MAZED.135
         MOVE SW,MAZED.136
         MOVE NE,MAZED.137
         MOVE EAST,MAZED.138
         MOVE DOWN,MAZED.139
         MOVE SE,MAZED.112
AT       MAZED.133
         MOVE UP,MAZED.107
         MOVE DOWN,MAZED.131
         MOVE WEST,MAZED.132
         MOVE NE,MAZED.134
         MOVE SW,MAZED.135
         MOVE EAST,MAZED.136
         MOVE NORTH,MAZED.137
         MOVE NW,MAZED.138
         MOVE SE,MAZED.139
         MOVE SOUTH,MAZED.112
AT       MAZED.134
         MOVE NE,MAZED.107
         MOVE NORTH,MAZED.131
         MOVE NW,MAZED.132
         MOVE SE,MAZED.133
         MOVE EAST,MAZED.135
         MOVE DOWN,MAZED.136
         MOVE SOUTH,MAZED.137
         MOVE UP,MAZED.138
         MOVE WEST,MAZED.139
         MOVE SW,MAZED.112
AT       MAZED.135
         MOVE NORTH,MAZED.107
         MOVE SE,MAZED.131
         MOVE DOWN,MAZED.132
         MOVE SOUTH,MAZED.133
         MOVE EAST,MAZED.134
         MOVE WEST,MAZED.136
         MOVE SW,MAZED.137
         MOVE NE,MAZED.138
         MOVE NW,MAZED.139
         MOVE UP,MAZED.112
AT       MAZED.136
         MOVE EAST,MAZED.107
         MOVE WEST,MAZED.131
         MOVE UP,MAZED.132
         MOVE SW,MAZED.133
         MOVE DOWN,MAZED.134
         MOVE SOUTH,MAZED.135
         MOVE NW,MAZED.137
         MOVE SE,MAZED.138
         MOVE NE,MAZED.139
         MOVE NORTH,MAZED.112
AT       MAZED.137
         MOVE SE,MAZED.107
         MOVE NE,MAZED.131
         MOVE SOUTH,MAZED.132
         MOVE DOWN,MAZED.133
         MOVE UP,MAZED.134
         MOVE NW,MAZED.135
         MOVE NORTH,MAZED.136
         MOVE SW,MAZED.138
         MOVE EAST,MAZED.139
         MOVE WEST,MAZED.112
AT       MAZED.138
         MOVE DOWN,MAZED.107
         MOVE EAST,MAZED.131
         MOVE NE,MAZED.132
         MOVE UP,MAZED.133
         MOVE WEST,MAZED.134
         MOVE NORTH,MAZED.135
         MOVE SOUTH,MAZED.136
         MOVE SE,MAZED.137
         MOVE SW,MAZED.139
         MOVE NW,MAZED.112
AT       MAZED.139
         MOVE SW,MAZED.107
         MOVE NW,MAZED.131
         MOVE EAST,MAZED.132
         MOVE WEST,MAZED.133
         MOVE NORTH,MAZED.134
         MOVE DOWN,MAZED.135
         MOVE SE,MAZED.136
         MOVE UP,MAZED.137
         MOVE SOUTH,MAZED.138
         MOVE NE,MAZED.112
AT       MAZED.140
         MOVE NORTH,MAZED.112
         MOVE OUT,MAZED.112
AT       MAZED.140
         KEYWORD  DROP,COINS
         HAVE  COINS
         APPORT   COINS,LIMBO
         APPORT   BATTERIES,HERE
         SAY   OK
         SAY   BATTERIES
         QUIT
AT       LIMBO
         MOVE  OUT,BUILDING {kludge to get out of here if needed}
AT       SANDSTONE
         MOVE  WEST,MISTS
         MOVE  OUT,MISTS
         MOVE  MISTS,MISTS
AT       MORION
         MOVE  SOUTH,MTKING
         MOVE  OUT,MTKING
AT       VAULT
         ANYOF UP,OUT,NORTH
         IFEQ  SAFE,1
            SAY   SAFE.BLOCKS
         ELSE
            GOTO  MTKING
         FIN
         QUIT
AT       VAULT
         KEYWORD  IN
         IFEQ  SAFE,1
            SET   SAFEEXIT,HERE
            GOTO  INSAFE
         ELSE
            SAY   CANTENTERSAFE
         FIN
         QUIT
AT       INSAFE   {inside the safe - strange stuff happens here!}
         KEYWORD  OUT   {it's the only way you can go}
         GOTO  SAFEEXIT {which was set when you came in}
         QUIT
AT       INSAFE   {special handling for the safe, within the safe!}
         KEYWORD  SAFE
         IFEQ  STATUS,1
            NAME  WHAT.DO,ARG2
         ELSE
            IFKEY CLOSE
               SAY   NO.HANDLE
            ELSE
               IFKEY OPEN
                  NAME  ALREADY.OPEN,ARG2
               ELSE
                  SAY   HAH!
               FIN
            FIN
         FIN
         QUIT
AT       CORRID.1
         MOVE  SOUTH,MTKING
         MOVE  NORTH,CORRID.2
AT       CORRID.2
         MOVE  SOUTH,CORRID.1
         MOVE  WEST,CORRID.1
         MOVE  NORTH,TOOL
         MOVE  EAST,TOOL
AT       TOOL
         MOVE  OUT,CORRID.2
         MOVE  SOUTH,CORRID.2
AT       CORRID.3
         MOVE  SOUTH,MTKING
         MOVE  NORTH,SPHERICAL
         MOVE  EAST,CUBICLE
AT       CUBICLE
         MOVE  OUT,CORRID.3
         MOVE  CORRIDOR,CORRID.3
         MOVE  SOUTH,CORRID.3
AT       SPHERICAL
         MOVE  OUT,CORRID.3
         MOVE  NORTH,CORRID.3
         MOVE  CORRIDOR,CORRID.3
AT       TUNNEL.1
         MOVE  SOUTH,GIANT
         MOVE  NORTH,GLASSY
AT       GLASSY
         MOVE  SOUTH,TUNNEL.1
AT       GLASSY
         ANYOF NORTH,LAIR
         IFNEAR   OGRE
            SAY   OGRE.BLOCKS
         ELSE
            GOTO  LAIR
         FIN
         QUIT
AT       LAIR
         MOVE  EAST,BRINK.1
         MOVE  WEST,GLASSY
AT       BRINK.1
         MOVE  NORTH,LAIR
         MOVE  WEST,BRINK.2
         MOVE  EAST,BRINK.3
          MOVE  NORTH,LAIR
AT       BRINK.1
         KEYWORD  JUMP
         CALL  PLUNGE
AT       BRINK.2
         MOVE  NORTH,BRINK.1
         MOVE  SOUTHEAST,ICE
AT       BRINK.2
         KEYWORD  JUMP
         CALL  PLUNGE
AT       ICE
         MOVE  NORTHWEST,BRINK.2
         SMOVE  DOWN,SLIDE,OOF
         SMOVE  EAST,SLIDE,OOF
         SMOVE  SLIDE,SLIDE,OOF
AT       SLIDE
         ANYOF SLIDE,UP,NORTH,CLIMB
         SAY   SLIDE.SLIPPERY
         QUIT
AT       SLIDE
         MOVE  SOUTH,ICECAVE.2A
         MOVE  NORTHWEST,ICECAVE.4
AT       ICECAVE.1
         MOVE  WEST,ICECAVE.2
         MOVE  NORTH,ICECAVE.1A
AT       ICECAVE.1A
         MOVE  SOUTH,ICECAVE.1
AT       ICECAVE.2
         MOVE  EAST,ICECAVE.1
         MOVE  WEST,ICECAVE.3
         MOVE  NORTH,ICECAVE.2A
AT       ICECAVE.2A
         MOVE  NORTH,SLIDE
         MOVE  SOUTH,ICECAVE.2
AT       ICECAVE.3
         MOVE  EAST,ICECAVE.2
         MOVE  NORTH,ICECAVE.3A
AT       ICECAVE.3A
         MOVE  SOUTH,ICECAVE.3
AT       ICECAVE.4
         MOVE  EAST,SLIDE
         MOVE  WEST,ICECAVE.5
AT       ICECAVE.5
         MOVE  NORTHEAST,ICECAVE.4
         MOVE  SOUTH,ICECAVE.6
AT       ICECAVE.6
         MOVE  NORTH,ICECAVE.5
         MOVE  SOUTH,ICECAVE.7
         MOVE  WEST,ICECAVE.9
AT       ICECAVE.7
         MOVE  NORTH,ICECAVE.6
AT       ICECAVE.8
         MOVE  NORTH,ICECAVE.9
AT       ICECAVE.9
         MOVE  EAST,ICECAVE.6
         MOVE  SOUTH,ICECAVE.8
         MOVE  NORTH,ICECAVE.10
AT       ICECAVE.10
         MOVE  SOUTH,ICECAVE.9
         MOVE  NORTHWEST,ICECAVE.11
AT       ICECAVE.11
         MOVE  EAST,ICECAVE.10
         MOVE  WEST,ICECAVE.12
AT       ICECAVE.12
         MOVE  NORTHEAST,ICECAVE.11
         MOVE  SOUTH,ICECAVE.12A
         MOVE  WEST,ICECAVE.15
AT       ICECAVE.12A
         MOVE  NORTH,ICECAVE.12
         MOVE  SOUTH,ICECAVE.13
AT       ICECAVE.13
         MOVE  NORTH,ICECAVE.12A
AT       ICECAVE.14
         MOVE  NORTH,ICECAVE.15A
AT       ICECAVE.15
         MOVE  EAST,ICECAVE.12
         MOVE  SOUTH,ICECAVE.15A
         MOVE  NORTHWEST,ICECAVE.16
AT       ICECAVE.15A
         MOVE  SOUTH,ICECAVE.14
         MOVE  NORTH,ICECAVE.15
AT       ICECAVE.16
         MOVE  EAST,ICECAVE.15
         MOVE  WEST,ICECAVE.17
AT       ICECAVE.17
         MOVE  NORTHEAST,ICECAVE.16
         MOVE  SOUTH,ICECAVE.18
AT       ICECAVE.18
         MOVE  NORTH,ICECAVE.17
         MOVE  SOUTH,ICECAVE.19
         MOVE  WEST,ICECAVE.21
         MOVE  NORTHWEST,ICECAVE.22
AT       ICECAVE.19
         MOVE  NORTH,ICECAVE.18
         MOVE  WEST,ICECAVE.20
AT       ICECAVE.20
         MOVE  EAST,ICECAVE.19
         MOVE  NORTH,ICECAVE.21
AT       ICECAVE.21
         MOVE  EAST,ICECAVE.18
         MOVE  SOUTH,ICECAVE.20
AT       ICECAVE.22
         MOVE  SOUTHEAST,ICECAVE.18
         MOVE  NORTHWEST,ICECAVE.23
AT       ICECAVE.23
         MOVE  EAST,ICECAVE.22
         MOVE  WEST,ICECAVE.24
AT       ICECAVE.24
         MOVE  NORTHEAST,ICECAVE.23
         MOVE  SOUTH,ICECAVE.25
         MOVE  WEST,ICECAVE.29
AT       ICECAVE.25
         MOVE  NORTH,ICECAVE.24
         MOVE  SOUTH,ICECAVE.26
         MOVE  WEST,ICECAVE.28
         MOVE  NORTHWEST,ICECAVE.28A
AT       ICECAVE.26
         MOVE  NORTH,ICECAVE.25
         MOVE  NORTHWEST,ICECAVE.27
AT       ICECAVE.27
         MOVE  SOUTHEAST,ICECAVE.26
         MOVE  NORTH,ICECAVE.28
AT       ICECAVE.28
         MOVE  EAST,ICECAVE.25
         MOVE  SOUTH,ICECAVE.27
AT       ICECAVE.28A
         MOVE  SOUTHEAST,ICECAVE.25
         MOVE  NORTH,ICECAVE.29
AT       ICECAVE.29
         MOVE  EAST,ICECAVE.24
         MOVE  SOUTH,ICECAVE.28A
         MOVE  NORTHWEST,ICECAVE.30
AT       ICECAVE.30
         MOVE  EAST,ICECAVE.29
         SMOVE THURB,ICE,FOOF
AT       BRINK.3
         MOVE  NORTH,BRINK.1
         MOVE  NORTHEAST,CRACK.1
         MOVE  CRACK,CRACK.1
AT       BRINK.3
         KEYWORD  JUMP
         CALL  PLUNGE
AT       CRACK.1
         MOVE  SOUTHWEST,BRINK.3
         MOVE  SOUTHEAST,CRACK.2
AT       CRACK.2
         MOVE  WEST,CRACK.1
AT       CRACK.2
         KEYWORD  SOUTH
         IFNEAR   SLIME
            SAY   SLIMED
            CALL  CORONER
         ELSE
            GOTO  CRACK.3
         FIN
         QUIT
AT       CRACK.3
         MOVE  NORTH,CRACK.2
         MOVE  SOUTH,CRACK.4
         MOVE  CRAWL,CRACK.4
AT       CRACK.4
         MOVE  NORTH,CRACK.3
         MOVE  OUT,CRACK.3
         MOVE  CRAWL,CRACK.3
AT       ARCH.COR.1
         MOVE  WEST,ARCHED
AT       ARCH.COR.1
         KEYWORD  EAST
         IFEQ  QUICKSAND,0
            OR
         IFHAVE   CLAM
            OR
         IFHAVE   OYSTER
            SET   QUICKSAND,0
            BIT   QUICKSAND,SPECIAL1
               SAY   SCHLURP2
            ELSE
               SAY   SCHLURP
               BIS   QUICKSAND,SPECIAL1
            FIN
            GOTO  YLEM
            CALL  CORONER
         ELSE
            GOTO  ARCH.COR.2
            SET   QUICKSAND,0
         FIN
         QUIT
AT       ARCH.COR.2
         MOVE  NORTH,ARCH.FORK
AT       ARCH.COR.2
         KEYWORD   WEST
         IFEQ  QUICKSAND,0
            BIT   QUICKSAND,SPECIAL1
               SAY   SCHLURP2
            ELSE
               SAY   SCHLURP
               BIS   QUICKSAND,SPECIAL1
            FIN
            GOTO  YLEM
            CALL  CORONER
         ELSE
            GOTO  ARCH.COR.1
            SET   QUICKSAND,0
         FIN
         QUIT
AT       ARCH.FORK
         MOVE  SOUTH,ARCH.COR.2
         MOVE  NORTH,FOURIER
         MOVE  EAST,JONAH
         MOVE  JONAH,JONAH
         MOVE  FOURIER,FOURIER
AT       FOURIER
         MOVE  NORTHWEST,ARCH.FORK
         MOVE  SOUTHWEST,SHELF
AT       SHELF
         MOVE  WEST,FOURIER
         MOVE  DOWN,BEACH
         MOVE  STEPS,BEACH
AT       BEACH
         ANYOF UP,SHELF,STEPS,WEST
         SET   DINGHY,1
         GOTO  SHELF
         QUIT
AT       BEACH
         ANYOF WATER,FILL,DRINK
         SAY   SALT.H20.BAD
         QUIT
AT       JONAH
         MOVE  SOUTH,IN.JONAH
         MOVE  WEST,ARCH.FORK
AT       IN.JONAH
         MOVE  NORTH,JONAH
         MOVE  OUT,JONAH
AT       FACES
         MOVE  NORTH,BY.FIGURE
AT       FACES
         ANYOF CROSS,GORGE,SOUTH
         IFEQ  GORGE,0
            SAY   NO.ARCH
         ELSE
            IFHAVE   RING
               IFHAVE   SCEPTRE
                  SAY   GHOST.BANG
                  GOTO  YLEM
                  SET   GORGE,0
                  CALL  CORONER
               ELSE
                  GOTO  BREATHTAKER
               FIN
            ELSE
               SAY   FUMES.BURN
               GOTO  YLEM
               CALL  CORONER
            FIN
         FIN
         QUIT
AT       BY.FIGURE
         IFEQ  STATUE,1
            MOVE  NORTHWEST,PLAIN.1
            MOVE  NORTH,BASQUE.1
            MOVE  NORTHEAST,BANSHEE.1
         FIN
         MOVE  SOUTH,FACES
AT       PLAIN.1
         MOVE  SOUTH,BY.FIGURE
         IFKEY NORTH
            SET   FOG,0
            APPORT   FOG,PLAIN.2
            GOTO  PLAIN.2
            QUIT
         FIN
AT       PLAIN.2
         ANYOF NORTH,EAST,SOUTH,WEST
         ANYOF NE,NW,SE,SW
         ITLIST   I     {if this turkey left anything here in the fog,}
            IFNEAR   I
               AND
               NOT
            IFHAVE   I
               AND
            BIT   I,PORTABLE  {he's going to lose it forever!}
               APPORT   I,YLEM
            FIN
         EOI
         LDA   I,EAST
         ADD   I,GLOW
         IFEQ  I,ARG2
            AND
         IFEQ  STATUS,2
            OR
         IFEQ  I,ARG1
            AND
         IFNEAR   GLOW     {by luck? or did he know for sure?}
            GOTO  PLAIN.3
            SET   FOG,8    {so it's not obvious}
         ELSE
            GOTO  PLAIN.2  {bad moves - stumble back here!}
         FIN
         QUIT
AT       PLAIN.3
         IFKEY DOWN
            GOTO  NONDESCRIPT
            APPORT   FOG,PLAIN.1
            QUIT
         FIN
AT       PLAIN.3
         ANYOF NORTH,EAST,SOUTH,WEST
         ANYOF NE,NW,SE,SW
         GOTO  PLAIN.2
         SET   FOG,0    {so it starts changing again}
         QUIT
AT       NONDESCRIPT
         MOVE  NORTH,PENTAGRAM
         MOVE  PENTAGRAM,PENTAGRAM
AT       NONDESCRIPT
         ANYOF UP,SOUTH
         APPORT   FOG,PLAIN.2
         GOTO  PLAIN.3
         QUIT
AT       PENTAGRAM
         KEYWORD FLASK
         ANYOF DROP,THROW
         HAVE  FLASK
         IFEQ  FLASK,1
            DROP  FLASK
            SAY   SET.FLASK.DOWN
            SET   FLASK,0
            QUIT
         FIN
AT       PENTAGRAM
         MOVE  WEST,NONDESCRIPT
         MOVE  OUT,NONDESCRIPT
         MOVE  NONDESCRIPT,NONDESCRIPT
         MOVE  NORTH,CHIMNEY
         MOVE  CRACK,CHIMNEY
         MOVE  CHIMNEY,CHIMNEY
AT       CHIMNEY
         MOVE  UP,TUBE
         MOVE  CLIMB,TUBE
         MOVE  TUBE,TUBE
         MOVE  SOUTH,PENTAGRAM
         MOVE  PENTAGRAM,PENTAGRAM
         MOVE  CRACK,PENTAGRAM
AT       TUBE
         MOVE  DOWN,CHIMNEY
         MOVE  CHIMNEY,CHIMNEY
         MOVE  CLIMB,CHIMNEY
         MOVE  TUBE,TUBE.SLIDE
         MOVE  SLIDE,TUBE.SLIDE
         MOVE  SOUTH,TUBE.SLIDE
AT       TUBE.SLIDE
         SMOVE SOUTH,PLAIN.1,OOF
         SMOVE DOWN,PLAIN.1,OOF
         SMOVE SLIDE,PLAIN.1,OOF
         MOVE  NORTH,TUBE
         MOVE  CHIMNEY,CHIMNEY
         MOVE  TUBE,CHIMNEY
AT       BASQUE.1
         MOVE  SOUTH,BY.FIGURE
         IFKEY NORTH
            GOTO  BASQUE.2
            ADD   BASILISK,1
            IFEQ  BASILISK,1
               SAY   BAS.GRUMBLE
            FIN
            QUIT
         FIN
AT       BASQUE.2
         MOVE  NORTH,BASQUE.FORK
         IFKEY SOUTH
            SUB   BASILISK,1
            IFEQ  BASILISK,0
               IFHAVE   PLATE
                  SAY   PETRIFY.SELF
                  SET   BASILISK,2
               ELSE
                  SAY   PETRIFY.ME
                  CALL  CORONER
               FIN
            FIN
            GOTO  BASQUE.1
            QUIT
         FIN
AT       BASQUE.FORK
         MOVE  NORTH,PEELGRUNT
         MOVE  PEELGRUNT,PEELGRUNT
         MOVE  SOUTH,BASQUE.2
         MOVE  DOWN,ON.STEPS
         MOVE  STEPS,ON.STEPS
AT       PEELGRUNT
         ANYOF SOUTH,OUT,FORK
         IFEQ  SAFE,1
            SAY   SAFE.BLOCKS
         ELSE
            GOTO  BASQUE.FORK
         FIN
         QUIT
AT       PEELGRUNT
         KEYWORD  IN
         IFEQ  SAFE,1
            SET   SAFEEXIT,HERE
            GOTO  INSAFE
         ELSE
            SAY   CANTENTERSAFE
         FIN
         QUIT
AT       ON.STEPS
         MOVE  UP,BASQUE.FORK
         MOVE  DOWN,STEPS.EXIT
         MOVE  STEPS,STEPS.EXIT
AT       STEPS.EXIT
         MOVE  UP,ON.STEPS
         MOVE  DOWN,STORAGE
         MOVE  NORTH,FAKE.Y2
         MOVE  STEPS,STORAGE
         MOVE  EXIT,FAKE.Y2
AT       STORAGE
         MOVE  UP,STEPS.EXIT
         MOVE  STEPS,STEPS.EXIT
AT       FAKE.Y2
         MOVE  SOUTH,STEPS.EXIT
         MOVE  WEST,CATACOMBS.1
         MOVE  EAST,FAKE.JUMBLE
AT       FAKE.Y2
         ANYOF PLUGH,PLOVER
         BIT   ADMIN,NOMAGIC
            SAY   NOTHING
         ELSE
            SAY   FOOF
            GOTO  PLATFORM
         FIN
         QUIT
AT       FAKE.JUMBLE
         MOVE  DOWN,FAKE.Y2
         MOVE  WEST,FAKE.Y2
         MOVE  UP,CATACOMBS.1
AT       AUDIENCE
         MOVE  EAST,AUDIENCE.E
         MOVE  WEST,CATACOMBS.11
AT       AUDIENCE.E
         MOVE  WEST,AUDIENCE
AT       CATACOMBS.1
         MOVE  SOUTH,CATACOMBS.2
         ANYOF NORTH,NW,WEST,SW,SE,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.1
         QUIT
AT       CATACOMBS.2
         MOVE  SW,CATACOMBS.3
         ANYOF NORTH,NW,WEST,SOUTH,SE,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.1
         QUIT
AT       CATACOMBS.3
         MOVE  NW,CATACOMBS.4
         ANYOF NORTH,WEST,SW,SOUTH,SE,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.2
         QUIT
AT       CATACOMBS.4
         MOVE  SOUTH,CATACOMBS.5
         ANYOF NORTH,NW,WEST,SW,SE,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.3
         QUIT
AT       CATACOMBS.5
         MOVE  DOWN,CATACOMBS.6
         ANYOF NORTH,NW,WEST,SW,SOUTH,SE,EAST,NE,UP
         GOTO  CATACOMBS.4
         QUIT
AT       CATACOMBS.6
         MOVE  WEST,CATACOMBS.7
         ANYOF NORTH,NW,SW,SOUTH,SE,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.5
         QUIT
AT       CATACOMBS.7
         MOVE  NW,CATACOMBS.8
         ANYOF NORTH,WEST,SW,SOUTH,SE,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.6
         QUIT
AT       CATACOMBS.8
         MOVE  NORTH,CATACOMBS.9
         ANYOF NW,WEST,SW,SOUTH,SE,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.7
         QUIT
AT       CATACOMBS.9
         MOVE  SOUTH,CATACOMBS.10
         ANYOF NORTH,NW,WEST,SW,SE,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.8
         QUIT
AT       CATACOMBS.10
         MOVE  NORTH,CATACOMBS.11
         ANYOF NW,WEST,SW,SOUTH,SE,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.9
         QUIT
AT       CATACOMBS.11
         MOVE  SW,CATACOMBS.12
         MOVE  EAST,AUDIENCE
         ANYOF NORTH,NW,WEST,SOUTH,SE,NE,UP,DOWN
         GOTO  CATACOMBS.10
         QUIT
AT       CATACOMBS.12
         MOVE  EAST,CATACOMBS.13
         ANYOF NORTH,NW,WEST,SW,SOUTH,SE,NE,UP,DOWN
         GOTO  CATACOMBS.11
         QUIT
AT       CATACOMBS.13
         MOVE  SE,CATACOMBS.14
         ANYOF NORTH,NW,WEST,SW,SOUTH,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.12
         QUIT
AT       CATACOMBS.14
         MOVE  NE,CATACOMBS.15
         ANYOF NORTH,NW,WEST,SW,SOUTH,SE,EAST,UP,DOWN
         GOTO  CATACOMBS.13
         QUIT
AT       CATACOMBS.15
         MOVE  EAST,CATACOMBS.16
         ANYOF NORTH,NW,WEST,SW,SOUTH,SE,NE,UP,DOWN
         GOTO  CATACOMBS.14
         QUIT
AT       CATACOMBS.16
         MOVE  SE,CATACOMBS.17
         ANYOF NORTH,NW,WEST,SW,SOUTH,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.15
         QUIT
AT       CATACOMBS.17
         MOVE  DOWN,CATACOMBS.18
         ANYOF NORTH,NW,WEST,SW,SOUTH,SE,EAST,NE,UP
         GOTO  CATACOMBS.16
         QUIT
AT       CATACOMBS.18
         MOVE  SOUTH,CATACOMBS.19
         ANYOF NORTH,NW,WEST,SW,SE,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.17
         QUIT
AT       CATACOMBS.19
         MOVE  NORTH,FAKE.Y2
         ANYOF NW,WEST,SW,SOUTH,SE,EAST,NE,UP,DOWN
         GOTO  CATACOMBS.18
         QUIT
AT       BANSHEE.1
         MOVE  NORTHWEST,BY.FIGURE
         MOVE  NORTH,GOLDEN
         MOVE  GOLDEN,GOLDEN
AT       GOLDEN
         MOVE  NORTHEAST,ARABESQUE
         MOVE  NORTHWEST,TRANSLUCENT
         MOVE  ARABESQUE,ARABESQUE
         MOVE  TRANSLUCENT,TRANSLUCENT
         MOVE  SOUTH,BANSHEE.1
AT       ARABESQUE
         MOVE  SOUTH,GOLDEN
         MOVE  OUT,GOLDEN
         MOVE  GOLDEN,GOLDEN
AT       TRANSLUCENT
         ANYOF OUT,EAST,GOLDEN
         NOT
         BIT   GOBLINS,SPECIAL1
            BIS   GOBLINS,SPECIAL1
            APPORT   GOBLINS,HERE
            SET   GOBLINS,-1
         FIN
         GOTO  GOLDEN
         QUIT
AT       PLATFORM
         SMOVE PLUGH,FAKE.Y2,FOOF
         SMOVE PLOVER,FAKE.Y2,FOOF
AT       PLATFORM
         ANYOF DOWN,CLIMB,NORTH,SOUTH,EAST,WEST,NORTHEAST
         ANYOF NORTHWEST,SOUTHEAST,SOUTHWEST,JUMP
         SAY   SIZZLE
         GOTO  YLEM
         CALL  CORONER
AT       CYLINDRICAL
         ANYOF ZORTON,XYZZY,THURB,SNOEZE,SAMOHT,PLUGH,NOSIDE,MELENKURION
         ANYOF KNERL,KLAETU,FOO,FOE,FIE,FEE,BLERBI,PHUGGG
         IFKEY SAY
            SET   I,ARG2
         ELSE
            IFEQ  STATUS,1    {only 1 magic word?}
               SET   I,ARG1      {use it}
              ELSE              {otherwise}
               SET   I,0         {nothing happens}
            FIN
         FIN
         LDA   J,ZORTON
         SUB   I,J
         IFEQ  I,ESCAPE
            IFKEY BLERBI
               SET   CLOSURE,4
               SAY   FOOF
               GOTO  ROAD
            ELSE
               SAY   OK!
               ADD   ESCAPE,1
            FIN
         ELSE
            SET   ESCAPE,0
            SAY   NOTHING
         FIN
         QUIT
DEFINE   HERE,THERE,ARG1,ARG2,STATUS
DEFINE    ROAD
DEFINE    HILL
DEFINE    BUILDING,HOUSE
DEFINE    VALLEY
DEFINE    FOREST
DEFINE    SLIT
DEFINE    DEPRESSION
DEFINE    COBBLES
DEFINE    DEBRIS
DEFINE    CANYON
DEFINE    PIT
DEFINE    MISTS
DEFINE    MTKING
DEFINE    Y2
DEFINE    JUMBLE,WALL,BROKEN
DEFINE    WINDOW
DEFINE    DIRTY
DEFINE    BRINK
DEFINE    DUSTY
DEFINE    CROSSOVER
DEFINE    COMPLEX
DEFINE    BEDQUILT
DEFINE    SWISS
DEFINE    SLAB
DEFINE    LOW
DEFINE    INCLINE
DEFINE    GIANT
DEFINE    CAVERN
DEFINE    SOFT
DEFINE    ORIENTAL
DEFINE    MISTY
DEFINE    ALCOVE
DEFINE    PLOVER
DEFINE    DARK
DEFINE    ARCHED
DEFINE    SHELL
DEFINE    ANTEROOM
DEFINE    RESERVOIR
DEFINE    SLOPING
DEFINE    CORRIDOR
DEFINE    FORK
DEFINE    BOULDERS
DEFINE    LIMESTONE
DEFINE    BARREN
DEFINE    LIMBO
DEFINE   LAIR
DEFINE   ICE
DEFINE   GLASSY
DEFINE   TOOL
DEFINE   MORION
DEFINE   VAULT
DEFINE   CUBICLE
DEFINE   SPHERICAL
DEFINE   SLIDE
DEFINE   SHELF
DEFINE   BEACH
DEFINE   FOURIER
DEFINE   JONAH
DEFINE   FACES
DEFINE   NONDESCRIPT
DEFINE   PENTAGRAM
DEFINE   PEELGRUNT
DEFINE   STORAGE
DEFINE   AUDIENCE
DEFINE   ARABESQUE
DEFINE   TRANSLUCENT
DEFINE   INSAFE
DEFINE   PLATFORM
DEFINE   SANDSTONE
DEFINE   CHIMNEY
DEFINE   TUBE
DEFINE   WARM
DEFINE   BALCONY
DEFINE   CYLINDRICAL
*
*        This module defines the actions to be taken when certain
*        verb, verb/object, or object/object word sequences are
*        spoken.  BEWARE:  When defining a set of alternate actions
*        to be taken for different uses of a word, you must ALWAYS
*        use the same definition of the word - do NOT define ANY
*        actions for the word's synonyms if any, or you will lose
*        some of your action controls!
*
ACTION   GET
         IFEQ  LAMP,0   {off?}
            OR
            NOT
         IFNEAR   LAMP  {missing the lamp?}
            AND
            NOT
         BIT   HERE,LIT {place is not illuminated}
            CALL  GROPE.FOR.IT   {have to grope around for it}
         FIN
         DEFAULT   PORTABLE {hope this works!}
         ANYOF BIRD,CAGE,BOTTLE,OIL,WATER,CHAIN,BEAR,INVENTORY,CLAM
         ANYOF SWORD,SCEPTRE,KNIFE
         IFKEY BIRD
            CALL GETBIRD
         ELSE
            IFKEY CAGE
               CALL  GETCAGE
            ELSE
               IFKEY BOTTLE
                  CALL  GETBOTTLE
               ELSE
                  IFKEY OIL
                     CALL GETOIL
                  ELSE
                     IFKEY WATER
                        CALL  GETWATER
                     ELSE
                        IFKEY CHAIN
                           CALL  GETCHAIN
                        ELSE
                           IFKEY BEAR
                              CALL  GETBEAR
                           ELSE
                              IFKEY INVENTORY
                                 CALL  INVENTORY
                              ELSE
                                 IFKEY SWORD
                                    CALL  GETSWORD
                                 ELSE
                                    IFKEY SCEPTRE
                                       CALL  GETSCEPTRE
                                    ELSE
                                       IFKEY KNIFE
                                          CALL  GETKNIFE
                                       FIN
                                    FIN
                                 FIN
                              FIN
                           FIN
                        FIN
                     FIN
                  FIN
               FIN
            FIN
         FIN
ACTION   GET          {Generalized last-case "get" routine}
         IFEQ  STATUS,1
            PROCEED
         FIN
         BIT   ARG2,OBJECT
         ELSE
            SAY   HAH!
            QUIT
         FIN
         IFHAVE   ARG2
            SAY   YOUHAVEIT
            QUIT
         FIN
         IFNEAR   ARG2
         ELSE
            NAME  IDONTSEE,ARG2
            QUIT
         FIN
         BIT   ARG2,PORTABLE
         ELSE
            SAY   HAH!
            QUIT
         FIN
         IFLT  INVCT,STRENGTH
            GET   ARG2
            SAY   OK
            BIT ARG2,UNSTABLE
               EVAL  J,ARG2
               IFEQ  J,0
                  DEPOSIT  ARG2,1
               FIN
            FIN
         ELSE
            SAY   ARMSAREFULL
         FIN
         QUIT
ACTION   DROP
         ANYOF BIRD,CAGE,BOTTLE,OIL,WATER,VASE,VIAL,DJINN,BEAR
         IFKEY BIRD
            CALL DROPBIRD
         ELSE
            IFKEY CAGE
               CALL  DROPCAGE
            ELSE
               IFKEY BOTTLE
                  CALL  DROPBOTTLE
               ELSE
                  IFKEY OIL
                     OR
                  IFKEY WATER
                     CALL DROPLIQUID
                  ELSE
                     IFKEY VASE
                        CALL  DROPVASE
                     ELSE
                        IFKEY VIAL
                           CALL  DROPVIAL
                        ELSE
                           IFKEY DJINN
                              CALL  FREEDJINN
                           ELSE
                              IFKEY BEAR
                                 CALL  DROPBEAR
                              FIN
                           FIN
                        FIN
                     FIN
                  FIN
               FIN
            FIN
         FIN
         PROCEED
ACTION   DROP               {Generalized "drop" control}
         IFEQ  STATUS,1
            PROCEED
         FIN
         BIT   ARG2,OBJECT
         ELSE
            SAY   HAH!
            QUIT
         FIN
         IFHAVE   ARG2
            DROP  ARG2
            SAY   OK
         ELSE
            SAY   NOTCARRYING
         FIN
         QUIT
ACTION   WALK
         IFEQ  STATUS,1
            NAME  WHICHWAY,ARG1
         ELSE
            IFKEY NORTH
               OR
            IFKEY SOUTH
               OR
            IFKEY EAST
               OR
            IFKEY WEST
               OR
            IFKEY NORTHEAST
               OR
            IFKEY NORTHWEST
               OR
            IFKEY SOUTHEAST
               OR
            IFKEY SOUTHWEST
               OR
            IFKEY UP
               OR
            IFKEY DOWN
               OR
            IFKEY BACK
               OR
            IFKEY CAVE
               OR
            IFKEY OUT
               OR
            IFKEY IN
               CALL  ARG2
            ELSE
               BIT   ARG2,PLACE
                  IFAT  ARG2
                     SAY   NEEDDETAIL
                  ELSE
                     SAY   NO.CAN.GO
                  FIN
               ELSE
                  SAY   HUH??
               FIN
            FIN
         FIN
         QUIT
ACTION   DIG
         SAY   NEEDSHOVEL
         QUIT
ACTION   CAVE
         AT VALLEY,FOREST,FOREST2,STREAM,ROAD,SLIT,DEPRESSION,BUILDING
         SAY   WHEREISCAVE
         QUIT
ACTION   CAVE
         SAY   NEEDDETAIL
         QUIT
ACTION   WATER DOOR
         IFNEAR   DOOR
            IFHAVE   WATER
               APPORT   WATER,LIMBO
               SET   BOTTLE,1
               SAY   HINGES..RUST
               SET   DOOR,0
            ELSE
               NAME  YOUDONTHAVE,ARG1
            FIN
         ELSE
            NAME  IDONTSEE,ARG2
         FIN
         QUIT
ACTION   OIL   DOOR
         IFNEAR   DOOR
            IFHAVE   OIL
               APPORT   OIL,LIMBO
               SET   BOTTLE,1
               SET   DOOR,1
               SAY   OIL..DOOR
            ELSE
               NAME  YOUDONTHAVE,ARG1
            FIN
         ELSE
            NAME  IDONTSEE,ARG2
         FIN
         QUIT
ACTION   WATER PLANT
         IFNEAR   PLANT
            IFHAVE   WATER
               APPORT   WATER,LIMBO
               SET   BOTTLE,1
               ADD   PLANT,1
               SAY   PLANT
               ADD   PLANT,1
               IFEQ  PLANT,6
                  SET   PLANT,0
                  BIS   PLANT2,INVISIBLE
               ELSE
                  BIC   PLANT2,INVISIBLE
               FIN
               GOTO  HERE
               SET   PLANT2,PLANT
            ELSE
               NAME  YOUDONTHAVE,ARG1
            FIN
         ELSE
            NAME  IDONTSEE,ARG2
         FIN
         QUIT
ACTION   OIL PLANT
         IFNEAR   PLANT
            IFHAVE   OIL
               APPORT   OIL,LIMBO
               SET   BOTTLE,1
               SAY   OIL..PLANT
            ELSE
               NAME  YOUDONTHAVE,ARG1
            FIN
         ELSE
            NAME  IDONTSEE,ARG2
         FIN
         QUIT
ACTION   OIL
         IFEQ  STATUS,1
            IFNEAR   BOTTLE
               AND
            IFEQ  BOTTLE,2
               OR
            IFHAVE   OIL
               OR
            IFAT  EASTPIT
               NAME  WHAT.DO,ARG1
            ELSE
               NAME  IDONTSEE,ARG1
            FIN
         ELSE
            SAY   HAH!
         FIN
         QUIT
ACTION   WATER
         IFEQ  STATUS,1
            IFNEAR   BOTTLE
               AND
            IFEQ  BOTTLE,0
               OR
            IFHAVE   WATER
               OR
            BIT   HERE,H20HERE
               NAME  WHAT.DO,ARG1
            ELSE
               NAME  IDONTSEE,ARG1
            FIN
         ELSE
            SAY   HAH!
         FIN
         QUIT
ACTION   THROW
         ANYOF AXE,SWORD
         CALL  WEAPONRY
ACTION   THROW FOOD
         HAVE  FOOD
         IFNEAR   TROLL
            SAY   FEED..TROLL
         ELSE
            IFNEAR   DWARF
               SAY   FED..DWARF
               DROP  FOOD
               BIS   DWARF,SPECIAL2 {enrage the dwarf}
            ELSE
               IFNEAR   BEAR
                  SAY   BEAR..URRP
                  APPORT   FOOD,LIMBO
                  SET   BEAR,1
                  IFEQ  AXE,1
                     SET   AXE,0
                  FIN
               ELSE
                  PROCEED
               FIN
            FIN
         FIN
         QUIT
ACTION   THROW TEETH
         HAVE  TEETH
         SET   TEETH,0
         NEAR   GOBLINS
         SAY   WARRIORS
         APPORT   TEETH,LIMBO
         APPORT   GOBLINS,LIMBO
         QUIT
ACTION   THROW VIAL
         HAVE  VIAL
         CALL  BREAK.VIAL
ACTION   WAVE
         IFGT  STATUS,1
            NOT
            BIT   ARG2,OBJECT
               SAY   HAH!
               QUIT
            FIN
            IFHAVE   ARG2
            ELSE
               SAY   NOTCARRYING
               QUIT
            FIN
         FIN
         IFKEY ROD
            IFNEAR   FISSURE
               IFLT  CLOSURE,2
                  ADD   FISSURE,1
                  SAY   FISSURE
                  IFEQ  FISSURE,2
                     SET   FISSURE,0
                     BIS   FISSURE,INVISIBLE
                  ELSE
                     BIC   FISSURE,INVISIBLE
                  FIN
               ELSE
                  SAY   NOTHING
               FIN
            ELSE
               IFNEAR   QUICKSAND
                  SAY   NOTHING.OBVIOUS
                  SET   QUICKSAND,1    {harden the quicksand for a while}
               ELSE
                  IFNEAR   GORGE
                     AND
                  IFLT  CLOSURE,2
                     ADD   GORGE,1
                     SAY   GORGE
                     ADD   GORGE,1
                     IFEQ  GORGE,4
                        SET   GORGE,0
                        BIS   GORGE,INVISIBLE
                     ELSE
                        BIC   GORGE,INVISIBLE
                     FIN
                  ELSE
                     SAY   NOTHING
                  FIN
               FIN
            FIN
         ELSE
            IFKEY AXE
               OR
            IFKEY SWORD
               CALL  WEAPONRY
            ELSE
               SAY   NOTHING
            FIN
         FIN
         QUIT
ACTION   THROW              {Generalized "throw" control}
         IFEQ  STATUS,2
            BIT   ARG2,OBJECT {throwing objects}
               IFHAVE   ARG2  {that you happen to be carrying}
                  AND         {in a place that things can be}
               BIT   HERE,THROWER {thrown from, to someplace else}
                  CALL  UPCHUCK     {find the destination and print}
               FIN               {the message}
            FIN
         FIN
         CALL  DROP
ACTION   NORTH
         CALL  NO.MOVE.POSSIBLE
         QUIT
ACTION   SOUTH
         CALL  NO.MOVE.POSSIBLE
         QUIT
ACTION   UP
         CALL  NO.MOVE.POSSIBLE
         QUIT
ACTION   DOWN
         CALL  NO.MOVE.POSSIBLE
         QUIT
ACTION   EAST
         CALL  NO.MOVE.POSSIBLE
         QUIT
ACTION   WEST
         CALL  NO.MOVE.POSSIBLE
         QUIT
ACTION   NORTHEAST
         CALL  NO.MOVE.POSSIBLE
         QUIT
ACTION   NORTHWEST
         CALL  NO.MOVE.POSSIBLE
         QUIT
ACTION   SOUTHEAST
         CALL  NO.MOVE.POSSIBLE
         QUIT
ACTION   SOUTHWEST
         CALL  NO.MOVE.POSSIBLE
         QUIT
ACTION   INVENTORY
         SET   J,0
         ITOBJ I
            IFHAVE   I
               IFEQ  J,0
                  SAY   YOUNOWHAVE
                  SET   J,1
               FIN
               SAY   I
            FIN
         EOI
         IFEQ  J,0
            SAY   ARMSAREEMPTY
         FIN
         QUIT
ACTION   LOOK
         ANYOF MIST,TREES
         CALL  ARG2
ACTION   LOOK
         IFNEAR   LAMP
            AND
         IFEQ  LAMP,1
            OR
         BIT   HERE,LIT
            SET   J,0
            BIT   STATUS,FASTMODE
            ELSE
               BIS   STATUS,FULLDISP
               SET   J,1
            FIN
            SAY   HERE
            BIT   HERE,DAMP
               SAY   GROUND.IS.DAMP
            FIN
            BIC   STATUS,FULLDISP
            BIS   HERE,BEENHERE
            ITLIST I
               IFNEAR   I
                  AND
                  NOT
               IFHAVE   I
                  IFEQ  J,1
                     AND
                     NOT
                  BIT   I,INVISIBLE
                     SET   J,0
                     SAY   BLANK
                  FIN
                  BIS   I,SEEN
                  SAY   I
               FIN
            EOI
            IFHAVE   BEAR
               SAY   I.C.A.BEAR
            FIN
         ELSE
            SAY   NOLIGHTHERE
         FIN
         QUIT
ACTION   LIGHT
         IFKEY LAMP
            OR
         IFEQ  STATUS,1
            IFNEAR   LAMP
               IFEQ  LAMP,1
                  SAY   LAMPWASON
                  QUIT
               FIN
               IFLT  LAMPLIFE,40
                  IFNEAR   BATTERIES
                     AND
                  IFEQ  BATTERIES,0
                     SAY   NEW.BATTERIES
                     SET   BATTERIES,1
                     ADD   LAMPLIFE,300
                     BIC   LAMP,SPECIAL1  {clear "recharged" flag}
                  FIN
               FIN
               IFGT  LAMPLIFE,0
                  SET   LAMP,1   {light the lamp}
                  SAY   LAMPNOWON   {tell him it's lit}
                  BIT   HERE,LIT
                  ELSE
                     CALL  LOOK
                  FIN
                  CALL  PHOG
               ELSE
                  SAY   LAMP.IS.DEAD
               FIN
            ELSE
               IFKEY LAMP
                  NAME  IDONTSEE,ARG2
               ELSE
                  SAY   NOLIGHTHERE
               FIN
            FIN
            QUIT
         FIN
ACTION   EXTINGUISH
         IFKEY LAMP
            OR
         IFEQ  STATUS,1
            IFNEAR   LAMP
               IFEQ  LAMP,0      {was it off?}
                  SAY   LAMPWASOFF
                  QUIT
               FIN
               SET   LAMP,0
               SAY   LAMPNOWOFF
               BIT   HERE,LIT
               ELSE
                  SAY   ITISNOWDARK
               FIN
               CALL  PHOG
            ELSE
               IFKEY LAMP
                  NAME  IDONTSEE,ARG2
               ELSE
                  PROCEED     {the standard bailout will say catch it}
               FIN
            FIN
         ELSE
            SAY   DUNNO.HOW
         FIN
         QUIT
ACTION   OPEN
         DEFAULT  OPENABLE
         KEYWORD  GRATE
         NEAR   GRATE
         IFHAVE   KEYS
            IFGT  CLOSURE,1
               OR
            BIT   ADMIN,NOMAGIC
               SAY   GRATE.STUCK
               IFGT  CLOSURE,1
                  BIS   ADMIN,PANICED
                  BIT   GRATE,SPECIAL1
                  ELSE
                     BIS   GRATE,SPECIAL1
                     SAY   GRATE.CLOSED
                  FIN
               FIN
            ELSE
               SET   GRATE,1
               SAY   GRATEUNLOCKED
               BIC   DEPRESSION,HINTABLE
            FIN
         ELSE
            SAY   NEEDKEYS
         FIN
         QUIT
ACTION   OPEN  CHAIN
         NEAR   CHAIN
         IFHAVE   KEYS
            IFEQ  CHAIN,0
               SAY   CHAIN.UNLOCKED
            ELSE
               IFEQ  CHAIN,1
                  IFEQ  BEAR,0
                     SAY   BEAR..CHAIN
                  ELSE
                     SAY   CHAIN.UNLOCKED
                     SET   CHAIN,0
                     SET   BEAR,2
                  FIN
               ELSE
                  SAY   CHAIN.UNLOCKED
                  SET   CHAIN,0
               FIN
            FIN
         ELSE
            SAY   NEEDKEYS
         FIN
         QUIT
ACTION   OPEN DOOR
         NEAR   DOOR
         SAY   NOLOCK
         QUIT
ACTION   OPEN  KEYS
         SAY   UNLOCKKEYS
         QUIT
ACTION   OPEN  SAFE
         NEAR  SAFE
         IFEQ  SAFE,0
            SAY   NO.KEYHOLE
         ELSE
            IFEQ  SAFE,1
               NAME  ALREADY.OPEN,ARG2
            ELSE
               SAY   IT.IS.MELTED
            FIN
         FIN
         QUIT
ACTION   OPEN CLAM
         NEAR   CLAM
         IFHAVE   CLAM
            SAY   DROP.THE.CLAM
         ELSE
            IFHAVE   TRIDENT
               APPORT   CLAM,LIMBO
               APPORT   OYSTER,HERE
               APPORT   PEARL,CULDESAC
               SAY   CLAM..OPENED
            ELSE
               SAY   NEED.TRIDENT
            FIN
         FIN
         QUIT
ACTION   OPEN OYSTER
         NEAR   OYSTER
         IFHAVE   OYSTER
            SAY   DROP.THE.OYSTER
         ELSE
            IFHAVE   TRIDENT
               SAY   OYSTER..OPENED
            ELSE
               SAY   NEED.TRIDNT2
            FIN
         FIN
         QUIT
ACTION   OPEN VIAL
         NEAR  VIAL
         CALL  BREAK.VIAL
ACTION   OPEN FLASK
         NEAR  FLASK
         IFLT  FLASK,2
            IFLOC FLASK,PENTAGRAM
               APPORT   DJINN,PENTAGRAM
               SAY   POLITE.DJINN
            ELSE
               SAY   RUDE.DJINN
            FIN
            SET   FLASK,2
         ELSE
            NAME  ALREADY.OPEN,ARG2
         FIN
         QUIT
ACTION   OPEN PENTAGRAM {weird case - opening a place!}
         IFAT  PENTAGRAM
            IFNEAR   DJINN
               SAY   DJINN.ADVICE
               APPORT   DJINN,LIMBO
               BIS   DJINN,SPECIAL1
            ELSE
               SAY   EMPTY.PENTA
            FIN
         ELSE
            NAME  IDONTSEE,ARG2
         FIN
         QUIT
ACTION   CLOSE
         DEFAULT  OPENABLE
         KEYWORD  GRATE
         NEAR GRATE
         SET   GRATE,0
         SAY   GRATELOCKED
         QUIT
ACTION   CLOSE CHAIN
         NEAR   CHAIN
         IFAT  BEARHERE
            IFEQ  CHAIN,0
               IFNEAR   BEAR
                  DROP BEAR
                  SET   BEAR,1
                  SET   CHAIN,1
               ELSE
                  SET   CHAIN,2
               FIN
            FIN
            SAY   LOCK..CHAIN
            IFHAVE   CHAIN
               DROP  CHAIN
            FIN
         ELSE
            SAY   LOCK..CHAIN?
         FIN
         QUIT
ACTION   CLOSE DOOR
         NEAR   DOOR
         SAY   NOLOCK
         QUIT
ACTION   CLOSE SAFE
         NEAR  SAFE
         IFEQ  SAFE,1
            SAY   SAFE.SHUTS
            SET   SAFE,0
         ELSE
            NAME  ALREADY.SHUT,ARG2
         FIN
         QUIT
ACTION   CLOSE FLASK
         NEAR  FLASK
         IFEQ  FLASK,0
            NAME  ALREADY.SHUT,ARG2
         ELSE
            NAME  DUNNO.HAO,ARG2
         FIN
         QUIT
ACTION   CLOSE CAVE
         BIT   ADMIN,OLORIN   {only wizards can force cave closure}
            CALL  CLOSE.THE.CAVE
         FIN
ACTION   HELP
         IFEQ  HINT.TIME,0
            SET   HINT.TIME,1
         FIN
         CALL  HINT.LOGIC     {try to locate hint for here}
         IFGT  HINT.TIME,0    {if no hint for this place}
            IFNEAR   DWARF
               OR
            IFNEAR   DRAGON
               OR
            IFNEAR   TROLL
               OR
            IFNEAR   OGRE
               OR
            IFGT  BLOB,0
               OR
            IFNEAR   QUICKSAND
               OR
            IFGT  GOBLINS,0
               OR
            IFNEAR   BASILISK
               SAY   CANT.HELP.YOU
             ELSE
               BIT   ADMIN,HELPED.HIM
                  SAY   NO.MORE.HELP
                ELSE
                  SAY   HELPDATA
                  BIS   ADMIN,HELPED.HIM
               FIN
            FIN
         FIN
         QUIT
ACTION   INFO
         SAY   INFO.2
         QUIT
ACTION   QUIT
         QUERY WANTTOQUIT
            SET   QUITTING,1
            CALL  FINIS
         FIN
         SAY   OK
         QUIT
ACTION   BRIEF
         SAY   BRIEF.OK
         BIS   STATUS,QUICKIE
         BIC   STATUS,FASTMODE
         LDA   OK,OK!
         QUIT
ACTION   LPSD
         IFEQ  STATUS,1
            OR
         NOT
         BIT   ADMIN,OLORIN
            SAY   WHAT?
            QUIT
         FIN
         BIT   ARG2,PLACE
            SAY   FOOF
            GOTO  ARG2
         ELSE
            SAY   WHAT?
         FIN
         QUIT
ACTION   KILL
         DEFAULT  MORTAL      {find default enemy in one exists}
         ANYOF TROLL,DWARF,DRAGON,SNAKE,BIRD,BEAR,OYSTER,CLAM,OGRE,BLOB
         ANYOF DJINN,GOBLINS,BASILISK,GONG
         NEAR   ARG2
         IFKEY TROLL
            CALL  KILLTROLL
         ELSE
            IFKEY DWARF
               CALL  KILLDWARF
            ELSE
               IFKEY DRAGON
                  CALL  KILLDRAGON
               ELSE
                  IFKEY SNAKE
                     CALL  KILLSNAKE
                  ELSE
                     IFKEY BLOB
                        CALL  KILLBLOB
                     ELSE
                        IFKEY BEAR
                           CALL KILLBEAR
                        ELSE
                           IFKEY CLAM
                              OR
                           IFKEY OYSTER
                              CALL  KILLBIVALVE
                           ELSE
                              IFKEY OGRE
                                 CALL  KILLOGRE
                              ELSE
                                 IFKEY BIRD
                                    CALL  KILLBIRD
                                 ELSE
                                    IFKEY DJINN
                                       CALL  KILLDJINN
                                    ELSE
                                       IFKEY GOBLINS
                                          CALL  KILLGOBLINS
                                       ELSE
                                          IFKEY BASILISK
                                             CALL  KILLBASILISK
                                          ELSE
                                             IFKEY GONG
                                                CALL  HITGONG
                                             FIN
                                          FIN
                                       FIN
                                    FIN
                                 FIN
                              FIN
                           FIN
                        FIN
                     FIN
                  FIN
               FIN
            FIN
         FIN
         QUIT
ACTION   KILL
         IFEQ  STATUS,1
            SAY   PACIFIST
            QUIT
         FIN
ACTION   FAST
         BIC   STATUS,QUICKIE
         BIS   STATUS,FASTMODE
         SAY   OK
         LDA   OK,SOK!
         QUIT
ACTION   FULL
         BIC   STATUS,QUICKIE
         BIC   STATUS,FASTMODE
         LDA   OK,OK!
         SAY   OK
         QUIT
ACTION   FEED
         ANYOF BEAR,TROLL,BIRD,SNAKE,DWARF,DRAGON,BASILISK,GOBLINS
         IFNEAR   ARG2
            IFKEY BEAR
               IFNEAR   FOOD
                  SAY   BEAR..URRP
                  SET   BEAR,1
                  IFHAVE   FOOD
                  FIN
                  APPORT   FOOD,LIMBO
                  IFEQ  AXE,1
                     SET   AXE,0
                  FIN
               ELSE
                  SAY   SNAKEWONTEAT
               FIN
            ELSE
               IFKEY TROLL
                  SAY   FEED..TROLL
               ELSE
                  IFKEY SNAKE
                     IFHAVE   BIRD
                        SAY   SNAKE..BIRD
                        APPORT   BIRD,LIMBO
                     ELSE
                        SAY   SNAKEWONTEAT
                     FIN
                  ELSE
                     IFKEY DWARF
                        SAY   FED..DWARF
                        BIS   DWARF,SPECIAL2 {makes him mad}
                     ELSE
                        IFKEY BIRD
                           SAY   BIRDSEED
                        ELSE
                           IFKEY DRAGON
                              IFEQ  DRAGON,0
                                 SAY   SNAKEWONTEAT
                              ELSE
                                 SAY   IT.IS.DEAD
                              FIN
                           ELSE
                              IFKEY BASILISK
                                 IFLT  BASILISK,2
                                    SAY   SNAKEWONTEAT
                                 ELSE
                                    SAY   IT.IS.DEAD
                                 FIN
                              ELSE
                                 IFKEY GOBLINS
                                    SAY   GOBL.EAT.YOU
                                 FIN
                              FIN
                           FIN
                        FIN
                     FIN
                  FIN
               FIN
            FIN
         ELSE
            NAME  IDONTSEE,ARG2
         FIN
         QUIT
ACTION   FEED
         IFEQ  STATUS,1
            SAY   HUH??
         ELSE
            SAY   HAH!
         FIN
         QUIT
ACTION   SCORE
         SET   QUITTING,1
         CALL  GETSCORE
         VALUE IFYOUQUIT,SCOREX
         VALUE IFYOUQUIT2,MAXSCORE
         QUIT
ACTION   JUMP
         SAY   NOJUMPING
         QUIT
ACTION   IN
         SAY   INFROMOUT
         QUIT
ACTION   OUT
         SAY   INFROMOUT
         QUIT
ACTION   ABRA
         SAY   MAGICKWORD
         QUIT
ACTION   FEE
         ANYOF FIE,FOE,FOO,FUM
         SET   FOOBAR,0
         SAY   NOTHING
         QUIT
ACTION   FEE
         SET   FOOBAR,1
         SAY   OK
         QUIT
ACTION   FIE
         IFEQ  FOOBAR,0
            SET   FOOBAR,2
            SAY   OK
         ELSE
            SET   FOOBAR,0
            SAY   NOTHING
         FIN
         QUIT
ACTION   FOE
         IFEQ  FOOBAR,1
            SET   FOOBAR,3
            SAY   OK
         ELSE
            SET   FOOBAR,0
            SAY   NOTHING
         FIN
         QUIT
ACTION   FOO
         IFEQ  FOOBAR,2
            IFLOC EGGS,GIANT
               OR
            IFLOC EGGS,YLEM   {threw 'em into the chasm}
               SAY   NOTHING
            ELSE
               IFNEAR   EGGS
                  SET   EGGS,1
               ELSE
                  IFAT  GIANT
                     SET   EGGS,0
                  ELSE
                     SET   EGGS,2
                  FIN
               FIN
               IFHAVE   EGGS
                  DROP  EGGS
               FIN
               SAY   EGGS
               SET   EGGS,0
               IFLOC EGGS,LIMBO  {if the eggs were given in toll}
                  BIS   TROLL,SPECIAL1    {can't be fooled twice}
                  IFEQ  TROLL,1  {bought off, not crossed}
                     OR
                  IFEQ  TROLL,2  {bought off, crossed}
                     IFNEAR   TROLL2   {at the chasm with a good bridge}
                        SET   TROLL,5  {irate}
                        SAY   TROLL    {bitch, bitch!}
                     FIN
                     SET   TROLL,0     {normal troll mode}
                     APPORT   TROLL,SWOFCHASM   {fetch him back}
                     APPORT   TROLL2,LIMBO      {discard fake troll}
                  FIN
               FIN
               APPORT   EGGS,GIANT
            FIN
         ELSE
            SAY   NOTHING
         FIN
         SET   FOOBAR,0
         QUIT
ACTION   FUM
         SET   FOOBAR,0
         SAY   NOTHING
         QUIT
ACTION   XYZZY
         SAY   NOTHING
         QUIT
ACTION   PLUGH
         SAY   NOTHING
         QUIT
ACTION   FIND  CAVE
         BIT   HERE,NOTINCAVE
            AND
            NOT
         BIT   INCAVE,BEENHERE
            SAY   WHEREISCAVE
         ELSE
            SAY   NEEDDETAIL
         FIN
         QUIT
ACTION   FIND
         IFGT  STATUS,1
            BIT   ARG2,OBJECT
               IFNEAR   ARG2
                  IFHAVE   ARG2
                     SAY   ITISHERENOW
                  ELSE
                     SAY   HERESOMEWHERE
                  FIN
               ELSE
                  SAY   CANTFIND
               FIN
               QUIT
            ELSE
               BIT   ARG2,PLACE
                  IFAT  ARG2
                     SAY   YOU.ARE.THERE
                  ELSE
                     SAY   CANTFIND
                  FIN
               ELSE
                  SAY   WHAT?
               FIN
               QUIT
            FIN
         FIN
ACTION   SWIM
         SAY   DUNNO.HOW
         QUIT
ACTION   BREAK VASE
         NEAR  VASE
         SAY   THROW.VASE
         IFHAVE   VASE
         FIN
         APPORT   VASE,LIMBO
         APPORT   SHARDS,HERE
         QUIT
ACTION   BREAK VIAL
         NEAR  VIAL
         CALL  BREAK.VIAL
ACTION   FIX   VASE
         NEAR  POTTERY
         SAY   NO.CAN.FIX
         QUIT
ACTION   FILL VASE
         NEAR  VASE
         BIT   HERE,H20HERE
            OR
         IFAT  EASTPIT
            SAY   SHATTER.VASE
            IFHAVE   VASE
            FIN
            APPORT   VASE,LIMBO
            APPORT   SHARDS,HERE
         ELSE
            SAY   NOTHING.VASE
         FIN
         QUIT
ACTION   FILL BOTTLE
         NEAR  BOTTLE
         IFEQ  BOTTLE,1
            BIT   HERE,H20HERE
               SAY   BOTTLE..H20
               SET   BOTTLE,0
               IFHAVE   BOTTLE
                  GET   WATER
               FIN
            ELSE
               IFAT  EASTPIT
                  SAY   BOTTLE..OIL
                  SET   BOTTLE,2
                  IFHAVE   BOTTLE
                     GET   OIL
                  FIN
               ELSE
                  SAY   NOTHING2FILL
               FIN
            FIN
         ELSE
            SAY   BOTTLEWASFULL
         FIN
         QUIT
ACTION   FILL
         IFGT  STATUS,1
            SAY   CANTFILLTHAT
            QUIT
         FIN
ACTION   POUR WATER
         IFHAVE   WATER
            APPORT   WATER,LIMBO
            SET   BOTTLE,1
            IFNEAR   PLANT
               ADD   PLANT,1
               SAY   PLANT
               ADD   PLANT,1
               IFEQ  PLANT,6
                  SET   PLANT,0
                  BIS   PLANT2,INVISIBLE
               ELSE
                  BIC   PLANT2,INVISIBLE
               FIN
               GOTO  HERE
               SET   PLANT2,PLANT
            ELSE
               IFNEAR   DOOR
                  SAY   HINGES..RUST
                  SET   DOOR,0
               ELSE
                  SAY   POURWATER
                  BIS   HERE,DAMP   {dampen the ground}
               FIN
            FIN
         ELSE
            NAME  YOUDONTHAVE,WATER
         FIN
         QUIT
ACTION   POUR OIL
         IFHAVE   OIL
            APPORT   OIL,LIMBO
            SET   BOTTLE,1
            IFNEAR   PLANT
               SAY   OIL..PLANT
            ELSE
               IFNEAR   DOOR
                  SAY   OIL..DOOR
                  SET   DOOR,1
               ELSE
                  SAY   POURWATER
                  BIS   HERE,DAMP   {dampen the ground}
               FIN
            FIN
         ELSE
            NAME  YOUDONTHAVE,ARG2
         FIN
         QUIT
ACTION   PLACATE
         ANYOF DWARF,SNAKE,BIRD,DRAGON,TROLL,BEAR,PIRATE,OGRE,BASILISK,GOBLINS
         NEAR  ARG2
         SAY   IAMGAME
         QUIT
ACTION   EAT
         DEFAULT  EDIBLE
         NEAR  MUSHROOM
         IFEQ  STATUS,1
            OR
         IFKEY MUSHROOM
            IFHAVE   MUSHROOM
               DROP  MUSHROOM
            FIN
            SET   MUSHROOM,2
            SAY   MUSHROOM
            SET   MUSHTIME,30
            ADD   MUSHTIME,LASTCLOCK
            APPORT   MUSHROOM,LIMBO
            SET   STRENGTH,12
            QUIT
         FIN
ACTION   EAT
         NEAR   FOOD
         IFEQ  STATUS,1
            OR
         IFKEY FOOD
            IFHAVE   FOOD
            FIN
            APPORT   FOOD,LIMBO
            SAY   URRP
            QUIT
         FIN
ACTION   EAT
         ANYOF DWARF,DRAGON,BIRD,SNAKE,BEAR,TROLL,PLANT,OGRE
         ANYOF BASILISK,GOBLINS
         IFNEAR   ARG2
            SAY   BLEAH
         ELSE
            NAME  IDONTSEE,ARG2
         FIN
         QUIT
ACTION   EAT
         IFEQ  STATUS,1
            SAY   NO.FOOD
            QUIT
         ELSE
            BIT   ARG2,OBJECT
               IFNEAR   ARG2
                  SAY   REPULSIVE
                  QUIT
               FIN
            FIN
         FIN
ACTION   RUB   LAMP
         NEAR  LAMP
         NAME  RUBLAMP,ARG2
         QUIT
ACTION   RUB
         IFGT  STATUS,1
            BIT   ARG2,OBJECT
               IFNEAR   ARG2
                  SAY   PECULIAR
                  QUIT
               FIN
            FIN
         FIN
ACTION   BACK
         BIT   HERE,NOBACK
            OR
         BIT   THERE,NOBACK
            OR
         IFEQ  THERE,0
            SAY   CANTGOBACK
         ELSE
            GOTO  THERE
         FIN
         QUIT
ACTION   MIST
         SAY   THISISMIST
         QUIT
ACTION   SAY
         ANYOF PLUGH,XYZZY,PLOVER,THURB,MELENKURION,NOSIDE,SAMOHT
         ANYOF KNERL,ZORTON,KLAETU,SNOEZE,BLERBI,PHUGGG
         CALL  ARG2
         QUIT
ACTION   SAY
         IFEQ  STATUS,2
            QUIT
         FIN
ACTION   SAVE
         BIT   ADMIN,DEMO
            SAY   SUSP.DEMO
         ELSE
            SET   I,1
            IFGT MINTIME,0
             AND
             NOT
            BIT   ADMIN,OLORIN
               VALUE MUSTWAIT,MINTIME
               QUERY IS.THIS.OK?
               ELSE
                  SET   I,0
               FIN
            FIN
            IFGT  I,0
               SVAR  4,TIME
               MULT  TIME,60
               SVAR  5,I
               ADD   TIME,I
               EXECUTIVE   1,I      {save program image}
               IFEQ  I,0
                  BIT   ADMIN,OLORIN
                    OR
                  IFEQ  MINTIME,0
                     QUERY CONTINUE.NOW?
                        SAY   OK
                        SAY   BLANK
                        QUIT
                     FIN
                  FIN
                  SAY   OK
                  SAY   BLANK
                  STOP
               ELSE
                  SAY   CANT.SAVE
               FIN
            ELSE
               SAY   OK
            FIN
         FIN
         QUIT
ACTION   RESTORE
         EXECUTE  5,I      {get prime-time factor}
         IFGT  I,0      {if something forbids adventures}
            NOT
            BIT   ADMIN,OLORIN
               LDA   J,RESTORE.PRIME-1
               ADD   J,I
               SAY   J
               QUIT
            FIN
         FIN
         BIT   ADMIN,OLORIN
            SET   I,1
         ELSE
            SET   I,0
         FIN
         EXECUTIVE 7,I  {save value of I over RESTORE attempt}
         EXECUTE  2,I      {attempt to restore image}
         IFEQ  I,0         {all well}
            SVAR  4,I      {get hours}
            SVAR  5,J      {get minutes}
            MULT  I,60
            ADD   I,J
            IFLT  I,TIME
               ADD   I,720
               ADD   I,720    {1440 is too big}
            FIN
            SUB   I,TIME
            EXECUTIVE   8,J   {restore pushed value}
            IFEQ  J,1
               BIS   ADMIN,OLORIN
            ELSE
               BIC   ADMIN,OLORIN
            FIN
            BIT   ADMIN,OLORIN {if he's a wizard}
               OR
               NOT
            IFLT  I,MINTIME
               IFEQ  LAMP,1   {if the lamp is on}
                  ADD   LAMPLIFE,1  {compensate for following move}
               FIN
               BIT   ADMIN,OLORIN  {if we're a wizard}
                  OR
               IFEQ  MINTIME,0     {no time limit or restrictions}
                  QUERY SAVE.THE.IMAGE
                  ELSE
                     EXECUTIVE   3,I   {flush the image}
                  FIN
               ELSE
                  EXECUTIVE   3,I      {flush user-mode image}
               FIN
               EXECUTIVE   4,I   {flush the cache out}
               GOTO  HERE
               SAY   OK
               SAY   BLANK
            ELSE
               VALUE TOO.SOON,MINTIME
               SAY   BLANK
               STOP     {must stop - we already did the restore!}
            FIN
         ELSE
            IFEQ  I,1   {no file, or no image}
               SAY   NO.IMAGE
               SUB   TURNS,1  {let him try again}
            ELSE     {response 2 = checksum failed!}
               SAY   EXPLOSION   {well-house blew up}
               EXECUTE  3,I      {delete the record}
            FIN
         FIN
         QUIT
ACTION   DRINK
         IFEQ  STATUS,1
            OR
         IFKEY WATER
            BIT   HERE,H20HERE
               SAY   SLURP
               QUIT
            ELSE
               IFNEAR   BOTTLE
                  AND
               IFEQ  BOTTLE,0
                  SAY   WATERGONE
                  APPORT   WATER,LIMBO
                  SET   BOTTLE,1
                  QUIT
               FIN
            FIN
            IFKEY WATER
               NAME  IDONTSEE,ARG2
            ELSE
               SAY   CANTDRINK
            FIN
         ELSE
            BIT   ARG2,OBJECT
               IFNEAR   ARG2
                  SAY   HAH!
               ELSE
                  NAME  IDONTSEE,ARG2
               FIN
            ELSE
               SAY   HAH!
            FIN
         FIN
         QUIT
ACTION   NEWS
         SAY   NEWSDATA
         QUIT
ACTION   READ
         IFGT  STATUS,1
            BIT   ARG2,OBJECT
               IFNEAR   ARG2
                  IFKEY    MAGAZINES
                     CALL  READ.MAGAZINES
                  ELSE
                     IFKEY    MESSAGE
                        CALL  READ.MESSAGE
                     ELSE
                        IFKEY    TABLET
                           CALL  READ.TABLET
                        ELSE
                           NAME  DUNNO.HAO,ARG1
                        FIN
                     FIN
                  FIN
               ELSE
                  NAME  IDONTSEE,ARG2
               FIN
            ELSE
               SAY   HAH!
            FIN
         ELSE
            PROCEED
         FIN
         QUIT
ACTION   HOURS
         SAY   HOURS.ARE
         EXECUTIVE   6,I
         QUIT
ACTION   WIZARD
         QUERY R.U.A.WIZARD?
            SAY   PROVE.IT
            INPUT
            SAY   OH.POOH
            ADD   PENALTIES,10
         ELSE
            SAY   OK
         FIN
         QUIT
ACTION   CURIOUS
         IFEQ  MAGICK,0
            SET   MAGICK,1
         ELSE
            SET   MAGICK,-1
            SAY   WHAT?
         FIN
         QUIT
ACTION   GREEN
         IFEQ  MAGICK,1
            SET   MAGICK,2
         ELSE
            SET   MAGICK,-1
            SAY   WHAT?
         FIN
         QUIT
ACTION   IDEAS
         IFEQ  MAGICK,2
            SET   MAGICK,3
         ELSE
            SET   MAGICK,-1
            SAY   WHAT?
         FIN
         QUIT
ACTION   SLEPT
         IFEQ  MAGICK,3
            SET   MAGICK,4
         ELSE
            SET   MAGICK,-1
            SAY   WHAT?
         FIN
         QUIT
ACTION   FURIOUSLY
         IFEQ  MAGICK,4
            SET   MAGICK,-1
            BIS   ADMIN,OLORIN
            BIC   ADMIN,DEMO
            SAY   OK!
         ELSE
            SET   MAGICK,-1
            SAY   WHAT?
         FIN
         QUIT
ACTION   CLIMB
         SAY   NOCANCLIMB
         QUIT
ACTION   LOST
         SAY   IMCONFUSED
         QUIT
ACTION   MELENKURION
         IFNEAR   STATUE
            AND
         IFEQ  STATUE,0
            SET   STATUE,1
            SAY   CRUMBLE
         ELSE
            SAY   NOTHING
         FIN
         QUIT
ACTION   NOSIDE SAMOHT
         BIT   LAMP,SPECIAL1
            OR
         BIT   HERE,LIT
            OR
            NOT
         BIT   LAIR,BEENHERE
            OR
            NOT
         IFNEAR   LAMP
            SAY   NOTHING
         ELSE
            IFHAVE   LAMP
               SAY   FZAP
               CALL  CORONER
            ELSE
               IFGT  LAMPLIFE,40
                  APPORT   LAMP,YLEM
                  SET   BATTERIES,1    {so lamp doesn't come back}
                  SET   LAMP,0
                  SET   LAMPLIFE,0
                  CHANCE   50
                     SAY   LAMP.GOES.POOF
                     SAY   ITISNOWDARK
                  ELSE
                     SAY   LAMP.EXPLODES
                     CALL  CORONER
                  FIN
               ELSE
                  SAY   LAMP.RECHARGED
                  ADD   LAMPLIFE,150
                  SET   LAMP,1
                  BIS   LAMP,SPECIAL1
               FIN
            FIN
         FIN
         QUIT
ACTION   NOSIDE
         SAY   NOTHING
         QUIT
ACTION   SAMOHT
         SAY   NOTHING
         QUIT
ACTION   THURB
         SAY   NOTHING
         QUIT
ACTION   KNERL
         CALL  PASSPHRASE
ACTION   ZORTON
         CALL  PASSPHRASE
ACTION   KLAETU
         CALL  PASSPHRASE
ACTION   SNOEZE
         CALL  PASSPHRASE
ACTION   BLERBI
         CALL  PASSPHRASE
ACTION   RIDE
         IFEQ  STATUS,1
            OR
         IFKEY TURTLE
            AND
         IFNEAR   TURTLE
            SAY   TURTLE.BACK
            GOTO  RESERVOIR
            APPORT   TURTLE,LIMBO
            QUIT
         FIN
ACTION   PHUGGG
         BIS   DJINN,SPECIAL2    {he needn't tell us about it}
         BIT   HERE,NOTINCAVE
            SAY   NOTHING
         ELSE
            IFNEAR   BOTTLE
               AND
            IFEQ  BOTTLE,0
               OR
            BIT   HERE,H20HERE
               CHANCE   85
                  SAY   NOTHING
               ELSE
                  CHANCE   95
                     SAY   JELLYFISH
                     CALL  CORONER
                  ELSE
                     SAY   CAVE.DESTROYED
                     STOP
                  FIN
               FIN
            ELSE
               IFNEAR   AXE
                  OR
               IFNEAR   SWORD
                  IFNEAR   AXE
                     SAY   ZOT.AXE
                     IFHAVE   AXE
                     FIN
                     APPORT   AXE,LIMBO
                  FIN
                  IFNEAR   SWORD
                     SAY   ZOT.SWORD
                     IFHAVE   SWORD
                     FIN
                     APPORT   SWORD,LIMBO
                  FIN
               ELSE
                  RANDOM   I,3
                  MULT  I,2
                  IFGT  DWARF,1
                     ADD   I,1
                  FIN
                  IFNEAR   DWARF
                     CHANCE   70
                        LDA   J,IT.WORKED
                        ADD   I,J
                        SAY   I
                        APPORT   DWARF,LIMBO
                        SUB   DWARFCOUNT,DWARF
                        SET   DWARF,0
                     ELSE
                        LDA   J,IT.DIDNT.WORK
                        ADD   I,J
                        SAY   I
                        CALL  CORONER
                     FIN
                  ELSE
                     SAY   NOTHING
                  FIN
               FIN
            FIN
         FIN
         QUIT
ACTION   RUNOUT
         BIT   ADMIN,OLORIN   {wizard?}
            SET   CLOCK,0
            GOTO  HERE
            SAY   OK
         ELSE
            SAY   WHAT?
         FIN
         QUIT
INITIAL
         SAY   BLANK
         ITOBJ I
            APPORT   I,LIMBO
            RANDOM   J,100    {kick the random number generator}
         EOI
INITIAL             {Initialize portability of some objects}
          BIS KEYS,PORTABLE
          BIS LAMP,PORTABLE
          BIS CAGE,PORTABLE
          BIS ROD,PORTABLE
          BIS DYNAMITE,PORTABLE
          BIS BIRD,PORTABLE
          BIS PILLOW,PORTABLE
          BIS CLAM,PORTABLE
          BIS OYSTER,PORTABLE
          BIS MAGAZINES,PORTABLE
          BIS KNIFE,PORTABLE
          BIS FOOD,PORTABLE
          BIS BOTTLE,PORTABLE
          BIS WATER,PORTABLE
          BIS OIL,PORTABLE
          BIS AXE,PORTABLE
          BIS BEAR,PORTABLE
          BIS BATTERIES,PORTABLE
          BIS GOLD,PORTABLE
          BIS DIAMONDS,PORTABLE
          BIS SILVER,PORTABLE
          BIS JEWELRY,PORTABLE
          BIS COINS,PORTABLE
          BIS CHEST,PORTABLE
          BIS EGGS,PORTABLE
          BIS TRIDENT,PORTABLE
          BIS VASE,PORTABLE
          BIS POTTERY,PORTABLE
          BIS EMERALD,PORTABLE
          BIS PYRAMID,PORTABLE
          BIS PEARL,PORTABLE
          BIS RUG,PORTABLE
          BIS SPICES,PORTABLE
          BIS CHAIN,PORTABLE
          BIS RING,PORTABLE
          BIS SPYGLASS,PORTABLE
          BIS BAG,PORTABLE
          BIS HELMET,PORTABLE
          BIS TEETH,PORTABLE
          BIS VIAL,PORTABLE
          BIS MUSHROOM,PORTABLE
          BIS SCULPTURE,PORTABLE
          BIS BRACELET,PORTABLE
          BIS CASKET,PORTABLE
          BIS SWORD,PORTABLE
         BIS   CROWN,PORTABLE
         BIS   SCEPTRE,PORTABLE
         BIS   YACHT,PORTABLE
         BIS   FLASK,PORTABLE
         BIS   PLATE,PORTABLE
         BIS   BEADS,PORTABLE
INIT          {Set FREEBIE objects}
         BIS   BIRD,FREEBIE
         BIS   OIL,FREEBIE
         BIS   WATER,FREEBIE
         BIS   BEAR,FREEBIE
INIT          {Specify which rooms are self-lit (lamp not needed)}
          BIS ROAD,LIT
          BIS HILL,LIT
          BIS BUILDING,LIT
          BIS VALLEY,LIT
          BIS FOREST,LIT
          BIS FOREST2,LIT
          BIS SLIT,LIT
         BIS   FAKE.SLIT,LIT
          BIS DEPRESSION,LIT
          BIS INCAVE,LIT
          BIS COBBLES,LIT
          BIS PLOVER,LIT
          BIS BREATHTAKER,LIT
         BIS   LAIR,LIT
         BIS   SHELF,LIT
         BIS   BEACH,LIT
         BIS   PLAIN.2,LIT
         BIS   PLAIN.3,LIT
         BIS   FACES,LIT
         BIS   BY.FIGURE,LIT
         BIS   AUDIENCE,LIT
         BIS   AUDIENCE.E,LIT
         BIS   TRANSLUCENT,LIT
         BIS   PLATFORM,LIT
         BIS   CYLINDRICAL,LIT
         BIS   TREASUREROOM,LIT
         BIS   BALCONY,LIT
INITIAL          {Set dwarf-inhibits for appropriate places}
         BIS  INCAVE,NODWARF
         BIS  COBBLES,NODWARF
         BIS  ALCOVE,NODWARF
         BIS  PLOVER,NODWARF
         BIS  DARK,NODWARF
         BIS  SWOFCHASM,NODWARF
         BIS  NEOFCHASM,NODWARF
         BIS  CORRIDOR,NODWARF
         BIS  FORK,NODWARF
         BIS  WARMJUNCTN,NODWARF
         BIS  BREATHTAKER,NODWARF
         BIS  BOULDERS,NODWARF
         BIS  LIMESTONE,NODWARF
         BIS  BARREN,NODWARF
         BIS  BEARHERE,NODWARF
         BIS   MAZEA.114,NODWARF
         BIS   EASTPIT,NODWARF
         BIS   WESTPIT,NODWARF
         BIS   STREAMPIT,NODWARF
         BIS FACES,NODWARF
         BIS BY.FIGURE,NODWARF
         BIS PLAIN.1,NODWARF
         BIS PLAIN.2,NODWARF
         BIS PLAIN.3,NODWARF
         BIS NONDESCRIPT,NODWARF
         BIS PENTAGRAM,NODWARF
         BIS CHIMNEY,NODWARF
         BIS TUBE,NODWARF
         BIS TUBE.SLIDE,NODWARF
         BIS BASQUE.1,NODWARF
         BIS BASQUE.2,NODWARF
         BIS BASQUE.FORK,NODWARF
         BIS   PEELGRUNT,NODWARF
         BIS ON.STEPS,NODWARF
         BIS STEPS.EXIT,NODWARF
         BIS STORAGE,NODWARF
         BIS FAKE.Y2,NODWARF
         BIS FAKE.JUMBLE,NODWARF
         BIS CATACOMBS.1,NODWARF
         BIS CATACOMBS.2,NODWARF
         BIS CATACOMBS.3,NODWARF
         BIS CATACOMBS.4,NODWARF
         BIS CATACOMBS.5,NODWARF
         BIS CATACOMBS.6,NODWARF
         BIS CATACOMBS.7,NODWARF
         BIS CATACOMBS.8,NODWARF
         BIS CATACOMBS.9,NODWARF
         BIS CATACOMBS.10,NODWARF
         BIS CATACOMBS.11,NODWARF
         BIS CATACOMBS.12,NODWARF
         BIS CATACOMBS.13,NODWARF
         BIS CATACOMBS.14,NODWARF
         BIS CATACOMBS.15,NODWARF
         BIS CATACOMBS.16,NODWARF
         BIS CATACOMBS.17,NODWARF
         BIS CATACOMBS.18,NODWARF
         BIS CATACOMBS.19,NODWARF
         BIS AUDIENCE,NODWARF
         BIS AUDIENCE.E,NODWARF
         BIS BANSHEE.1,NODWARF
         BIS GOLDEN,NODWARF
         BIS ARABESQUE,NODWARF
         BIS TRANSLUCENT,NODWARF
        BIS RESERVOIR.N,NODWARF
        BIS WARM,NODWARF
        BIS BALCONY,NODWARF
         BIS   INSAFE,NODWARF
INITIAL                 {Specify which places aren't in the cave}
         BIS ROAD,NOTINCAVE
         BIS HILL,NOTINCAVE
         BIS BUILDING,NOTINCAVE
         BIS VALLEY,NOTINCAVE
         BIS FOREST,NOTINCAVE
         BIS FOREST2,NOTINCAVE
         BIS SLIT,NOTINCAVE
         BIS DEPRESSION,NOTINCAVE
         BIS   FAKE.SLIT,NOTINCAVE
INITIAL              {indicate where "BACK" command invalid}
*
* Most of the rooms in the mazes are NOBACK-type places to give
* the adventurer heartburn and a possible ulcer.  The two rooms that
* are at the very entrances of their respective mazes (MAXEA.42 and
* MAZED.107) are not NOBACK-types, so that if you accidentally
* wander into the mazes you can escape quickly by saying "GO BACK".
* You still can't use "BACK" when in these rooms if you got there
* from another room in the maze, because the room you came from
* has the "NOBACK" bit set.
*
         BIS MAZEA.43,NOBACK
         BIS MAZEA.44,NOBACK
         BIS MAZEA.45,NOBACK
         BIS MAZEA.46,NOBACK
         BIS MAZEA.47,NOBACK
         BIS MAZEA.48,NOBACK
         BIS MAZEA.49,NOBACK
         BIS MAZEA.50,NOBACK
         BIS MAZEA.51,NOBACK
         BIS MAZEA.52,NOBACK
         BIS MAZEA.53,NOBACK
         BIS MAZEA.54,NOBACK
         BIS MAZEA.55,NOBACK
         BIS MAZEA.56,NOBACK
         BIS MAZEA.57.PIT,NOBACK
         BIS MAZEA.58,NOBACK
         BIS MAZEA.80,NOBACK
         BIS MAZEA.81,NOBACK
         BIS MAZEA.82,NOBACK
         BIS MAZEA.83,NOBACK
         BIS MAZEA.84,NOBACK
         BIS MAZEA.85,NOBACK
         BIS MAZEA.86,NOBACK
         BIS MAZEA.87,NOBACK
         BIS MAZED.112,NOBACK
         BIS MAZEA.114,NOBACK
         BIS MAZED.131,NOBACK
         BIS MAZED.132,NOBACK
         BIS MAZED.133,NOBACK
         BIS MAZED.134,NOBACK
         BIS MAZED.135,NOBACK
         BIS MAZED.136,NOBACK
         BIS MAZED.137,NOBACK
         BIS MAZED.138,NOBACK
         BIS MAZED.139,NOBACK
         BIS MAZED.140,NOBACK
         BIS   SHELL,NOBACK
         BIS   ARCH.COR.1,NOBACK
         BIS   ARCH.COR.2,NOBACK
         BIS   RESERVOIR.N,NOBACK
         BIS   INCLINE,NOBACK
         BIS   STALACT,NOBACK
         BIS   SWOFCHASM,NOBACK
         BIS   NEOFCHASM,NOBACK
         BIS   WITTSEND,NOBACK
         BIS   ALCOVE,NOBACK
         BIS   PLOVER,NOBACK
         BIS   DARK,NOBACK
         BIS   NSCANYONWIDE,NOBACK
         BIS   ICECAVE.1,NOBACK
         BIS   ICECAVE.2,NOBACK
         BIS   ICECAVE.3,NOBACK
         BIS   ICECAVE.4,NOBACK
         BIS   ICECAVE.5,NOBACK
         BIS   ICECAVE.6,NOBACK
         BIS   ICECAVE.7,NOBACK
         BIS   ICECAVE.8,NOBACK
         BIS   ICECAVE.9,NOBACK
         BIS   ICECAVE.10,NOBACK
         BIS   ICECAVE.11,NOBACK
         BIS   ICECAVE.12,NOBACK
         BIS   ICECAVE.13,NOBACK
         BIS   ICECAVE.14,NOBACK
         BIS   ICECAVE.15,NOBACK
         BIS   ICECAVE.16,NOBACK
         BIS   ICECAVE.17,NOBACK
         BIS   ICECAVE.18,NOBACK
         BIS   ICECAVE.19,NOBACK
         BIS   ICECAVE.20,NOBACK
         BIS   ICECAVE.21,NOBACK
         BIS   SLIDE,NOBACK
         BIS   ICE,NOBACK
         BIS   CATACOMBS.1,NOBACK
         BIS   CATACOMBS.2,NOBACK
         BIS   CATACOMBS.3,NOBACK
         BIS   CATACOMBS.4,NOBACK
         BIS   CATACOMBS.5,NOBACK
         BIS   CATACOMBS.6,NOBACK
         BIS   CATACOMBS.7,NOBACK
         BIS   CATACOMBS.8,NOBACK
         BIS   CATACOMBS.9,NOBACK
         BIS   CATACOMBS.10,NOBACK
         BIS   CATACOMBS.11,NOBACK
         BIS   CATACOMBS.12,NOBACK
         BIS   CATACOMBS.13,NOBACK
         BIS   CATACOMBS.14,NOBACK
         BIS   CATACOMBS.15,NOBACK
         BIS   CATACOMBS.16,NOBACK
         BIS   CATACOMBS.17,NOBACK
         BIS   CATACOMBS.18,NOBACK
         BIS   CATACOMBS.19,NOBACK
         BIS   FACES,NOBACK
         BIS   PLAIN.1,NOBACK
         BIS   PLAIN.2,NOBACK
         BIS   BASQUE.1,NOBACK
         BIS   CYLINDRICAL,NOBACK
         BIS   PLATFORM,NOBACK
INITIAL                            {set in-maze bits}
         BIS MAZEA.42,INMAZE
         BIS MAZEA.43,INMAZE
         BIS MAZEA.44,INMAZE
         BIS MAZEA.45,INMAZE
         BIS MAZEA.46,INMAZE
         BIS MAZEA.47,INMAZE
         BIS MAZEA.48,INMAZE
         BIS MAZEA.49,INMAZE
         BIS MAZEA.50,INMAZE
         BIS MAZEA.51,INMAZE
         BIS MAZEA.52,INMAZE
         BIS MAZEA.53,INMAZE
         BIS MAZEA.54,INMAZE
         BIS MAZEA.55,INMAZE
         BIS MAZEA.56,INMAZE
         BIS MAZEA.57.PIT,INMAZE
         BIS MAZEA.58,INMAZE
         BIS MAZEA.80,INMAZE
         BIS MAZEA.81,INMAZE
         BIS MAZEA.82,INMAZE
         BIS MAZEA.83,INMAZE
         BIS MAZEA.84,INMAZE
         BIS MAZEA.85,INMAZE
         BIS MAZEA.86,INMAZE
         BIS MAZEA.87,INMAZE
         BIS MAZED.107,INMAZE
         BIS MAZED.112,INMAZE
         BIS MAZEA.114,INMAZE
         BIS MAZED.131,INMAZE
         BIS MAZED.132,INMAZE
         BIS MAZED.133,INMAZE
         BIS MAZED.134,INMAZE
         BIS MAZED.135,INMAZE
         BIS MAZED.136,INMAZE
         BIS MAZED.137,INMAZE
         BIS MAZED.138,INMAZE
         BIS MAZED.139,INMAZE
         BIS MAZED.140,INMAZE
         BIS   SLIDE,INMAZE
         BIS   ICECAVE.1,INMAZE
         BIS   ICECAVE.1A,INMAZE
         BIS   ICECAVE.2,INMAZE
         BIS   ICECAVE.2A,INMAZE
         BIS   ICECAVE.3,INMAZE
         BIS   ICECAVE.3A,INMAZE
         BIS   ICECAVE.4,INMAZE
         BIS   ICECAVE.5,INMAZE
         BIS   ICECAVE.6,INMAZE
         BIS   ICECAVE.7,INMAZE
         BIS   ICECAVE.8,INMAZE
         BIS   ICECAVE.9,INMAZE
         BIS   ICECAVE.10,INMAZE
         BIS   ICECAVE.11,INMAZE
         BIS   ICECAVE.12,INMAZE
         BIS   ICECAVE.12A,INMAZE
         BIS   ICECAVE.13,INMAZE
         BIS   ICECAVE.14,INMAZE
         BIS   ICECAVE.15,INMAZE
         BIS   ICECAVE.15A,INMAZE
         BIS   ICECAVE.16,INMAZE
         BIS   ICECAVE.17,INMAZE
         BIS   ICECAVE.18,INMAZE
         BIS   ICECAVE.19,INMAZE
         BIS   ICECAVE.20,INMAZE
         BIS   ICECAVE.21,INMAZE
         BIS   ICECAVE.22,INMAZE
         BIS   ICECAVE.23,INMAZE
         BIS   ICECAVE.24,INMAZE
         BIS   ICECAVE.25,INMAZE
         BIS   ICECAVE.26,INMAZE
         BIS   ICECAVE.27,INMAZE
         BIS   ICECAVE.28,INMAZE
         BIS   ICECAVE.28A,INMAZE
         BIS   ICECAVE.29,INMAZE
         BIS   ICECAVE.30,INMAZE
INITIAL                                {specify rooms with only 1 exit}
         BIS  GOLDROOM,ONE.EXIT
         BIS  SOUTHSIDE,ONE.EXIT
         BIS  SANDSTONE,ONE.EXIT
         BIS  WINDOW,ONE.EXIT
         BIS  WINDOW2,ONE.EXIT
         BIS  MAZEA.46,ONE.EXIT
         BIS  MAZEA.47,ONE.EXIT
         BIS  MAZEA.48,ONE.EXIT
         BIS  MAZEA.49,ONE.EXIT
         BIS  MAZEA.54,ONE.EXIT
         BIS  MAZEA.56,ONE.EXIT
         BIS  MAZEA.58,ONE.EXIT
         BIS  DEADEND1,ONE.EXIT
         BIS  DEADEND2,ONE.EXIT
         BIS  DEADEND3,ONE.EXIT
         BIS  MAZEA.81,ONE.EXIT
         BIS  MAZEA.82,ONE.EXIT
         BIS  MAZEA.85,ONE.EXIT
         BIS  MAZEA.86,ONE.EXIT
         BIS  SOFT,ONE.EXIT
         BIS  CULDESAC,ONE.EXIT
         BIS  RESERVOIR,ONE.EXIT
         BIS  BALCONY,ONE.EXIT
         BIS  MAZED.140,ONE.EXIT
         BIS  INSAFE,ONE.EXIT
         BIS  TOOL,ONE.EXIT
         BIS  CUBICLE,ONE.EXIT
         BIS  SPHERICAL,ONE.EXIT
         BIS  ICECAVE.1A,ONE.EXIT
         BIS  ICECAVE.3A,ONE.EXIT
         BIS  ICECAVE.7,ONE.EXIT
         BIS  ICECAVE.8,ONE.EXIT
         BIS  ICECAVE.13,ONE.EXIT
         BIS  ICECAVE.14,ONE.EXIT
         BIS  CRACK.4,ONE.EXIT
         BIS  BEACH,ONE.EXIT
INITIAL                             {specify openable objects}
         BIS   GRATE,OPENABLE
         BIS   DOOR,OPENABLE
         BIS   CLAM,OPENABLE
         BIS   OYSTER,OPENABLE
         BIS   FLASK,OPENABLE
         BIS   CHAIN,OPENABLE
         BIS   SAFE,OPENABLE
         BIS   VIAL,OPENABLE
INITIAL                             {specify invisible objects}
         BIS   STEPS,INVISIBLE
         BIS   FISSURE,INVISIBLE
         BIS   MIRROR,INVISIBLE
         BIS   STALACTITE,INVISIBLE
         BIS   DRAWING,INVISIBLE
         BIS   PIRATE,INVISIBLE
         BIS   STATUE,INVISIBLE
         BIS   VOLCANO,INVISIBLE
         BIS   QUICKSAND,INVISIBLE
         BIS   THRONE,INVISIBLE
         BIS   CARPET,INVISIBLE
         BIS   DWARF,INVISIBLE
         BIS   KNIFE,INVISIBLE
         BIS   FOG,INVISIBLE
         BIS   PLANT2,INVISIBLE
INITIAL                            {set hint-exists bits}
         BIS MAZEA.42,HINTABLE
         BIS MAZEA.43,HINTABLE
         BIS MAZEA.44,HINTABLE
         BIS MAZEA.45,HINTABLE
         BIS MAZEA.46,HINTABLE
         BIS MAZEA.47,HINTABLE
         BIS MAZEA.48,HINTABLE
         BIS MAZEA.49,HINTABLE
         BIS MAZEA.50,HINTABLE
         BIS MAZEA.51,HINTABLE
         BIS MAZEA.52,HINTABLE
         BIS MAZEA.53,HINTABLE
         BIS MAZEA.54,HINTABLE
         BIS MAZEA.55,HINTABLE
         BIS MAZEA.56,HINTABLE
         BIS MAZEA.57.PIT,HINTABLE
         BIS MAZEA.58,HINTABLE
         BIS MAZEA.80,HINTABLE
         BIS MAZEA.81,HINTABLE
         BIS MAZEA.82,HINTABLE
         BIS MAZEA.83,HINTABLE
         BIS MAZEA.84,HINTABLE
         BIS MAZEA.85,HINTABLE
         BIS MAZEA.86,HINTABLE
         BIS MAZEA.87,HINTABLE
         BIS MAZED.107,HINTABLE
         BIS MAZED.112,HINTABLE
         BIS MAZEA.114,HINTABLE
         BIS MAZED.131,HINTABLE
         BIS MAZED.132,HINTABLE
         BIS MAZED.133,HINTABLE
         BIS MAZED.134,HINTABLE
         BIS MAZED.135,HINTABLE
         BIS MAZED.136,HINTABLE
         BIS MAZED.137,HINTABLE
         BIS MAZED.138,HINTABLE
         BIS MAZED.139,HINTABLE
         BIS MAZED.140,HINTABLE
         BIS   BIRDCHAMBER,HINTABLE
         BIS   DEPRESSION,HINTABLE
         BIS   MTKING,HINTABLE
         BIS   WITTSEND,HINTABLE
         BIS   PLOVER,HINTABLE
         BIS   ALCOVE,HINTABLE
         BIS   DARK,HINTABLE
         BIS   SLIDE,HINTABLE
         BIS   ICECAVE.1,HINTABLE
         BIS   ICECAVE.1A,HINTABLE
         BIS   ICECAVE.2,HINTABLE
         BIS   ICECAVE.2A,HINTABLE
         BIS   ICECAVE.3,HINTABLE
         BIS   ICECAVE.3A,HINTABLE
         BIS   ICECAVE.4,HINTABLE
         BIS   ICECAVE.5,HINTABLE
         BIS   ICECAVE.6,HINTABLE
         BIS   ICECAVE.7,HINTABLE
         BIS   ICECAVE.8,HINTABLE
         BIS   ICECAVE.9,HINTABLE
         BIS   ICECAVE.10,HINTABLE
         BIS   ICECAVE.11,HINTABLE
         BIS   ICECAVE.12,HINTABLE
         BIS   ICECAVE.12A,HINTABLE
         BIS   ICECAVE.13,HINTABLE
         BIS   ICECAVE.14,HINTABLE
         BIS   ICECAVE.15,HINTABLE
         BIS   ICECAVE.15A,HINTABLE
         BIS   ICECAVE.16,HINTABLE
         BIS   ICECAVE.17,HINTABLE
         BIS   ICECAVE.18,HINTABLE
         BIS   ICECAVE.19,HINTABLE
         BIS   ICECAVE.20,HINTABLE
         BIS   ICECAVE.21,HINTABLE
         BIS   ICECAVE.22,HINTABLE
         BIS   ICECAVE.23,HINTABLE
         BIS   ICECAVE.24,HINTABLE
         BIS   ICECAVE.25,HINTABLE
         BIS   ICECAVE.26,HINTABLE
         BIS   ICECAVE.27,HINTABLE
         BIS   ICECAVE.28,HINTABLE
         BIS   ICECAVE.28A,HINTABLE
         BIS   ICECAVE.29,HINTABLE
         BIS   ICECAVE.30,HINTABLE
         BIS   PLAIN.2,HINTABLE
INITIAL              {Declare water-holes}
         BIS BUILDING,H20HERE
         BIS ROAD,H20HERE
         BIS VALLEY,H20HERE
         BIS SLIT,H20HERE
         BIS STREAMPIT,H20HERE
         BIS CAVERN,H20HERE
         BIS RESERVOIR,H20HERE
         BIS   RESERVOIR.N,H20HERE
INIT           {indicate where throwing things sends them elsewhere}
         BIS PIT,THROWER
         BIS EASTOFFISSUR,THROWER
         BIS WESTOFFISSUR,THROWER
         BIS WEND2PIT,THROWER
         BIS EEND2PIT,THROWER
         BIS LOWNSPASSAGE,THROWER
         BIS WINDOW,THROWER
         BIS WINDOW2,THROWER
         BIS BRINK,THROWER
         BIS DUSTY,THROWER
         BIS MAZEA.57.PIT,THROWER
         BIS SECRETNSCYN,THROWER
         BIS SECRETNSCPAS,THROWER
         BIS SECRETEW.TITE,THROWER
         BIS INCLINE,THROWER
         BIS CAVERN,THROWER
         BIS MISTY,THROWER
         BIS RESERVOIR,THROWER
         BIS RESERVOIR.N,THROWER
         BIS STALACT,THROWER
         BIS BALCONY,THROWER
         BIS SWOFCHASM,THROWER
         BIS NEOFCHASM,THROWER
         BIS BREATHTAKER,THROWER
         BIS FACES,THROWER
         BIS TUBE,THROWER
         BIS TUBE.SLIDE,THROWER
         BIS BASQUE.FORK,THROWER
         BIS ON.STEPS,THROWER
         BIS STEPS.EXIT,THROWER
         BIS BRINK.1,THROWER
         BIS BRINK.2,THROWER
         BIS ICE,THROWER
         BIS BRINK.3,THROWER
         BIS SHELF,THROWER
         BIS PLATFORM,THROWER
INITIAL             {Declare the treasures}
         BIS GOLD,VALUED
         BIS DIAMONDS,VALUED
         BIS SILVER,VALUED
         BIS JEWELRY,VALUED
         BIS COINS,VALUED
         BIS CHEST,VALUED
         BIS EGGS,VALUED
         BIS TRIDENT,VALUED
         BIS VASE,VALUED
         BIS EMERALD,VALUED
         BIS PYRAMID,VALUED
         BIS PEARL,VALUED
         BIS RUG,VALUED
         BIS SPICES,VALUED
         BIS CHAIN,VALUED
         BIS   CASKET,VALUED
         BIS   SCULPTURE,VALUED
         BIS   BRACELET,VALUED
         BIS   RING,VALUED
         BIS   SPYGLASS,VALUED
         BIS   BAG,VALUED
         BIS   HELMET,VALUED
         BIS   CROWN,VALUED
         BIS   SCEPTRE,VALUED
         BIS   YACHT,VALUED
         BIS   BEADS,VALUED
INIT          {Declare unstable objects}
         BIS  CHEST,UNSTABLE
         BIS  SCULPTURE,UNSTABLE
         BIS  CAGE,UNSTABLE
         BIS  CASKET,UNSTABLE
         BIS  TEETH,UNSTABLE
         BIS  MUSHROOM,UNSTABLE
         BIS   BAG,UNSTABLE
         BIS   CROWN,UNSTABLE
         BIS   YACHT,UNSTABLE
         BIS   PLATE,UNSTABLE
         BIS   BEADS,UNSTABLE
         BIS   FLASK,UNSTABLE
INITIAL        {declare mortal (killable) things}
         BIS   TROLL,MORTAL
         BIS   DWARF,MORTAL
         BIS   DRAGON,MORTAL
         BIS   SNAKE,MORTAL
         BIS   BLOB,MORTAL
         BIS   BEAR,MORTAL
         BIS   CLAM,MORTAL
         BIS   OYSTER,MORTAL
         BIS   OGRE,MORTAL
         BIS   BIRD,MORTAL
         BIS   DJINN,MORTAL
         BIS   GOBLINS,MORTAL
         BIS   BASILISK,MORTAL
         BIS   GONG,MORTAL    {strange but true - you can HIT GONG}
*
*        Declare edible objects
*
         BIS   FOOD,EDIBLE
         BIS   MUSHROOM,EDIBLE
INITIAL             {Move objects to their starting places}
         APPORT KEYS,BUILDING
         APPORT LAMP,BUILDING
         APPORT GRATE,DEPRESSION
         APPORT CAGE,COBBLES
         APPORT ROD,DEBRIS
         APPORT STEPS,PIT
         APPORT BIRD,BIRDCHAMBER
         APPORT DOOR,IMMENSENSPASS
         APPORT PILLOW,SOFT
         APPORT SNAKE,MTKING
         APPORT FISSURE,EASTOFFISSUR
         APPORT TABLET,DARK
         APPORT CLAM,SHELL
         APPORT MAGAZINES,ANTEROOM
         APPORT FOOD,BUILDING
         APPORT BOTTLE,BUILDING
         APPORT PLANT,WESTPIT
         APPORT PLANT2,WEND2PIT
         APPORT STALACTITE,STALACT
         APPORT SHADOW,WINDOW
         APPORT DRAWING,ORIENTAL
         APPORT DRAGON,SECRETCYNNE1
         APPORT CHASM,SWOFCHASM
         APPORT TROLL,SWOFCHASM
         APPORT BEAR,BEARHERE
         APPORT VOLCANO,BREATHTAKER
         APPORT MACHINE,MAZED.140
         APPORT CARPET,SOFT
         APPORT GOLD,GOLDROOM
         APPORT DIAMONDS,WESTOFFISSUR
         APPORT SILVER,LOWNSPASSAGE
         APPORT JEWELRY,SOUTHSIDE
         APPORT COINS,WESTSIDE
         APPORT EGGS,GIANT
         APPORT TRIDENT,CAVERN
         APPORT VASE,ORIENTAL
         APPORT EMERALD,PLOVER
         APPORT PYRAMID,DARK
         APPORT SPICES,BOULDERS
         APPORT CHAIN,BEARHERE
         APPORT   SPYGLASS,IN.JONAH
         APPORT   BAG,BEACH
         APPORT   DINGHY,BEACH
         APPORT   HELMET,MORION
         APPORT   VIAL,SPHERICAL
         APPORT   MUSHROOM,CUBICLE
         APPORT   SCULPTURE,ICECAVE.14
         APPORT   CASKET,CRACK.4
         APPORT   SAFE,VAULT
         APPORT   QUICKSAND,ARCH.COR.1
         APPORT   SLIME,CRACK.2
         APPORT   SWORD,SANDSTONE
         APPORT   OGRE,GLASSY
         APPORT   THRONE,AUDIENCE.E
         APPORT   SKELETON,AUDIENCE.E
         APPORT   SCEPTRE,AUDIENCE.E
         APPORT   CROWN,INSAFE
         APPORT   STATUE,BY.FIGURE
         APPORT   FOG,PLAIN.2
         APPORT   YACHT,NONDESCRIPT
         APPORT   BRACELET,TRANSLUCENT
         APPORT   FLASK,ARABESQUE
         APPORT   BASILISK,BASQUE.1
         APPORT   PLATE,STORAGE
         APPORT   BEADS,BALCONY
         APPORT   GONG,RESERVOIR.N
INITIAL          {Declare schizoid objects}
         BIS GRATE,SCHIZOID
         BIS STEPS,SCHIZOID
         BIS FISSURE,SCHIZOID
         BIS PLANT2,SCHIZOID
         BIS SHADOW,SCHIZOID
         BIS DRAGON,SCHIZOID
         BIS CHASM,SCHIZOID
         BIS TROLL,SCHIZOID
         BIS TROLL2,SCHIZOID
         BIS QUICKSAND,SCHIZOID
         BIS   SAFE,SCHIZOID
         BIS   FOG,SCHIZOID      {weird case - see PHOG routine}
         BIS   GORGE,SCHIZOID
         BIS   BASILISK,SCHIZOID
INITIAL          {Wake up user and greet him.}
         SET   BACKLASH,35     {normal "dwarves not vengeful"}
         SET   FLEETFOOT,25   {not running but didn't just attack}
         GOTO  ROAD
         LDA   OK,OK!
         RANDOM   CLOCK,10
         ADD   CLOCK,15
         SET   LAMPLIFE,300
         RANDOM   DWARFCOUNT,5
         ADD      DWARFCOUNT,4
         CHANCE   5
            RANDOM   CAMEO.TIME,400
            ADD   CAMEO.TIME,100
         ELSE
            SET   CAMEO.TIME,0
         FIN
         SET   CHAIN,1
         SET   FOG,8
         SET   FLASK,1
         SET   INVCT,0
         SET   STRENGTH,7
         SAY    LOGON
         EXECUTIVE   5,I      {get prime-time flag}
         IFGT  I,0
            LDA   J,CAVE.NOT.OPEN-1
            ADD   J,I
            SAY   J
            IFEQ  I,1
               EXECUTIVE   6,J
            FIN
            EXECUTIVE   9,J      {exit if demo games not allowed}
            SAY   BLANK
            SAY   CAN.DEMO
            QUERY WANT.DEMO
               SAY   BLANK
               SAY   OK!
               SAY   BLANK
               BIS   ADMIN,DEMO
            ELSE
               SAY   TA.TA
               STOP
            FIN
         FIN
         QUERY HITHERE
            SAY   INTRO
         FIN
         SAY   BLANK
INITIAL
         QUIT
REPEAT
         RANDOM   I,100    {kick the random number generator}
         BIT   ADMIN,TICKER
            CALL  TICK
         FIN
         BIT   STATUS,MOVED
         ELSE
            IFNEAR   DWARF
               AND
            CHANCE   BACKLASH  {Is dwarf particularly vengeful?}
               CALL  DWARF.ATTACK
            FIN
            PROCEED
         FIN
         BIT   THERE,ONE.EXIT
            AND
         IFLOC DWARF,THERE
            AND
            NOT
         BIT   ADMIN,OLORIN   {don't block wizards}
            GOTO  THERE
            BIC   STATUS,MOVED
            SAY   DWARFBLOCK
            PROCEED
         FIN
         IFNEAR   FOG {must be done before clearing MOVED flag}
            CALL  PHOG
         FIN
         BIC   STATUS,MOVED
         RANDOM   FOOF,FOOF.LAST-FOOF.FIRST+1
         LDA   I,FOOF.FIRST
         ADD   FOOF,I
         CHANCE   5
            LDA   FOOF,FOOF.ODD
         FIN
         ADD   MOVES,1
         BIT   ADMIN,DEMO
            SET   I,MAX.DEMO
         ELSE
            SET   I,MAX.GAME
         FIN
         IFEQ  MOVES,I
            SAY   WIZARD.ENDS
            CALL  FINIS
         FIN
         IFNEAR   LAMP
            IFEQ  LAMP,1
               SUB   LAMPLIFE,1
               IFEQ  LAMPLIFE,40
                  OR
               IFEQ  LAMPLIFE,0
                  CALL  LAMPREY
               FIN
            FIN
         FIN
         IFLOC GOBLINS,LIMBO {resting place}
         ELSE
            APPORT   GOBLINS,HERE
            IFGT  GOBLINS,-1
               SAY   GOBLIN.CHASE
            FIN
            ADD   GOBLINS,1
         FIN
         BIT   HERE,BEENHERE
            AND
         BIT   STATUS,QUICKIE
            OR
         BIT   STATUS,FASTMODE
            SET   J,0   {list objects immediately after place description}
         ELSE
            SET   J,1   {stick blank line after place description}
         FIN
         IFNEAR   LAMP
            AND
         IFEQ  LAMP,1
            OR
         BIT   HERE,LIT
            SAY   HERE
            BIT   HERE,DAMP
               SAY   GROUND.IS.DAMP
            FIN
            BIT   HERE,BEENHERE
               SET   K,2
             ELSE
               SET   K,3
            FIN
            BIS   HERE,BEENHERE
            IFLOC DWARF,LIMBO
             ELSE
               BIT   HERE,NOTINCAVE
                  OR
               BIT   HERE,NODWARF
                ELSE
                  APPORT   DWARF,HERE
               FIN
            FIN
            ITLIST I
               IFNEAR   I
                  AND
                  NOT
               IFHAVE   I
                  BIS   I,SEEN
                  IFEQ  J,1
                   AND
                   NOT
                  BIT   I,INVISIBLE
                     SET   J,0
                     SAY   BLANK
                  FIN
                  SAY   I
               FIN
            EOI
            IFHAVE   BEAR
               SAY   I.C.A.BEAR
            FIN
         ELSE
            BIT   THERE,LIT
               OR
            CHANCE   75
               OR
            BIT   ADMIN,RANOUT   {don't fall if lamp just died}
               SAY   ITISNOWDARK
            ELSE
               SAY   CRUNCH
               CALL  CORONER
            FIN
         FIN
         BIC   ADMIN,RANOUT      {clear "lamp just died"}
         IFAT  Y2
            CHANCE   35
               SAY   SAYSPLUGH
            FIN
         FIN
         IFNEAR   GOBLINS
            ADD   GOBLINS,1
            IFGT  GOBLINS,6  {highest existing state}
               CALL  CORONER
            FIN
         FIN
         BIT   HERE,NOTINCAVE
         ELSE
            SUB   CLOCK,K  {count clock down 2 or 3 ticks}
            IFLT  CLOCK,1
               CALL  CLOCK4
            FIN
         FIN
         IFNEAR   DWARF
            SET   FLEETFOOT,50 {added 1 to DWARF in the CLOCK4 routine}
            CALL  DWARF.ATTACK
         FIN
         IFLOC LAMP,YLEM
            AND
         IFAT  ROAD
            AND
         IFLT  CLOSURE,4      {lamp vanishes during end-game}
            SAY   LAMP.DEAD!
            SET   QUITTING,1
            CALL  FINIS
         FIN
REPEAT
         BIT   HERE,HINTABLE
            ADD   HINT.TIME,1
            IFGT  HINT.TIME,30
               AND
               NOT
            BIT   HERE,INMAZE
               OR
            IFGT  HINT.TIME,50
               CALL  HINT.LOGIC
            FIN
         ELSE
            SET   HINT.TIME,0
         FIN
         IFEQ  BLOB,16
            APPORT   BLOB,HERE
         FIN
         BIT   STATUS,JUGGLED    {did we pick up/drop/move anything?}
            BIC   STATUS,JUGGLED
            SET   INVCT,0
            ITLIST   I
               IFHAVE   I
                  AND
                  NOT
               BIT   I,FREEBIE
                  ADD   INVCT,1
               FIN
            EOI
         FIN
         SET   FLEETFOOT,25   {not running, didn't just attack}
         SET   BACKLASH,35     {dwarves not vengeful}
         INPUT
         SUB   FOOBAR,1
         ADD   TURNS,1
         IFEQ  STATUS,0
            QUIT
         FIN
         IFEQ  ARG1,BADWORD
            SAY   WHAT?
            QUIT
         FIN
         IFKEY SAY
            CALL  PRESAY
         FIN
         IFGT  STATUS,1
            IFEQ  ARG2,BADWORD
               LDA   I,RESTORE   {last special command}
               IFGT  ARG1,I
                  NAME  NOCOMPRENDE,ARG2
                  QUIT
               FIN
            FIN
         FIN
         CALL  HERE
         BIT   ARG1,PLACE
            IFAT  ARG1
               SAY   YOU.ARE.THERE
            ELSE
               SAY   NO.CAN.GO
            FIN
         ELSE
            CALL ARG1
            BIT   ARG1,OBJECT
               IFNEAR   ARG1
                  NAME  WHAT.DO,ARG1
                  BIS   STATUS,PLS.CLARIFY   {request clarification}
               ELSE
                  NAME  IDONTSEE,ARG1
               FIN
            ELSE
               CALL  BAILOUT
            FIN
         FIN
         QUIT
                                                    